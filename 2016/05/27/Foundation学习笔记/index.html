<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Foundation学习笔记 · coder-gwb</title><meta name="description" content="Foundation学习笔记 - null"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/categories/编程" target="_self" class="nav-list-link">编程</a></li><li class="nav-list-item"><a href="/categories/读书" target="_self" class="nav-list-link">读书</a></li><li class="nav-list-item"><a href="/categories/生活" target="_self" class="nav-list-link">生活</a></li><li class="nav-list-item"><a href="https://github.com/coderspike" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">Foundation学习笔记</h1><div class="post-info">2016年5月27日</div><div class="post-content"><blockquote>
<p>简介：Cocoa框架中包含众多子框架，Foundation是其中的重要框架，NSObject就在Foundation框架之中。</p>
</blockquote>
<h2 id="一-、常用结构体"><a href="#一-、常用结构体" class="headerlink" title="一 、常用结构体"></a>一 、常用结构体</h2><hr>
<ul>
<li><h5 id="NSRange-范围结构体，用来对对象进行范围操作。"><a href="#NSRange-范围结构体，用来对对象进行范围操作。" class="headerlink" title="NSRange:范围结构体，用来对对象进行范围操作。"></a>NSRange:范围结构体，用来对对象进行范围操作。</h5></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> #import &lt;Foundation/Foundation.h&gt;  </span><br><span class="line">  </span><br><span class="line">int main(int argc, const charchar * argv[])  </span><br><span class="line">&#123;  </span><br><span class="line">    NSString *str = @&quot;123456789&quot;;  </span><br><span class="line"></span><br><span class="line">    NSRange r1 = [str rangeOfString:@&quot;9&quot;];  </span><br><span class="line">      </span><br><span class="line">    NSLog(@&quot;location = %ld, length = %ld&quot;, r1.location, r1.length);  </span><br><span class="line">      </span><br><span class="line">    return 0;  </span><br><span class="line">&#125;</span><br><span class="line">结果：location = 8, length = 1  </span><br><span class="line">如果找不到相应字符串，返回的是NSNotFound, 而NSNotFound就是-1, 由于NSNotFound是unsignedlong类型, 所以打印出来是这么一大堆的数字 。</span><br><span class="line">调用输出语句输出NSNotFound，NSLog(@&quot;%d ---- %lu&quot;, NSNotFound, NSNotFound); </span><br><span class="line">结果：</span><br><span class="line">2015-02-02 22:45:45.497 1.NSRange[11947:987435] location = 9223372036854775807, length = 0  </span><br><span class="line">2015-02-02 22:45:45.499 1.NSRange[11947:987435] -1 ---- 9223372036854775807</span><br></pre></td></tr></table></figure>
<ul>
<li><h5 id="NSPoint：表示一个点。"><a href="#NSPoint：表示一个点。" class="headerlink" title="NSPoint：表示一个点。"></a>NSPoint：表示一个点。</h5></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;  </span><br><span class="line">  </span><br><span class="line">int main(int argc, const charchar * argv[])  </span><br><span class="line">&#123;  </span><br><span class="line">    CGPoint p = NSMakePoint(1, 2);  </span><br><span class="line">      </span><br><span class="line">    NSPoint p1 = CGPointMake(10, 20); //开发中最长用的  </span><br><span class="line">  </span><br><span class="line">    NSLog(@&quot;px = %f, py = %f&quot;, p.x, p.y);  </span><br><span class="line">  </span><br><span class="line">    NSLog(@&quot;p1x = %f, p1y = %f&quot;, p1.x, p1.y);  </span><br><span class="line">      </span><br><span class="line">    return 0;  </span><br><span class="line">&#125;  </span><br><span class="line">结果：2015-02-02 23:24:53.143 1.NSRange[12089:1003061] px = 1.000000, py = 2.000000  </span><br><span class="line">2015-02-02 23:24:53.144 1.NSRange[12089:1003061] p1x = 10.000000, p1y = 20.000000</span><br></pre></td></tr></table></figure>
<ul>
<li><h5 id="NSSize-表示宽高"><a href="#NSSize-表示宽高" class="headerlink" title="NSSize :表示宽高"></a>NSSize :表示宽高</h5>struct NSSize {<br>CGFloat width;<br>CGFloat height;<br>};  </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;  </span><br><span class="line"></span><br><span class="line">int main(int argc, const charchar * argv[])  </span><br><span class="line">&#123;  </span><br><span class="line">    NSSize size = &#123;10, 30&#125;;  </span><br><span class="line">      </span><br><span class="line">    CGSize size2 = NSMakeSize(100, 200);  </span><br><span class="line">      </span><br><span class="line">    NSSize s1 =  CGSizeMake(10, 30);  </span><br><span class="line">    NSSize s2 =  NSMakeSize(100, 200);  </span><br><span class="line">      </span><br><span class="line">    CGSize s3 = CGSizeMake(10, 30);  </span><br><span class="line">    CGSize s4 = NSMakeSize(100, 200);  </span><br><span class="line">      </span><br><span class="line">    return 0;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><h5 id="CGRect-用来表示一个矩形的位置和宽高"><a href="#CGRect-用来表示一个矩形的位置和宽高" class="headerlink" title="CGRect: 用来表示一个矩形的位置和宽高"></a>CGRect: 用来表示一个矩形的位置和宽高</h5></li>
</ul>
<p>struct CGRect {<br>  CGPoint origin;<br>  CGSize size;<br>};</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;  </span><br><span class="line">  </span><br><span class="line">int main(int argc, const charchar * argv[])  </span><br><span class="line">&#123;  </span><br><span class="line">CGRect r1 = CGRectMake(10, 10, 50, 50);      </span><br><span class="line">CGRect r2 = &#123;&#123;0, 0&#125;, &#123;100, 100&#125;&#125;;  </span><br><span class="line">CGRect r3 = &#123;CGPointMake(0, 0), CGSizeMake(100, 100)&#125;;  </span><br><span class="line">NSLog(@&quot;r1 = %@&quot;, NSStringFromRect(r1));  </span><br><span class="line">NSLog(@&quot;r2 = %@&quot;, NSStringFromRect(r2));  </span><br><span class="line">NSLog(@&quot;r3 = %@&quot;, NSStringFromRect(r3));  </span><br><span class="line">    return 0;  </span><br><span class="line">&#125; </span><br><span class="line">2015-02-03 14:07:11.299 1.NSRange[12356:1041957] r1 = &#123;&#123;10, 10&#125;, &#123;50, 50&#125;&#125;  </span><br><span class="line">2015-02-03 14:07:11.300 1.NSRange[12356:1041957] r2 = &#123;&#123;0, 0&#125;, &#123;100, 100&#125;&#125;  </span><br><span class="line">2015-02-03 14:07:11.300 1.NSRange[12356:1041957] r3 = &#123;&#123;0, 0&#125;, &#123;100, 100&#125;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="日期操作"><a href="#日期操作" class="headerlink" title="日期操作"></a>日期操作</h2><hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">NSDate *date1=[NSDate date];//获得当前日期</span><br><span class="line">NSLog(@&quot;%@&quot;,date1); //结果：2014-07-16 07:25:28 +0000</span><br><span class="line"></span><br><span class="line">NSDate *date2=[NSDate dateWithTimeIntervalSinceNow:100];//在当前日期的基础上加上100秒，注意在ObjC中多数时间单位都是秒</span><br><span class="line">NSLog(@&quot;%@&quot;,date2); //结果：2014-07-16 07:27:08 +0000</span><br><span class="line"></span><br><span class="line">NSDate *date3=[NSDate distantFuture];//随机获取一个将来的日期</span><br><span class="line">NSLog(@&quot;%@&quot;,date3); //结果：4001-01-01 00:00:00 +0000</span><br><span class="line"></span><br><span class="line">NSTimeInterval time=[date2 timeIntervalSinceDate:date1];//日期之差,返回单位为秒</span><br><span class="line">NSLog(@&quot;%f&quot;,time); //结果：100.008833</span><br><span class="line"></span><br><span class="line">NSDate *date5=[date1 earlierDate:date3];//返回比较早的日期</span><br><span class="line">NSLog(@&quot;%@&quot;,date5); //结果：2014-07-16 07:25:28 +0000</span><br><span class="line"></span><br><span class="line">//日期格式化</span><br><span class="line"></span><br><span class="line">将日期时间转化为字符串</span><br><span class="line">// 实例化NSDateFormatter</span><br><span class="line">NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</span><br><span class="line">// 设置日期格式</span><br><span class="line">[formatter setDateFormat:@&quot;yyyy-mm-dd HH:mm:ss&quot;];</span><br><span class="line">// 获取当前日期</span><br><span class="line">NSDate *currentDate = [NSDate date];</span><br><span class="line">NSString *currentDateString = [formatter stringFromDate:currentDate];</span><br><span class="line">NSLog(@&quot;%@&quot;, currentDateString);</span><br><span class="line"></span><br><span class="line">将时间字符串转换为日期</span><br><span class="line">NSDateFormatter *formatter = [[NSDateFormatter alloc] init];</span><br><span class="line">// 要转换的日期字符串</span><br><span class="line">NSString *dateString = @&quot;2011-05-03 23:11:40&quot;;</span><br><span class="line">// 设置为UTC时区</span><br><span class="line">// 这里如果不设置为UTC时区，会把要转换的时间字符串定为当前时区的时间（东八区）转换为UTC时区的时间</span><br><span class="line">NSTimeZone *timezone = [NSTimeZone timeZoneWithAbbreviation:@&quot;UTC&quot;];</span><br><span class="line">NSDate *someDay = [formatter dateFromString:dateString];</span><br><span class="line">    NSLog(@&quot;%@&quot;, someDay);</span><br></pre></td></tr></table></figure>
<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><hr>
<ul>
<li><h5 id="不可变字符串"><a href="#不可变字符串" class="headerlink" title="不可变字符串"></a>不可变字符串</h5></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"> NSString *str2=@&quot;OC string&quot;;//ObjC字符串需要加@，并且这种方式创建的对象不需要自己释放内存</span><br><span class="line"></span><br><span class="line">//下面的创建方法都应该释放内存</span><br><span class="line">NSString *str3=[[NSString alloc] init];</span><br><span class="line">str3=@&quot;OC string&quot;;</span><br><span class="line"></span><br><span class="line">NSString *str4=[[NSString alloc] initWithString:@&quot;Objective-C string&quot;];</span><br><span class="line"></span><br><span class="line">NSString *str5=[[NSString alloc] initWithFormat:@&quot;age is %i,name is %.2f&quot;,19,1.72f];</span><br><span class="line"></span><br><span class="line">NSString *str6=[[NSString alloc] initWithUTF8String:&quot;C string&quot;];//C语言的字符串转换为ObjC字符串</span><br><span class="line"></span><br><span class="line">//以上方法都有对应静态方法（一般以string开头）,不需要管理内存（系统静态方法一般都是自动释放）</span><br><span class="line">NSString *str7=[NSString stringWithString:@&quot;Objective-C string&quot;];</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;\&quot;Hello world!\&quot; to upper is %@&quot;,[@&quot;Hello world!&quot; uppercaseString]);</span><br><span class="line">//结果：&quot;Hello world!&quot; to upper is HELLO WORLD!</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;\&quot;Hello world!\&quot; to lowwer is %@&quot;,[@&quot;Hello world!&quot; lowercaseString]);</span><br><span class="line">//结果：&quot;Hello world!&quot; to lowwer is hello world!</span><br><span class="line"></span><br><span class="line">//首字母大写，其他字母小写</span><br><span class="line">NSLog(@&quot;\&quot;Hello world!\&quot; to capitalize is %@&quot;,[@&quot;Hello world!&quot; capitalizedString]);</span><br><span class="line">//结果：&quot;Hello world!&quot; to capitalize is Hello World!</span><br><span class="line"></span><br><span class="line">BOOL result= [@&quot;abc&quot; isEqualToString:@&quot;aBc&quot;];</span><br><span class="line">NSLog(@&quot;%i&quot;,result);</span><br><span class="line">//结果：0</span><br><span class="line"></span><br><span class="line">NSComparisonResult result2= [@&quot;abc&quot; compare:@&quot;aBc&quot;];//如果是[@&quot;abc&quot; caseInsensitiveCompare:@&quot;aBc&quot;]则忽略大小写比较</span><br><span class="line">    if(result2==NSOrderedAscending)&#123;</span><br><span class="line">        NSLog(@&quot;left&lt;right.&quot;);</span><br><span class="line">    &#125;else if(result2==NSOrderedDescending)&#123;</span><br><span class="line">        NSLog(@&quot;left&gt;right.&quot;);</span><br><span class="line">    &#125;else if(result2==NSOrderedSame)&#123;</span><br><span class="line">        NSLog(@&quot;left=right.&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">//结果：left&gt;right.</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;has prefix ab? %i&quot;,[@&quot;abcdef&quot; hasPrefix:@&quot;ab&quot;]);</span><br><span class="line">//结果：has prefix ab? 1</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;has suffix ab? %i&quot;,[@&quot;abcdef&quot; hasSuffix:@&quot;ef&quot;]);</span><br><span class="line">//结果：has suffix ab? 1</span><br><span class="line"></span><br><span class="line">NSRange range=[@&quot;abcdefabcdef&quot; rangeOfString:@&quot;cde&quot;];//注意如果遇到cde则不再往后面搜索,如果从后面搜索或其他搜索方式可以设置第二个options参数</span><br><span class="line">if(range.location==NSNotFound)&#123;</span><br><span class="line">NSLog(@&quot;not found.&quot;);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">NSLog(@&quot;range is %@&quot;,NSStringFromRange(range));</span><br><span class="line">&#125;</span><br><span class="line">//结果：range is &#123;2, 3&#125;</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;%@&quot;,[@&quot;abcdef&quot; substringFromIndex:3]);//从第三个索引开始（包括第三个索引对应的字符）截取到最后一位</span><br><span class="line">//结果：def</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;%@&quot;,[@&quot;abcdef&quot; substringToIndex:3]);////从0开始截取到第三个索引（不包括第三个索引对应的字符）</span><br><span class="line">//结果：abc</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;%@&quot;,[@&quot;abcdef&quot; substringWithRange:NSMakeRange(2, 3)]);</span><br><span class="line">//结果：cde</span><br><span class="line"></span><br><span class="line">NSString *str1=@&quot;12.abcd.3a&quot;;</span><br><span class="line">NSArray *array1=[str1 componentsSeparatedByString:@&quot;.&quot;];//字符串分割</span><br><span class="line">NSLog(@&quot;%@&quot;,array1);</span><br><span class="line">/*结果：</span><br><span class="line">(</span><br><span class="line">12,</span><br><span class="line">abcd,</span><br><span class="line">3a</span><br><span class="line">)</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;%i&quot;,[@&quot;12&quot; intValue]);//类型转换</span><br><span class="line">//结果：12</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;%zi&quot;,[@&quot;hello world,世界你好！&quot; length]);//字符串长度注意不是字节数</span><br><span class="line">//结果：17</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;%c&quot;,[@&quot;abc&quot; characterAtIndex:0]);//取出制定位置的字符</span><br><span class="line">//结果：a</span><br><span class="line"></span><br><span class="line">const char *s=[@&quot;abc&quot; UTF8String];//转换为C语言字符串</span><br><span class="line">NSLog(@&quot;%s&quot;,s);</span><br><span class="line">//结果：abc</span><br><span class="line"></span><br><span class="line">一些项目中的应用：</span><br><span class="line"></span><br><span class="line">//去掉最后一个字符</span><br><span class="line">NSString * newString = [originString substringWithRange:NSMakeRange(0, [originString length] - 1)];</span><br><span class="line"></span><br><span class="line">//拼接字符串</span><br><span class="line">NSString </span><br><span class="line">NSString* string; // 结果字符串</span><br><span class="line">NSString* string1, string2; //已存在的字符串，需要将string1和string2连接起来</span><br><span class="line">方法1</span><br><span class="line">string = [NSString initWithFormat:@&quot;%@,%@&quot;, string1, string2 ];</span><br><span class="line">方法2</span><br><span class="line">string = [string1 stringByAppendingString:string2];</span><br><span class="line">方法3</span><br><span class="line">string = [string stringByAppendingFormat:@&quot;%@,%@&quot;,string1, string2];</span><br><span class="line">方法4：</span><br><span class="line">NSString *test =  [NSString stringWithFormat:@&quot;设备名称：%@ \n系统版本号：%@\n设备模式：%@\n手机型号: %@\nApp应用名称：%@\nApp应用版本：%@\n&quot;,strName,strSysVersion,strModel,phoneModel,strAppName,strAppVersion];</span><br><span class="line"></span><br><span class="line">//for循环添加字符串</span><br><span class="line"> for (NSString *str in rolePick)&#123;</span><br><span class="line">  string = [string stringByAppendingFormat:@&quot;%@,&quot;,str];</span><br><span class="line"> &#125; </span><br><span class="line"> </span><br><span class="line"> //截取字符串</span><br><span class="line"> NSString *str = @&quot;hello:world&quot;;  </span><br><span class="line">NSRange range = [str rangeOfString:@&quot;:&quot;];  </span><br><span class="line">str = [str substringFromIndex:NSMaxRange(range)];  </span><br><span class="line">其中range这个东东有两个属性：length、location</span><br><span class="line">length表示用来做range的字符串的长度，在此就是&quot;:&quot;的长度 ＝ 1；</span><br><span class="line">location表示首个出现该匹配字符串的下标</span><br><span class="line"></span><br><span class="line">//判断字符串是否为空</span><br><span class="line">- (BOOL) isBlankString:(NSString *)string &#123;</span><br><span class="line">    if (string == nil || string == NULL)</span><br><span class="line">    &#123;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    if ([string isKindOfClass:[NSNull class]])</span><br><span class="line">    &#123;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    if ([[string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] length]==0)</span><br><span class="line">    &#123;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    return NO;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//分割字符串为数组</span><br><span class="line">NSArray *array = [string componentsSeparatedByString:@&quot;,&quot;]; // 通过逗号分隔字符串转化为数组</span><br><span class="line"></span><br><span class="line">//计算某个字符在字符串中的个数</span><br><span class="line">-(int) numberOfCharaterInString:(NSString *)stringToCount characterToCount:(NSString *) character&#123;</span><br><span class="line">    int numberPoint = 0;</span><br><span class="line">    for (int i = 0; i&lt;stringToCount.length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        NSString * temp = [stringToCount substringWithRange:NSMakeRange(i, 1)];</span><br><span class="line">        if ([temp isEqualToString:character])</span><br><span class="line">        &#123;</span><br><span class="line">            numberPoint ++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return  numberPoint;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//声明一个NSString属性使用copy要优于使用strong。</span><br><span class="line"></span><br><span class="line">//Nsstring 转 Nsnumber</span><br><span class="line"> NSNumberFormatter *f = [[NSNumberFormatter alloc] init];</span><br><span class="line">    if ([f numberFromString:ss])</span><br><span class="line">    &#123;</span><br><span class="line">        result=[NSNumber numberWithFloat:[ss floatValue]];</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        result=ss;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//字符串与int互转</span><br><span class="line">int intString = [newString intValue];   </span><br><span class="line">NSString *stringInt = [NSString stringWithFormat:@&quot;%d&quot;,intString];</span><br><span class="line"></span><br><span class="line">//字符串与float互转</span><br><span class="line">float floatString = [ newString floatValue];NSString *stringFloat = [NSString stringWithFormat:@&quot;%f&quot;,intString];</span><br><span class="line"></span><br><span class="line">//与NSData的转化</span><br><span class="line">NSData *string2data = [string dataUsingEncoding:NSUTF8StringEncoding];    NSLog(@&quot;%@&quot;,string2data);//    NSData to NSString    NSString *data2String = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];    NSLog(@&quot;dataString = %@&quot;,data2String);</span><br><span class="line"></span><br><span class="line">//与NSDate的转化</span><br><span class="line">NSString to NSDate    NSDate *string2date = [self convertDateFromString:dateString withFormattre:@&quot;yyyyMMdd&quot;];    NSLog(@&quot;date = %@&quot;,string2date);</span><br><span class="line">//NSDate to NSString    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];    [dateFormatter setDateFormat:@&quot;yyyy-MM-dd HH:mm:ss&quot;];    NSString *date2string = [dateFormatter stringFromDate:[NSDate date]];    NSLog(@&quot;%@&quot;, date2string);</span><br><span class="line">// NSString to NSArray    NSArray *string2Arry = [arry2String componentsSeparatedByString:@&quot; &quot;];    NSLog(@&quot; %@&quot;,string2Arry);</span><br><span class="line"></span><br><span class="line">//NSString to NSDictionary</span><br><span class="line">  NSError *error = nil;  NSDictionary *string2dic = [NSJSONSerialization JSONObjectWithData: [dic2string dataUsingEncoding:NSUTF8StringEncoding]                                    options: NSJSONReadingMutableContainers                                      error: &amp;error];    NSLog(@&quot;%@&quot;,string2dic);</span><br></pre></td></tr></table></figure>
<ul>
<li><h5 id="可变字符串"><a href="#可变字符串" class="headerlink" title="可变字符串"></a>可变字符串</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">/*可变字符串，注意NSMutableString是NSString子类*/</span><br><span class="line">//注意虽然initWithCapacity分配字符串大小，但是不是绝对的不可以超过此范围，声明此变量对性能有好处</span><br><span class="line"></span><br><span class="line">//设置字符串</span><br><span class="line">NSMutableString *str1= [[NSMutableString alloc] initWithCapacity:10];</span><br><span class="line">[str1 setString:@&quot;hello&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,str1);</span><br><span class="line">//结果：hello</span><br><span class="line"></span><br><span class="line">//追加字符串</span><br><span class="line">[str1 appendString:@&quot;,world!&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,str1);</span><br><span class="line">//结果：hello,world!</span><br><span class="line"></span><br><span class="line">[str1 appendFormat:@&quot;我的年龄是%i。dear,I love you.&quot;,18];</span><br><span class="line">NSLog(@&quot;%@&quot;,str1);</span><br><span class="line">//结果：hello,world!我的年龄是18。dear,I love you.</span><br><span class="line"></span><br><span class="line">//替换字符串</span><br><span class="line">NSRange range=[str1 rangeOfString:@&quot;dear&quot;];</span><br><span class="line">[str1 replaceCharactersInRange:range withString:@&quot;Honey&quot;];</span><br><span class="line">NSLog(@&quot;%@&quot;,str1);</span><br><span class="line">//结果：hello,world!我的年龄是18。Honey,I love you.</span><br><span class="line"></span><br><span class="line">//插入字符串</span><br><span class="line">[str1 insertString:@&quot;My name is Kenshin.&quot; atIndex:12];</span><br><span class="line">NSLog(@&quot;%@&quot;,str1);</span><br><span class="line">//结果：hello,world!My name is Kenshin.我的年龄是18。Honey,I love you.</span><br><span class="line"></span><br><span class="line">//删除指定字符串</span><br><span class="line">[str1 deleteCharactersInRange:[str1 rangeOfString:@&quot;My name is Kenshin.&quot;]];//删除指定范围的字符串</span><br><span class="line">NSLog(@&quot;%@&quot;,str1);</span><br><span class="line">//结果：hello,world!我的年龄是18。Honey,I love you.</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">在ObjC中路径、文件读写等操作是利用字符串来完成的，这里通过几个简单的例子来演示（首先在桌面上新建一个test.txt文件，里面存储的内容是”hello world,世界你好！”）</span><br><span class="line"></span><br><span class="line">void test1()&#123;</span><br><span class="line">//读取文件内容</span><br><span class="line">NSString *path=@&quot;/Users/kenshincui/Desktop/test.txt&quot;;</span><br><span class="line">NSString *str1=[NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];</span><br><span class="line">//注意上面也可以使用gb2312 gbk等,例如kCFStringEncodingGB_18030_2000，但是需要用CFStringConvertEncodingToNSStringEncoding转换</span><br><span class="line">NSLog(@&quot;str1 is %@&quot;,str1);</span><br><span class="line">//结果：str1 is hello world,世界你好！</span><br><span class="line"></span><br><span class="line">//上面我们看到了读取文件，但并没有处理错误,当然在ObjC中可以@try @catch @finnally但通常我们并不那么做</span><br><span class="line">//由于我们的test.txt中有中文，所以使用下面的编码读取会报错，下面的代码演示了错误获取的过程</span><br><span class="line">NSError *error;</span><br><span class="line">NSString *str2=[NSString stringWithContentsOfFile:path encoding:kCFStringEncodingGB_18030_2000 error:&amp;error];//注意这句话中的error变量是**error，就是指针的指针那就是指针的地址，由于error就是一个指针此处也就是error的地址&amp;error，具体原因见下面补充</span><br><span class="line">    if(error)&#123;</span><br><span class="line">        NSLog(@&quot;read error ,the error is %@&quot;,error);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        NSLog(@&quot;read success,the file content is %@&quot;,str2);</span><br><span class="line">    &#125;</span><br><span class="line">//结果：read error ,the error is Error </span><br><span class="line"></span><br><span class="line">Domain=NSCocoaErrorDomain Code=261 &quot;The file couldn’t be opened using the specified text encoding.&quot; UserInfo=0x100109620 &#123;NSFilePath=/Users/kenshincui/Desktop/test.txt, NSStringEncoding=1586&#125;</span><br><span class="line"></span><br><span class="line">//读取文件内容还有一种方式就是利用URl，它除了可以读取本地文件还可以读取网络文件</span><br><span class="line">//NSURL *url=[NSURL URLWithString:@&quot;file:///Users/kenshincui/Desktop/test.txt&quot;];</span><br><span class="line">NSURL *url=[NSURL URLWithString:@&quot;http://www.apple.com&quot;];</span><br><span class="line">NSString *str3=[NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];</span><br><span class="line">NSLog(@&quot;str3 is %@&quot;,str3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void test2()&#123;</span><br><span class="line">//下面是文件写入</span><br><span class="line">NSString *path1=@&quot;/Users/kenshincui/Desktop/test2.txt&quot;;</span><br><span class="line">NSError *error1;</span><br><span class="line">NSString *str11=@&quot;hello world,世界你好！&quot;;</span><br><span class="line">[str11 writeToFile:path1 atomically:YES encoding:NSUTF8StringEncoding error:&amp;error1];//automically代表一次性写入，如果写到中间出错了最后就全部不写入</span><br><span class="line">if(error1)&#123;</span><br><span class="line">NSLog(@&quot;write fail,the error is %@&quot;,[error1 localizedDescription]);//调用localizedDescription是只打印关键错误信息</span><br><span class="line">&#125;else&#123;</span><br><span class="line">NSLog(@&quot;write success!&quot;);</span><br><span class="line">&#125;</span><br><span class="line">//结果：write success!</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//路径操作</span><br><span class="line">void test3()&#123;</span><br><span class="line">NSMutableArray *marray=[NSMutableArray array];//可变数组</span><br><span class="line">[marray addObject:@&quot;Users&quot;];</span><br><span class="line">[marray addObject:@&quot;KenshinCui&quot;];</span><br><span class="line">[marray addObject:@&quot;Desktop&quot;];</span><br><span class="line">NSString *path=[NSString pathWithComponents:marray];</span><br><span class="line">NSLog(@&quot;%@&quot;,path);//字符串拼接成路径</span><br><span class="line">//结果：Users/KenshinCui/Desktop</span><br><span class="line">NSLog(@&quot;%@&quot;,[path pathComponents]);//路径分割成数组</span><br><span class="line">/*结果： </span><br><span class="line">(</span><br><span class="line">        Users,</span><br><span class="line">        KenshinCui,</span><br><span class="line">        Desktop</span><br><span class="line">)</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;%i&quot;,[path isAbsolutePath]);//是否绝对路径（其实就是看字符串是否以“/”开头）</span><br><span class="line">//结果：0</span><br><span class="line">NSLog(@&quot;%@&quot;,[path lastPathComponent]);//取得最后一个目录</span><br><span class="line">//结果：Desktop</span><br><span class="line">NSLog(@&quot;%@&quot;,[path stringByDeletingLastPathComponent]);//删除最后一个目录，注意path本身是常量不会被修改,只是返回一个新字符串</span><br><span class="line">//结果：Users/KenshinCui</span><br><span class="line">NSLog(@&quot;%@&quot;,[path stringByAppendingPathComponent:@&quot;Documents&quot;]);//路径拼接</span><br><span class="line">//结果：Users/KenshinCui/Desktop/Documents</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//扩展名操作</span><br><span class="line">void test4()&#123;</span><br><span class="line">NSString *path=@&quot;Users/KenshinCui/Desktop/test.txt&quot;;</span><br><span class="line">NSLog(@&quot;%@&quot;,[path pathExtension]);//取得扩展名，注意ObjC中扩展名不包括&quot;.&quot;</span><br><span class="line">//结果：txt</span><br><span class="line">NSLog(@&quot;%@&quot;,[path stringByDeletingPathExtension]);//删除扩展名，注意包含&quot;.&quot;</span><br><span class="line">//结果：Users/KenshinCui/Desktop/test</span><br><span class="line">NSLog(@&quot;%@&quot;,[@&quot;Users/KenshinCui/Desktop/test&quot; stringByAppendingPathExtension:@&quot;mp3&quot;]);//添加扩展名</span><br><span class="line">//结果：Users/KenshinCui/Desktop/test.mp3</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><ul>
<li><h5 id="不可变数组"><a href="#不可变数组" class="headerlink" title="不可变数组"></a>不可变数组</h5></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line">void test1()&#123;</span><br><span class="line">//NSArray长度不可变所以初始化的时候就赋值，并且最后以nil结尾</span><br><span class="line">//此外需要注意NSArray不能存放C语言的基础类型</span><br><span class="line">NSObject *obj=[[NSObject alloc]init];</span><br><span class="line"></span><br><span class="line">NSArray *array1=[[NSArray alloc] initWithObjects:@&quot;abc&quot;,obj,@&quot;cde&quot;,@&quot;opq&quot;, nil];</span><br><span class="line"></span><br><span class="line">//推荐简便的声明方式</span><br><span class="line">NSArray *array1=@[@&quot;Mac Pro&quot;, @&quot;Mac mini&quot;, @&quot;iMac&quot;, @&quot;MacBook&quot;, @&quot;MacBook Pro&quot;, @&quot;MacBook Air&quot;];</span><br><span class="line"></span><br><span class="line">NSArray *array1=[NSArray arrayWithObjects:@&quot;abc&quot;,obj,@&quot;cde&quot;,@&quot;opq&quot;,@25, nil];</span><br><span class="line"></span><br><span class="line">NSLog(@&quot;%zi&quot;,array1.count);//数组长度,结果：5</span><br><span class="line">NSLog(@&quot;%i&quot;,[array1 containsObject:@&quot;cde&quot;]);//是否包含某个对象，结果：1</span><br><span class="line">NSLog(@&quot;%@&quot;,[array1 lastObject]);//最后一个对象，结果：25</span><br><span class="line">NSLog(@&quot;%zi&quot;,[array1 indexOfObject:@&quot;abc&quot;]);//对象所在的位置：0</span><br><span class="line">    </span><br><span class="line">    Person *person1=[Person personWithName:@&quot;Kenshin&quot;];</span><br><span class="line">    Person *person2=[Person personWithName:@&quot;Kaoru&quot;];</span><br><span class="line">    Person *person3=[Person personWithName:@&quot;Rosa&quot;];</span><br><span class="line">    NSArray *array2=[[NSArray alloc]initWithObjects:person1,person2,person3, nil];</span><br><span class="line">    [array2 makeObjectsPerformSelector:@selector(showMessage:) withObject:@&quot;Hello,world!&quot;];//执行所有元素的showMessage方法,后面的参数最多只能有一个</span><br><span class="line">    /*结果：</span><br><span class="line">     My name is Kenshin,the infomation is &quot;Hello,world!&quot;.</span><br><span class="line">     My name is Kaoru,the infomation is &quot;Hello,world!&quot;.</span><br><span class="line">     My name is Rosa,the infomation is &quot;Hello,world!&quot;.</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//数组的遍历</span><br><span class="line">void test2()&#123;</span><br><span class="line">    NSObject *obj=[[NSObject alloc]init];</span><br><span class="line">    NSArray *array=[[NSArray alloc] initWithObjects:@&quot;abc&quot;,obj,@&quot;cde&quot;,@&quot;opq&quot;,@25, nil];</span><br><span class="line">    //方法1</span><br><span class="line">    for(int i=0,len=array.count;i&lt;len;++i)&#123;</span><br><span class="line">        NSLog(@&quot;method1:index %i is %@&quot;,i,[array objectAtIndex:i]);</span><br><span class="line">    &#125;</span><br><span class="line">    /*结果：</span><br><span class="line">     method1:index 0 is abc</span><br><span class="line">     method1:index 1 is &lt;NSObject: 0x100106de0&gt;</span><br><span class="line">     method1:index 2 is cde</span><br><span class="line">     method1:index 3 is opq</span><br><span class="line">     method1:index 4 is 25</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    //方法2</span><br><span class="line">    for(id obj in array)&#123;</span><br><span class="line">        NSLog(@&quot;method2:index %zi is %@&quot;,[array indexOfObject:obj],obj);</span><br><span class="line">    &#125;</span><br><span class="line">    /*结果：</span><br><span class="line">     method2:index 0 is abc</span><br><span class="line">     method2:index 1 is &lt;NSObject: 0x100602f00&gt;</span><br><span class="line">     method2:index 2 is cde</span><br><span class="line">     method2:index 3 is opq</span><br><span class="line">     method2:index 4 is 25</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    //方法3,利用代码块方法</span><br><span class="line">    [array enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) &#123;</span><br><span class="line">        NSLog(@&quot;method3:index %zi is %@&quot;,idx,obj);</span><br><span class="line">        if(idx==2)&#123;//当idx=2时设置*stop为YES停止遍历</span><br><span class="line">            *stop=YES;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    /*结果：</span><br><span class="line">     method3:index 0 is abc</span><br><span class="line">     method3:index 1 is &lt;NSObject: 0x100106de0&gt;</span><br><span class="line">     method3:index 2 is cde</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    //方法4，利用迭代器</span><br><span class="line">    //NSEnumerator *enumerator= [array objectEnumerator];//获得一个迭代器</span><br><span class="line">    NSEnumerator *enumerator=[array reverseObjectEnumerator];//获取一个反向迭代器</span><br><span class="line">    //NSLog(@&quot;all:%@&quot;,[enumerator allObjects]);//获取所有迭代对象，注意调用完此方法迭代器就遍历完了，下面的nextObject就没有值了</span><br><span class="line">    id obj2=nil;</span><br><span class="line">    while (obj2=[enumerator nextObject]) &#123;</span><br><span class="line">        NSLog(@&quot;method4:%@&quot;,obj2);</span><br><span class="line">    &#125;</span><br><span class="line">    /*结果：</span><br><span class="line">     method4:25</span><br><span class="line">     method4:opq</span><br><span class="line">     method4:cde</span><br><span class="line">     method4:&lt;NSObject: 0x100106de0&gt;</span><br><span class="line">     method4:abc</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//数组派生出新的数组</span><br><span class="line">void test3()&#123;</span><br><span class="line">    NSArray *array=[NSArray arrayWithObjects:@&quot;1&quot;,@&quot;2&quot;,@&quot;3&quot;, nil];</span><br><span class="line">    NSArray *array2=[array arrayByAddingObject:@&quot;4&quot;];//注意此时array并没有变</span><br><span class="line">    NSLog(@&quot;%@&quot;,array2);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3,</span><br><span class="line">         4</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;%@&quot;,[array2 arrayByAddingObjectsFromArray:[NSArray arrayWithObjects:@&quot;5&quot;,@&quot;6&quot;, nil]]);//追加形成新的数组</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3,</span><br><span class="line">         4,</span><br><span class="line">         5,</span><br><span class="line">         6</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;%@&quot;,[array2 subarrayWithRange:NSMakeRange(1, 3)]);//根据一定范围取得生成一个新的数组</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         2,</span><br><span class="line">         3,</span><br><span class="line">         4</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;%@&quot;,[array componentsJoinedByString:@&quot;,&quot;]);//数组连接，形成一个字符串</span><br><span class="line">    //结果：1,2,3</span><br><span class="line">    </span><br><span class="line">    //读写文件</span><br><span class="line">    NSString *path=@&quot;/Users/KenshinCui/Desktop/array.xml&quot;;</span><br><span class="line">    [array writeToFile:path atomically:YES];</span><br><span class="line">    NSArray *array3=[NSArray arrayWithContentsOfFile:path];</span><br><span class="line">    NSLog(@&quot;%@&quot;,array3);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//数组排序</span><br><span class="line">void test4()&#123;</span><br><span class="line">    //方法1,使用自带的比较器</span><br><span class="line">    NSArray *array=[NSArray arrayWithObjects:@&quot;3&quot;,@&quot;1&quot;,@&quot;2&quot;, nil];</span><br><span class="line">    NSArray *array2= [array sortedArrayUsingSelector:@selector(compare:)];</span><br><span class="line">    NSLog(@&quot;%@&quot;,array2);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    //方法2,自己定义比较器</span><br><span class="line">    Person *person1=[Person personWithName:@&quot;Kenshin&quot;];</span><br><span class="line">    Person *person2=[Person personWithName:@&quot;Kaoru&quot;];</span><br><span class="line">    Person *person3=[Person personWithName:@&quot;Rosa&quot;];</span><br><span class="line">    NSArray *array3=[NSArray arrayWithObjects:person1,person2,person3, nil];</span><br><span class="line">    NSArray *array4=[array3 sortedArrayUsingSelector:@selector(comparePerson:)];</span><br><span class="line">    NSLog(@&quot;%@&quot;,array4);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         &quot;name=Kaoru&quot;,</span><br><span class="line">         &quot;name=Kenshin&quot;,</span><br><span class="line">         &quot;name=Rosa&quot;</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    //方法3使用代码块</span><br><span class="line">    NSArray *array5=[array3 sortedArrayUsingComparator:^NSComparisonResult(Person *obj1, Person *obj2) &#123;</span><br><span class="line">        return [obj2.name compare:obj1.name];//降序</span><br><span class="line">    &#125;];</span><br><span class="line">    NSLog(@&quot;%@&quot;,array5);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         &quot;name=Rosa&quot;,</span><br><span class="line">         &quot;name=Kenshin&quot;,</span><br><span class="line">         &quot;name=Kaoru&quot;</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    //方法4 通过描述器定义排序规则</span><br><span class="line">    Person *person4=[Person personWithName:@&quot;Jack&quot;];</span><br><span class="line">    Person *person5=[Person personWithName:@&quot;Jerry&quot;];</span><br><span class="line">    Person *person6=[Person personWithName:@&quot;Tom&quot;];</span><br><span class="line">    Person *person7=[Person personWithName:@&quot;Terry&quot;];</span><br><span class="line">    NSArray *array6=[NSArray arrayWithObjects:person4,person5,person6,person7, nil];</span><br><span class="line">    //定义一个排序描述</span><br><span class="line">    NSSortDescriptor *personName=[NSSortDescriptor sortDescriptorWithKey:@&quot;name&quot; ascending:YES];</span><br><span class="line">    NSSortDescriptor *accountBalance=[NSSortDescriptor sortDescriptorWithKey:@&quot;account.balance&quot; ascending:YES];</span><br><span class="line">    NSArray *des=[NSArray arrayWithObjects:personName,accountBalance, nil];//先按照person的name排序再按照account的balance排序</span><br><span class="line">    NSArray *array7=[array6 sortedArrayUsingDescriptors:des];</span><br><span class="line">    NSLog(@&quot;%@&quot;,array7);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         &quot;name=Jack&quot;,</span><br><span class="line">         &quot;name=Jerry&quot;,</span><br><span class="line">         &quot;name=Terry&quot;,</span><br><span class="line">         &quot;name=Tom&quot;</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">     </span><br><span class="line">     //与可变数组的转化</span><br><span class="line">     </span><br><span class="line">NSArray --&gt; NSMutableArray: </span><br><span class="line">NSMutableArray *myMutableArray = [myArray mutableCopy];    </span><br><span class="line">NSMutableArray --&gt; NSArray:</span><br><span class="line">NSArray *myArray = [myMutableArray copy]; </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">需要注意几点：</span><br><span class="line"></span><br><span class="line">NSArray中只能存放对象，不能存放基本数据类型，通常我们可以通过在基本数据类型前加@进行转换；</span><br><span class="line"></span><br><span class="line">数组中的元素后面必须加nil以表示数据结束；</span><br><span class="line"></span><br><span class="line">makeObjectsPerformSelector执行数组中对象的方法，其参数最多只能有一个；</span><br><span class="line"></span><br><span class="line">上面数组操作中无论是数组的追加、删除、截取都没有改变原来的数组，只是产生了新的数组而已；</span><br><span class="line"></span><br><span class="line">对象的比较除了使用系统自带的方法，我们可以通过自定义比较器的方法来实现；</span><br></pre></td></tr></table></figure>
<ul>
<li><h5 id="可变数组"><a href="#可变数组" class="headerlink" title="可变数组"></a>可变数组</h5></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">void test1()&#123;</span><br><span class="line">    Person *person1=[Person personWithName:@&quot;Kenshin&quot;];</span><br><span class="line">    Person *person2=[Person personWithName:@&quot;Kaoru&quot;];</span><br><span class="line">    Person *person3=[Person personWithName:@&quot;Rosa&quot;];</span><br><span class="line">    NSMutableArray *array1=[NSMutableArray arrayWithObjects:person1,person2,person3, nil];</span><br><span class="line">    NSLog(@&quot;%@&quot;,array1);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         &quot;name=Kenshin&quot;,</span><br><span class="line">         &quot;name=Kaoru&quot;,</span><br><span class="line">         &quot;name=Rosa&quot;</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    Person *person4=[Person personWithName:@&quot;Jack&quot;];//此时person4的retainCount为1</span><br><span class="line">    [array1 addObject:person4];//添加一个元素,此时person4的retainCount为2</span><br><span class="line">    NSLog(@&quot;%@&quot;,array1);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         &quot;name=Kenshin&quot;,</span><br><span class="line">         &quot;name=Kaoru&quot;,</span><br><span class="line">         &quot;name=Rosa&quot;,</span><br><span class="line">         &quot;name=Jack&quot;</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    [array1 removeObject:person3];//删除一个元素</span><br><span class="line">    NSLog(@&quot;%@&quot;,array1);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         &quot;name=Kenshin&quot;,</span><br><span class="line">         &quot;name=Kaoru&quot;,</span><br><span class="line">         &quot;name=Jack&quot;</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    [array1 removeLastObject];//删除最后一个元素,//此时person4的retainCount为1</span><br><span class="line">    NSLog(@&quot;%@&quot;,array1);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         &quot;name=Kenshin&quot;,</span><br><span class="line">         &quot;name=Kaoru&quot;</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    [array1 removeAllObjects];//删除所以元素</span><br><span class="line">    </span><br><span class="line">    //注意当往数组中添加一个元素时会retain因此计数器+1，当从数组中移除一个元素时会release因此计数器-1</span><br><span class="line">    //当NSMutalbeArray对象release的时候会依次调用每一个对象的release</span><br><span class="line">&#125;</span><br><span class="line">void test2()&#123;</span><br><span class="line">    NSMutableArray *array1=[NSMutableArray arrayWithObjects:@&quot;1&quot;,@&quot;3&quot;,@&quot;2&quot;, nil];</span><br><span class="line">    NSLog(@&quot;%@&quot;,array1);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         3,</span><br><span class="line">         2</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    NSArray *array2= [array1 sortedArrayUsingSelector:@selector(compare:)];//注意这个方法没有修改array1</span><br><span class="line">    NSLog(@&quot;%@&quot;,array1);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         3,</span><br><span class="line">         2</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;%@&quot;,array2);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    [array1 sortUsingSelector:@selector(compare:)];//这个方法会修改array1</span><br><span class="line">    NSLog(@&quot;%@&quot;,array1);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">注意：</span><br><span class="line">可变数组中的元素后面必须加nil以表示数据结束；</span><br><span class="line"></span><br><span class="line">往一个可变数组中添加一个对象，此时这个对象的引用计数器会加1，当这个对象从可变数组中移除其引用计数器减1。同时当整个数组销毁之后会依次调</span><br><span class="line">用每个对象的releaes方法。</span><br><span class="line"></span><br><span class="line">在不可变数组中无论对数组怎么排序，原来的数组顺序都不会改变，但是在可变数组中如果使用sortUsingSelector:排序原来的数组顺序就发生了变化。</span><br></pre></td></tr></table></figure>
<ul>
<li><h5 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h5></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">void test1()&#123;</span><br><span class="line">    NSDictionary *dic1=[NSDictionary dictionaryWithObject:@&quot;1&quot; forKey:@&quot;a&quot;];</span><br><span class="line">    NSLog(@&quot;%@&quot;,dic1);</span><br><span class="line">    /*结果：</span><br><span class="line">     &#123;</span><br><span class="line">        a = 1;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    //常用的方式</span><br><span class="line">    NSDictionary *dic2=[NSDictionary dictionaryWithObjectsAndKeys:</span><br><span class="line">                        @&quot;1&quot;,@&quot;a&quot;,</span><br><span class="line">                        @&quot;2&quot;,@&quot;b&quot;,</span><br><span class="line">                        @&quot;3&quot;,@&quot;c&quot;,</span><br><span class="line">                        nil];</span><br><span class="line">    NSLog(@&quot;%@&quot;,dic2);</span><br><span class="line">    /*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         a = 1;</span><br><span class="line">         b = 2;</span><br><span class="line">         c = 3;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    NSDictionary *dic3=[NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@&quot;1&quot;,@&quot;2&quot;, nil] forKeys:[NSArray arrayWithObjects:@&quot;a&quot;,@&quot;b&quot;, nil]];</span><br><span class="line">    NSLog(@&quot;%@&quot;,dic3);</span><br><span class="line">    /*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         a = 1;</span><br><span class="line">         b = 2;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    //更简单的方式</span><br><span class="line">    NSDictionary *dic4=@&#123;@&quot;1&quot;:@&quot;a&quot;,@&quot;2&quot;:@&quot;b&quot;,@&quot;3&quot;:@&quot;c&quot;&#125;;</span><br><span class="line">    NSLog(@&quot;%@&quot;,dic4);</span><br><span class="line">    /*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         1 = a;</span><br><span class="line">         2 = b;</span><br><span class="line">         3 = c;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br><span class="line">void test2()&#123;</span><br><span class="line">    NSDictionary *dic1=[NSDictionary dictionaryWithObjectsAndKeys:</span><br><span class="line">                        @&quot;1&quot;,@&quot;a&quot;,</span><br><span class="line">                        @&quot;2&quot;,@&quot;b&quot;,</span><br><span class="line">                        @&quot;3&quot;,@&quot;c&quot;,</span><br><span class="line">                        @&quot;2&quot;,@&quot;d&quot;,</span><br><span class="line">                        nil];</span><br><span class="line">    NSLog(@&quot;%zi&quot;,[dic1 count]); //结果：4</span><br><span class="line">    NSLog(@&quot;%@&quot;,[dic1 valueForKey:@&quot;b&quot;]);//根据键取得值，结果：2</span><br><span class="line">    NSLog(@&quot;%@&quot;,dic1[@&quot;b&quot;]);//还可以这样读取，结果：2</span><br><span class="line">    NSLog(@&quot;%@,%@&quot;,[dic1 allKeys],[dic1 allValues]);</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         d,</span><br><span class="line">         b,</span><br><span class="line">         c,</span><br><span class="line">         a</span><br><span class="line">     ),(</span><br><span class="line">         2,</span><br><span class="line">         2,</span><br><span class="line">         3,</span><br><span class="line">         1</span><br><span class="line">     )</span><br><span class="line"></span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    NSLog(@&quot;%@&quot;,[dic1 objectsForKeys:[NSArray arrayWithObjects:@&quot;a&quot;,@&quot;e&quot; , nil]notFoundMarker:@&quot;not fount&quot;]);//后面一个参数notFoundMarker是如果找不到对应的key用什么值代替</span><br><span class="line">    /*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         &quot;not fount&quot;</span><br><span class="line">     )</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br><span class="line">void test3()&#123;</span><br><span class="line">    NSDictionary *dic1=[NSDictionary dictionaryWithObjectsAndKeys:</span><br><span class="line">                        @&quot;1&quot;,@&quot;a&quot;,</span><br><span class="line">                        @&quot;2&quot;,@&quot;b&quot;,</span><br><span class="line">                        @&quot;3&quot;,@&quot;c&quot;,</span><br><span class="line">                        @&quot;2&quot;,@&quot;d&quot;,</span><br><span class="line">                        nil];</span><br><span class="line">    //遍历1</span><br><span class="line">    for (id key in dic1) &#123;//注意对于字典for遍历循环的是key</span><br><span class="line">        NSLog(@&quot;%@=%@&quot;,key,[dic1 objectForKey:key]);</span><br><span class="line">    &#125;</span><br><span class="line">    /*结果：</span><br><span class="line">     d=2</span><br><span class="line">     b=2</span><br><span class="line">     c=3</span><br><span class="line">     a=1</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    //遍历2</span><br><span class="line">    NSEnumerator *enumerator=[dic1 keyEnumerator];//还有值的迭代器[dic1 objectEnumerator]</span><br><span class="line">    id key=nil;</span><br><span class="line">    while (key=[enumerator nextObject]) &#123;</span><br><span class="line">        NSLog(@&quot;%@=%@&quot;,key,[dic1 objectForKey:key]);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    /*结果：</span><br><span class="line">     d=2</span><br><span class="line">     b=2</span><br><span class="line">     c=3</span><br><span class="line">     a=1</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    //遍历3</span><br><span class="line">    [dic1 enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop) &#123;</span><br><span class="line">        NSLog(@&quot;%@=%@&quot;,key,obj);</span><br><span class="line">    &#125;];</span><br><span class="line">    /*结果：</span><br><span class="line">     d=2</span><br><span class="line">     b=2</span><br><span class="line">     c=3</span><br><span class="line">     a=1</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void test4()&#123;</span><br><span class="line">    NSMutableDictionary *dic=[NSMutableDictionary dictionaryWithObjectsAndKeys:@&quot;1&quot;,@&quot;a&quot;,</span><br><span class="line">                              @&quot;2&quot;,@&quot;b&quot;,</span><br><span class="line">                              @&quot;3&quot;,@&quot;c&quot;,</span><br><span class="line">                              @&quot;2&quot;,@&quot;d&quot;,</span><br><span class="line">                            nil];</span><br><span class="line">    [dic removeObjectForKey:@&quot;b&quot;];</span><br><span class="line">    NSLog(@&quot;%@&quot;,dic);</span><br><span class="line">    /*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         a = 1;</span><br><span class="line">         c = 3;</span><br><span class="line">         d = 2;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    [dic addEntriesFromDictionary:@&#123;@&quot;e&quot;:@&quot;7&quot;,@&quot;f&quot;:@&quot;6&quot;&#125;];</span><br><span class="line">    NSLog(@&quot;%@&quot;,dic);</span><br><span class="line">    /*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         a = 1;</span><br><span class="line">         c = 3;</span><br><span class="line">         d = 2;</span><br><span class="line">         e = 7;</span><br><span class="line">         f = 6;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span><br><span class="line">    </span><br><span class="line">    [dic setValue:@&quot;5&quot; forKey:@&quot;a&quot;];</span><br><span class="line">    NSLog(@&quot;%@&quot;,dic);</span><br><span class="line">    /*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         a = 5;</span><br><span class="line">         c = 3;</span><br><span class="line">         d = 2;</span><br><span class="line">         e = 7;</span><br><span class="line">         f = 6;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span><br><span class="line">     </span><br><span class="line">    </span><br><span class="line">    //注意，一个字典的key或value添加到字典中时计数器+1；字典释放时调用key或value的release一次，计数器-1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></article></div></section><footer><div class="paginator"><a href="/2016/05/25/iOS编程常用技巧/" class="next">NEXT</a></div><div data-thread-key="2016/05/27/Foundation学习笔记/" data-title="Foundation学习笔记" data-url="http://yoursite.com/2016/05/27/Foundation学习笔记/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"true"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2015 - 2016 <a href="http://yoursite.com"></a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>