<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Foundation学习笔记 | spike</title>
  <meta name="author" content="John Doe">
  
  <meta name="description" content="简介：Cocoa框架中包含众多子框架，Foundation是其中的重要框架，NSObject就在Foundation框架之中。

常用结构体NSRange:范围结构体，用来对对象进行范围操作。NSString *str = @&quot;123456789&quot;;  NSRange r1 = [str range">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Foundation学习笔记"/>
  <meta property="og:site_name" content="spike"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="spike" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">  
  <link rel="stylesheet" href="/css/sidenav.css" media="screen" type="text/css">  
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  

</head>

<body id="body" data-spy="scroll" data-target=".toc">
  <div class="container" id="container">
	<div class="content">
	  <div class="page-header">		
  <h1><a class="brand" href="/">spike</a><span class="split"></span><span class="title">Foundation学习笔记</span><span class="date" id="title-date"><i class="fa fa-clock-o"></i> 2016-05-27</span></h1>
</div>		

<div class="row page">
  <!-- cols -->	
  
  

  
	<div class="col-md-12">
	  

	  <!-- content -->
	  <blockquote>
<p>简介：Cocoa框架中包含众多子框架，Foundation是其中的重要框架，NSObject就在Foundation框架之中。</p>
</blockquote>
<h3 id="常用结构体"><a href="#常用结构体" class="headerlink" title="常用结构体"></a>常用结构体</h3><h5 id="NSRange-范围结构体，用来对对象进行范围操作。"><a href="#NSRange-范围结构体，用来对对象进行范围操作。" class="headerlink" title="NSRange:范围结构体，用来对对象进行范围操作。"></a>NSRange:范围结构体，用来对对象进行范围操作。</h5><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *str = <span class="string">@"123456789"</span>;  </span><br><span class="line"><span class="built_in">NSRange</span> r1 = [str rangeOfString:<span class="string">@"9"</span>];  </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"location = %ld, length = %ld"</span>, r1.location, r1.length);    </span><br><span class="line">&#125;</span><br><span class="line">结果：location = <span class="number">8</span>, length = <span class="number">1</span>  </span><br><span class="line">如果找不到相应字符串，返回的是<span class="built_in">NSNotFound</span>, 而<span class="built_in">NSNotFound</span>就是<span class="number">-1</span>, 由于<span class="built_in">NSNotFound</span>是unsignedlong类型, 所以打印出来是这么一大堆的数字 。</span><br><span class="line">调用输出语句输出<span class="built_in">NSNotFound</span>，<span class="built_in">NSLog</span>(<span class="string">@"%d ---- %lu"</span>, <span class="built_in">NSNotFound</span>, <span class="built_in">NSNotFound</span>); </span><br><span class="line">结果：</span><br><span class="line">location = <span class="number">9223372036854775807</span>, length = <span class="number">0</span>  </span><br><span class="line"> <span class="number">-1</span> ---- <span class="number">9223372036854775807</span></span><br></pre></td></tr></table></figure>
<h5 id="NSPoint：表示一个点。"><a href="#NSPoint：表示一个点。" class="headerlink" title="NSPoint：表示一个点。"></a>NSPoint：表示一个点。</h5><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="built_in">CGPoint</span> p = <span class="built_in">NSMakePoint</span>(<span class="number">1</span>, <span class="number">2</span>);      </span><br><span class="line"><span class="built_in">NSPoint</span> p1 = <span class="built_in">CGPointMake</span>(<span class="number">10</span>, <span class="number">20</span>); <span class="comment">//开发中最长用的  </span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"px = %f, py = %f"</span>, p.x, p.y);  </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"p1x = %f, p1y = %f"</span>, p1.x, p1.y);        </span><br><span class="line">&#125;  </span><br><span class="line">结果： px = <span class="number">1.000000</span>, py = <span class="number">2.000000</span>  </span><br><span class="line">      p1x = <span class="number">10.000000</span>, p1y = <span class="number">20.000000</span></span><br></pre></td></tr></table></figure>
<h5 id="NSSize-表示宽高"><a href="#NSSize-表示宽高" class="headerlink" title="NSSize :表示宽高"></a>NSSize :表示宽高</h5><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="built_in">NSSize</span> &#123;  </span><br><span class="line">  <span class="built_in">CGFloat</span> width;  </span><br><span class="line">  <span class="built_in">CGFloat</span> height;  </span><br><span class="line">  &#125;;  </span><br><span class="line"><span class="built_in">NSSize</span> size = &#123;<span class="number">10</span>, <span class="number">30</span>&#125;;  </span><br><span class="line"><span class="built_in">CGSize</span> size2 = <span class="built_in">NSMakeSize</span>(<span class="number">100</span>, <span class="number">200</span>);  </span><br><span class="line"><span class="built_in">NSSize</span> s1 =  <span class="built_in">CGSizeMake</span>(<span class="number">10</span>, <span class="number">30</span>);  </span><br><span class="line"><span class="built_in">NSSize</span> s2 =  <span class="built_in">NSMakeSize</span>(<span class="number">100</span>, <span class="number">200</span>);  </span><br><span class="line"><span class="built_in">CGSize</span> s3 = <span class="built_in">CGSizeMake</span>(<span class="number">10</span>, <span class="number">30</span>);  </span><br><span class="line"><span class="built_in">CGSize</span> s4 = <span class="built_in">NSMakeSize</span>(<span class="number">100</span>, <span class="number">200</span>);   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="CGRect-用来表示一个矩形的位置和宽高"><a href="#CGRect-用来表示一个矩形的位置和宽高" class="headerlink" title="CGRect: 用来表示一个矩形的位置和宽高"></a>CGRect: 用来表示一个矩形的位置和宽高</h5><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="built_in">CGRect</span> &#123;  </span><br><span class="line">  <span class="built_in">CGPoint</span> origin;  </span><br><span class="line">  <span class="built_in">CGSize</span> size;  </span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">CGRect</span> r1 = <span class="built_in">CGRectMake</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">50</span>);      </span><br><span class="line"><span class="built_in">CGRect</span> r2 = &#123;&#123;<span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">100</span>, <span class="number">100</span>&#125;&#125;;  </span><br><span class="line"><span class="built_in">CGRect</span> r3 = &#123;<span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">0</span>), <span class="built_in">CGSizeMake</span>(<span class="number">100</span>, <span class="number">100</span>)&#125;;  </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"r1 = %@"</span>, <span class="built_in">NSStringFromRect</span>(r1));  </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"r2 = %@"</span>, <span class="built_in">NSStringFromRect</span>(r2));  </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"r3 = %@"</span>, <span class="built_in">NSStringFromRect</span>(r3));  </span><br><span class="line">r1 = &#123;&#123;<span class="number">10</span>, <span class="number">10</span>&#125;, &#123;<span class="number">50</span>, <span class="number">50</span>&#125;&#125;  </span><br><span class="line">r2 = &#123;&#123;<span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">100</span>, <span class="number">100</span>&#125;&#125;  </span><br><span class="line">r3 = &#123;&#123;<span class="number">0</span>, <span class="number">0</span>&#125;, &#123;<span class="number">100</span>, <span class="number">100</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="日期操作"><a href="#日期操作" class="headerlink" title="日期操作"></a>日期操作</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">//获得当前日期</span></span><br><span class="line"><span class="built_in">NSDate</span> *date1=[<span class="built_in">NSDate</span> date];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,date1); <span class="comment">//结果：2014-07-16 07:25:28 +0000</span></span><br><span class="line"><span class="comment">//在当前日期的基础上加上100秒注意在ObjC中多数时间单位都是秒</span></span><br><span class="line"><span class="built_in">NSDate</span> *date2=[<span class="built_in">NSDate</span> dateWithTimeIntervalSinceNow:<span class="number">100</span>];，</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,date2); <span class="comment">//结果：2014-07-16 07:27:08 +0000</span></span><br><span class="line"><span class="comment">//随机获取一个将来的日期</span></span><br><span class="line"><span class="built_in">NSDate</span> *date3=[<span class="built_in">NSDate</span> distantFuture];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,date3); <span class="comment">//结果：4001-01-01 00:00:00 +0000</span></span><br><span class="line"><span class="comment">//日期之差,返回单位为秒</span></span><br><span class="line"><span class="built_in">NSTimeInterval</span> time=[date2 timeIntervalSinceDate:date1];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%f"</span>,time); <span class="comment">//结果：100.008833</span></span><br><span class="line"><span class="comment">//返回比较早的日期</span></span><br><span class="line"><span class="built_in">NSDate</span> *date5=[date1 earlierDate:date3];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,date5); <span class="comment">//结果：2014-07-16 07:25:28 +0000</span></span><br><span class="line"><span class="comment">//日期格式化</span></span><br><span class="line"><span class="comment">//将日期时间转化为字符串</span></span><br><span class="line"><span class="comment">// 实例化NSDateFormatter</span></span><br><span class="line"><span class="built_in">NSDateFormatter</span> *formatter = [[<span class="built_in">NSDateFormatter</span> alloc] init];</span><br><span class="line"><span class="comment">// 设置日期格式</span></span><br><span class="line">[formatter setDateFormat:<span class="string">@"yyyy-mm-dd HH:mm:ss"</span>];</span><br><span class="line"><span class="comment">// 获取当前日期</span></span><br><span class="line"><span class="built_in">NSDate</span> *currentDate = [<span class="built_in">NSDate</span> date];</span><br><span class="line"><span class="built_in">NSString</span> *currentDateString = [formatter stringFromDate:currentDate];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, currentDateString);</span><br><span class="line"><span class="comment">//将时间字符串转换为日期</span></span><br><span class="line"><span class="built_in">NSDateFormatter</span> *formatter = [[<span class="built_in">NSDateFormatter</span> alloc] init];</span><br><span class="line"><span class="comment">// 要转换的日期字符串</span></span><br><span class="line"><span class="built_in">NSString</span> *dateString = <span class="string">@"2011-05-03 23:11:40"</span>;</span><br><span class="line"><span class="comment">// 设置为UTC时区</span></span><br><span class="line"><span class="comment">// 这里如果不设置为UTC时区，会把要转换的时间字符串定为当前时区的时间（东八区）转换为UTC时区的时间</span></span><br><span class="line"><span class="built_in">NSTimeZone</span> *timezone = [<span class="built_in">NSTimeZone</span> timeZoneWithAbbreviation:<span class="string">@"UTC"</span>];</span><br><span class="line"><span class="built_in">NSDate</span> *someDay = [formatter dateFromString:dateString];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, someDay);</span><br></pre></td></tr></table></figure>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h5 id="不可变字符串"><a href="#不可变字符串" class="headerlink" title="不可变字符串"></a>不可变字符串</h5><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *str2=<span class="string">@"OC string"</span>;<span class="comment">//ObjC字符串需要加@，并且这种方式创建的对象不需要自己释放内存</span></span><br><span class="line"><span class="comment">//下面的创建方法都应该释放内存</span></span><br><span class="line"><span class="built_in">NSString</span> *str3=[[<span class="built_in">NSString</span> alloc] init];</span><br><span class="line">str3=<span class="string">@"OC string"</span>;</span><br><span class="line"><span class="built_in">NSString</span> *str4=[[<span class="built_in">NSString</span> alloc] initWithString:<span class="string">@"Objective-C string"</span>];</span><br><span class="line"><span class="built_in">NSString</span> *str5=[[<span class="built_in">NSString</span> alloc] initWithFormat:<span class="string">@"age is %i,name is %.2f"</span>,<span class="number">19</span>,<span class="number">1.72</span>f];</span><br><span class="line"><span class="built_in">NSString</span> *str6=[[<span class="built_in">NSString</span> alloc] initWithUTF8String:<span class="string">"C string"</span>];<span class="comment">//C语言的字符串转换为ObjC字符串</span></span><br><span class="line"><span class="comment">//以上方法都有对应静态方法（一般以string开头）,不需要管理内存（系统静态方法一般都是自动释放）</span></span><br><span class="line"><span class="built_in">NSString</span> *str7=[<span class="built_in">NSString</span> stringWithString:<span class="string">@"Objective-C string"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"\"Hello world!\" to upper is %@"</span>,[<span class="string">@"Hello world!"</span> uppercaseString]);</span><br><span class="line"><span class="comment">//结果："Hello world!" to upper is HELLO WORLD!</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"\"Hello world!\" to lowwer is %@"</span>,[<span class="string">@"Hello world!"</span> lowercaseString]);</span><br><span class="line"><span class="comment">//结果："Hello world!" to lowwer is hello world!</span></span><br><span class="line"><span class="comment">//首字母大写，其他字母小写</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"\"Hello world!\" to capitalize is %@"</span>,[<span class="string">@"Hello world!"</span> capitalizedString]);</span><br><span class="line"><span class="comment">//结果："Hello world!" to capitalize is Hello World!</span></span><br><span class="line"><span class="built_in">BOOL</span> result= [<span class="string">@"abc"</span> isEqualToString:<span class="string">@"aBc"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%i"</span>,result);</span><br><span class="line"><span class="comment">//结果：0</span></span><br><span class="line"><span class="built_in">NSComparisonResult</span> result2= [<span class="string">@"abc"</span> compare:<span class="string">@"aBc"</span>];<span class="comment">//如果是[@"abc" caseInsensitiveCompare:@"aBc"]则忽略大小写比较</span></span><br><span class="line">    <span class="keyword">if</span>(result2==<span class="built_in">NSOrderedAscending</span>)&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"left&lt;right."</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(result2==<span class="built_in">NSOrderedDescending</span>)&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"left&gt;right."</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(result2==<span class="built_in">NSOrderedSame</span>)&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"left=right."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//结果：left&gt;right.</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"has prefix ab? %i"</span>,[<span class="string">@"abcdef"</span> hasPrefix:<span class="string">@"ab"</span>]);</span><br><span class="line"><span class="comment">//结果：has prefix ab? 1</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"has suffix ab? %i"</span>,[<span class="string">@"abcdef"</span> hasSuffix:<span class="string">@"ef"</span>]);</span><br><span class="line"><span class="comment">//结果：has suffix ab? 1</span></span><br><span class="line"><span class="built_in">NSRange</span> range=[<span class="string">@"abcdefabcdef"</span> rangeOfString:<span class="string">@"cde"</span>];<span class="comment">//注意如果遇到cde则不再往后面搜索,如果从后面搜索或其他搜索方式可以设置第二个options参数</span></span><br><span class="line"><span class="keyword">if</span>(range.location==<span class="built_in">NSNotFound</span>)&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"not found."</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"range is %@"</span>,<span class="built_in">NSStringFromRange</span>(range));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//结果：range is &#123;2, 3&#125;</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[<span class="string">@"abcdef"</span> substringFromIndex:<span class="number">3</span>]);<span class="comment">//从第三个索引开始（包括第三个索引对应的字符）截取到最后一位</span></span><br><span class="line"><span class="comment">//结果：def</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[<span class="string">@"abcdef"</span> substringToIndex:<span class="number">3</span>]);<span class="comment">////从0开始截取到第三个索引（不包括第三个索引对应的字符）</span></span><br><span class="line"><span class="comment">//结果：abc</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[<span class="string">@"abcdef"</span> substringWithRange:<span class="built_in">NSMakeRange</span>(<span class="number">2</span>, <span class="number">3</span>)]);</span><br><span class="line"><span class="comment">//结果：cde</span></span><br><span class="line"><span class="built_in">NSString</span> *str1=<span class="string">@"12.abcd.3a"</span>;</span><br><span class="line"><span class="built_in">NSArray</span> *array1=[str1 componentsSeparatedByString:<span class="string">@"."</span>];<span class="comment">//字符串分割</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array1);</span><br><span class="line">结果：</span><br><span class="line">(</span><br><span class="line"><span class="number">12</span>,</span><br><span class="line">abcd,</span><br><span class="line"><span class="number">3</span>a</span><br><span class="line">)</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%i"</span>,[<span class="string">@"12"</span> intValue]);<span class="comment">//类型转换</span></span><br><span class="line"><span class="comment">//结果：12</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%zi"</span>,[<span class="string">@"hello world,世界你好！"</span> length]);<span class="comment">//字符串长度注意不是字节数</span></span><br><span class="line"><span class="comment">//结果：17</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%c"</span>,[<span class="string">@"abc"</span> characterAtIndex:<span class="number">0</span>]);<span class="comment">//取出制定位置的字符</span></span><br><span class="line"><span class="comment">//结果：a</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *s=[<span class="string">@"abc"</span> UTF8String];<span class="comment">//转换为C语言字符串</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%s"</span>,s);</span><br><span class="line"><span class="comment">//结果：abc</span></span><br></pre></td></tr></table></figure>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">//去掉最后一个字符</span></span><br><span class="line"><span class="built_in">NSString</span> * newString = [originString substringWithRange:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>, [originString length] - <span class="number">1</span>)];</span><br><span class="line"><span class="comment">//拼接字符串</span></span><br><span class="line"><span class="built_in">NSString</span> </span><br><span class="line"><span class="built_in">NSString</span>* string; <span class="comment">// 结果字符串</span></span><br><span class="line"><span class="built_in">NSString</span>* string1, string2; <span class="comment">//已存在的字符串，需要将string1和string2连接起来</span></span><br><span class="line">方法<span class="number">1</span></span><br><span class="line">string = [<span class="built_in">NSString</span> initWithFormat:<span class="string">@"%@,%@"</span>, string1, string2 ];</span><br><span class="line">方法<span class="number">2</span></span><br><span class="line">string = [string1 stringByAppendingString:string2];</span><br><span class="line">方法<span class="number">3</span></span><br><span class="line">string = [string stringByAppendingFormat:<span class="string">@"%@,%@"</span>,string1, string2];</span><br><span class="line">方法<span class="number">4</span>：</span><br><span class="line"><span class="built_in">NSString</span> *test =  [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"设备名称：%@ \n系统版本号：%@\n设备模式：%@\n手机型号: %@\nApp应用名称：%@\nApp应用版本：%@\n"</span>,strName,strSysVersion,strModel,phoneModel,strAppName,strAppVersion];</span><br><span class="line"><span class="comment">//for循环添加字符串</span></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSString</span> *str <span class="keyword">in</span> rolePick)&#123;</span><br><span class="line">  string = [string stringByAppendingFormat:<span class="string">@"%@,"</span>,str];</span><br><span class="line">  &#125; </span><br><span class="line">截取字符串</span><br><span class="line"><span class="built_in">NSString</span> *str = <span class="string">@"hello:world"</span>;  </span><br><span class="line"><span class="built_in">NSRange</span> range = [str rangeOfString:<span class="string">@":"</span>];  </span><br><span class="line">str = [str substringFromIndex:<span class="built_in">NSMaxRange</span>(range)];  </span><br><span class="line">其中range这个东东有两个属性：length、location</span><br><span class="line">length表示用来做range的字符串的长度，在此就是<span class="string">":"</span>的长度 ＝ <span class="number">1</span>；</span><br><span class="line">location表示首个出现该匹配字符串的下标</span><br><span class="line"><span class="comment">//判断字符串是否为空</span></span><br><span class="line">- (<span class="built_in">BOOL</span>) isBlankString:(<span class="built_in">NSString</span> *)string &#123;</span><br><span class="line">    <span class="keyword">if</span> (string == <span class="literal">nil</span> || string == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ([string isKindOfClass:[<span class="built_in">NSNull</span> class]])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ([[string stringByTrimmingCharactersInSet:[<span class="built_in">NSCharacterSet</span> whitespaceCharacterSet]] length]==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//分割字符串为数组</span></span><br><span class="line"><span class="built_in">NSArray</span> *array = [string componentsSeparatedByString:<span class="string">@","</span>]; <span class="comment">// 通过逗号分隔字符串转化为数组</span></span><br><span class="line"><span class="comment">//计算某个字符在字符串中的个数</span></span><br><span class="line">-(<span class="keyword">int</span>) numberOfCharaterInString:(<span class="built_in">NSString</span> *)stringToCount characterToCount:(<span class="built_in">NSString</span> *) character&#123;</span><br><span class="line">    <span class="keyword">int</span> numberPoint = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;stringToCount.length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">NSString</span> * temp = [stringToCount substringWithRange:<span class="built_in">NSMakeRange</span>(i, <span class="number">1</span>)];</span><br><span class="line">        <span class="keyword">if</span> ([temp isEqualToString:character])</span><br><span class="line">        &#123;</span><br><span class="line">            numberPoint ++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>  numberPoint;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//声明一个NSString属性使用copy要优于使用strong。</span></span><br><span class="line"><span class="comment">//Nsstring 转 Nsnumber</span></span><br><span class="line"> <span class="built_in">NSNumberFormatter</span> *f = [[<span class="built_in">NSNumberFormatter</span> alloc] init];</span><br><span class="line">    <span class="keyword">if</span> ([f numberFromString:ss])</span><br><span class="line">    &#123;</span><br><span class="line">        result=[<span class="built_in">NSNumber</span> numberWithFloat:[ss floatValue]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        result=ss;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//字符串与int互转</span></span><br><span class="line"><span class="keyword">int</span> intString = [newString intValue];   </span><br><span class="line"><span class="built_in">NSString</span> *stringInt = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%d"</span>,intString];</span><br><span class="line"><span class="comment">//字符串与float互转</span></span><br><span class="line"><span class="keyword">float</span> floatString = [ newString floatValue];<span class="built_in">NSString</span> *stringFloat = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%f"</span>,intString];</span><br><span class="line"><span class="comment">//与NSData的转化</span></span><br><span class="line"><span class="built_in">NSData</span> *string2data = [string dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];<span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,string2data);<span class="comment">//NSData to NSString</span><span class="built_in">NSString</span> *data2String = [[<span class="built_in">NSString</span> alloc]initWithData:data encoding:<span class="built_in">NSUTF8StringEncoding</span>];<span class="built_in">NSLog</span>(<span class="string">@"dataString = %@"</span>,data2String);</span><br><span class="line"><span class="comment">//与NSDate的转化</span></span><br><span class="line"><span class="built_in">NSString</span> to <span class="built_in">NSDate</span><span class="built_in">NSDate</span> *string2date = [<span class="keyword">self</span> convertDateFromString:dateString withFormattre:<span class="string">@"yyyyMMdd"</span>];<span class="built_in">NSLog</span>(<span class="string">@"date = %@"</span>,string2date);</span><br><span class="line"><span class="comment">//NSDate to NSString</span><span class="built_in">NSDateFormatter</span> *dateFormatter = [[<span class="built_in">NSDateFormatter</span> alloc] init];[dateFormatter setDateFormat:<span class="string">@"yyyy-MM-dd HH:mm:ss"</span>];<span class="built_in">NSString</span> *date2string = [dateFormatter stringFromDate:[<span class="built_in">NSDate</span> date]];<span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, date2string);<span class="comment">// NSString to NSArray</span><span class="built_in">NSArray</span> *string2Arry = [arry2String componentsSeparatedByString:<span class="string">@" "</span>];<span class="built_in">NSLog</span>(<span class="string">@" %@"</span>,string2Arry);</span><br><span class="line"><span class="comment">//NSString to NSDictionary</span></span><br><span class="line"><span class="built_in">NSError</span> *error = <span class="literal">nil</span>;<span class="built_in">NSDictionary</span> *string2dic = [<span class="built_in">NSJSONSerialization</span> JSONObjectWithData: [dic2string dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>]                                    options: <span class="built_in">NSJSONReadingMutableContainers</span>                                      error: &amp;error];<span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,string2dic);</span><br></pre></td></tr></table></figure>
<h5 id="可变字符串"><a href="#可变字符串" class="headerlink" title="可变字符串"></a>可变字符串</h5> <figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/*可变字符串，注意NSMutableString是NSString子类*/</span></span><br><span class="line"><span class="comment">//注意虽然initWithCapacity分配字符串大小，但是不是绝对的不可以超过此范围，声明此变量对性能有好处</span></span><br><span class="line"><span class="comment">//设置字符串</span></span><br><span class="line"><span class="built_in">NSMutableString</span> *str1= [[<span class="built_in">NSMutableString</span> alloc] initWithCapacity:<span class="number">10</span>];</span><br><span class="line">[str1 setString:<span class="string">@"hello"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,str1);</span><br><span class="line"><span class="comment">//结果：hello</span></span><br><span class="line"><span class="comment">//追加字符串</span></span><br><span class="line">[str1 appendString:<span class="string">@",world!"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,str1);</span><br><span class="line"><span class="comment">//结果：hello,world!</span></span><br><span class="line">[str1 appendFormat:<span class="string">@"我的年龄是%i。dear,I love you."</span>,<span class="number">18</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,str1);</span><br><span class="line"><span class="comment">//结果：hello,world!我的年龄是18。dear,I love you.</span></span><br><span class="line"><span class="comment">//替换字符串</span></span><br><span class="line"><span class="built_in">NSRange</span> range=[str1 rangeOfString:<span class="string">@"dear"</span>];</span><br><span class="line">[str1 replaceCharactersInRange:range withString:<span class="string">@"Honey"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,str1);</span><br><span class="line"><span class="comment">//结果：hello,world!我的年龄是18。Honey,I love you.</span></span><br><span class="line"><span class="comment">//插入字符串</span></span><br><span class="line">[str1 insertString:<span class="string">@"My name is Kenshin."</span> atIndex:<span class="number">12</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,str1);</span><br><span class="line"><span class="comment">//结果：hello,world!My name is Kenshin.我的年龄是18。Honey,I love you.</span></span><br><span class="line"><span class="comment">//删除指定字符串</span></span><br><span class="line">[str1 deleteCharactersInRange:[str1 rangeOfString:<span class="string">@"My name is Kenshin."</span>]];<span class="comment">//删除指定范围的字符串</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,str1);</span><br><span class="line"><span class="comment">//结果：hello,world!我的年龄是18。Honey,I love you.</span></span><br></pre></td></tr></table></figure>
<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">在ObjC中路径、文件读写等操作是利用字符串来完成的，这里通过几个简单的例子来演示（首先在桌面上新建一个test.txt文件，里面存储的内容是”hello world,世界你好！”）</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取文件内容</span></span><br><span class="line"><span class="keyword">void</span> test1()&#123;</span><br><span class="line"><span class="built_in">NSString</span> *path=<span class="string">@"/Users/kenshincui/Desktop/test.txt"</span>;</span><br><span class="line"><span class="built_in">NSString</span> *str1=[<span class="built_in">NSString</span> stringWithContentsOfFile:path encoding:<span class="built_in">NSUTF8StringEncoding</span> error:<span class="literal">nil</span>];</span><br><span class="line"><span class="comment">//注意上面也可以使用gb2312 gbk等,例如kCFStringEncodingGB_18030_2000，但是需要用CFStringConvertEncodingToNSStringEncoding转换</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"str1 is %@"</span>,str1);</span><br><span class="line"><span class="comment">//结果：str1 is hello world,世界你好！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//上面我们看到了读取文件，但并没有处理错误,当然在ObjC中可以@try @catch @finnally但通常我们并不那么做</span></span><br><span class="line"><span class="comment">//由于我们的test.txt中有中文，所以使用下面的编码读取会报错，下面的代码演示了错误获取的过程</span></span><br><span class="line"><span class="built_in">NSError</span> *error;</span><br><span class="line"><span class="built_in">NSString</span> *str2=[<span class="built_in">NSString</span> stringWithContentsOfFile:path encoding:kCFStringEncodingGB_18030_2000 error:&amp;error];<span class="comment">//注意这句话中的error变量是**error，就是指针的指针那就是指针的地址，由于error就是一个指针此处也就是error的地址&amp;error，具体原因见下面补充</span></span><br><span class="line">    <span class="keyword">if</span>(error)&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"read error ,the error is %@"</span>,error);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"read success,the file content is %@"</span>,str2);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//结果：read error ,the error is Error </span></span><br><span class="line"></span><br><span class="line">Domain=<span class="built_in">NSCocoaErrorDomain</span> Code=<span class="number">261</span> <span class="string">"The file couldn’t be opened using the specified text encoding."</span> UserInfo=<span class="number">0x100109620</span> &#123;<span class="built_in">NSFilePath</span>=/Users/kenshincui/Desktop/test.txt, <span class="built_in">NSStringEncoding</span>=<span class="number">1586</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取文件内容还有一种方式就是利用URl，它除了可以读取本地文件还可以读取网络文件</span></span><br><span class="line"><span class="comment">//NSURL *url=[NSURL URLWithString:@"file:///Users/kenshincui/Desktop/test.txt"];</span></span><br><span class="line"><span class="built_in">NSURL</span> *url=[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"http://www.apple.com"</span>];</span><br><span class="line"><span class="built_in">NSString</span> *str3=[<span class="built_in">NSString</span> stringWithContentsOfURL:url encoding:<span class="built_in">NSUTF8StringEncoding</span> error:<span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"str3 is %@"</span>,str3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//下面是文件写入</span></span><br><span class="line"><span class="keyword">void</span> test2()&#123;</span><br><span class="line"><span class="built_in">NSString</span> *path1=<span class="string">@"/Users/kenshincui/Desktop/test2.txt"</span>;</span><br><span class="line"><span class="built_in">NSError</span> *error1;</span><br><span class="line"><span class="built_in">NSString</span> *str11=<span class="string">@"hello world,世界你好！"</span>;</span><br><span class="line">[str11 writeToFile:path1 atomically:<span class="literal">YES</span> encoding:<span class="built_in">NSUTF8StringEncoding</span> error:&amp;error1];<span class="comment">//automically代表一次性写入，如果写到中间出错了最后就全部不写入</span></span><br><span class="line"><span class="keyword">if</span>(error1)&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"write fail,the error is %@"</span>,[error1 localizedDescription]);<span class="comment">//调用localizedDescription是只打印关键错误信息</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"write success!"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//结果：write success!</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//路径操作</span></span><br><span class="line"><span class="keyword">void</span> test3()&#123;</span><br><span class="line"><span class="built_in">NSMutableArray</span> *marray=[<span class="built_in">NSMutableArray</span> array];<span class="comment">//可变数组</span></span><br><span class="line">[marray addObject:<span class="string">@"Users"</span>];</span><br><span class="line">[marray addObject:<span class="string">@"KenshinCui"</span>];</span><br><span class="line">[marray addObject:<span class="string">@"Desktop"</span>];</span><br><span class="line"><span class="built_in">NSString</span> *path=[<span class="built_in">NSString</span> pathWithComponents:marray];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,path);<span class="comment">//字符串拼接成路径</span></span><br><span class="line"><span class="comment">//结果：Users/KenshinCui/Desktop</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[path pathComponents]);<span class="comment">//路径分割成数组</span></span><br><span class="line"><span class="comment">/*结果： </span><br><span class="line">(</span><br><span class="line">        Users,</span><br><span class="line">        KenshinCui,</span><br><span class="line">        Desktop</span><br><span class="line">)</span><br><span class="line">*/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%i"</span>,[path isAbsolutePath]);<span class="comment">//是否绝对路径（其实就是看字符串是否以“/”开头）</span></span><br><span class="line"><span class="comment">//结果：0</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[path lastPathComponent]);<span class="comment">//取得最后一个目录</span></span><br><span class="line"><span class="comment">//结果：Desktop</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[path stringByDeletingLastPathComponent]);<span class="comment">//删除最后一个目录，注意path本身是常量不会被修改,只是返回一个新字符串</span></span><br><span class="line"><span class="comment">//结果：Users/KenshinCui</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[path stringByAppendingPathComponent:<span class="string">@"Documents"</span>]);<span class="comment">//路径拼接</span></span><br><span class="line"><span class="comment">//结果：Users/KenshinCui/Desktop/Documents</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//扩展名操作</span></span><br><span class="line"><span class="keyword">void</span> test4()&#123;</span><br><span class="line"><span class="built_in">NSString</span> *path=<span class="string">@"Users/KenshinCui/Desktop/test.txt"</span>;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[path pathExtension]);<span class="comment">//取得扩展名，注意ObjC中扩展名不包括"."</span></span><br><span class="line"><span class="comment">//结果：txt</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[path stringByDeletingPathExtension]);<span class="comment">//删除扩展名，注意包含"."</span></span><br><span class="line"><span class="comment">//结果：Users/KenshinCui/Desktop/test</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[<span class="string">@"Users/KenshinCui/Desktop/test"</span> stringByAppendingPathExtension:<span class="string">@"mp3"</span>]);<span class="comment">//添加扩展名</span></span><br><span class="line"><span class="comment">//结果：Users/KenshinCui/Desktop/test.mp3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*目录操作*/</span></span><br><span class="line"><span class="keyword">void</span> test1()&#123;</span><br><span class="line"><span class="comment">//文件管理器是专门用于文件管理的类</span></span><br><span class="line"><span class="built_in">NSFileManager</span> *manager=[<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line"><span class="comment">//获得当前程序所在目录(当然可以改变)</span></span><br><span class="line">    <span class="built_in">NSString</span> *currentPath=[manager currentDirectoryPath];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"current path is :%@"</span>,currentPath);</span><br><span class="line">    <span class="comment">//结果：/Users/kenshincui/Library/Developer/Xcode/DerivedData/FoundationFramework-awxjohcpgsqcpsanqofqogwbqgbx/Build/Products/Debug</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//创建目录</span></span><br><span class="line">    <span class="built_in">NSString</span> *myPath=<span class="string">@"/Users/kenshincui/Desktop/myDocument"</span>;</span><br><span class="line">    <span class="built_in">BOOL</span> result= [manager createDirectoryAtPath:myPath withIntermediateDirectories:<span class="literal">YES</span> attributes:<span class="literal">nil</span> error:<span class="literal">nil</span>];</span><br><span class="line">    <span class="keyword">if</span>(result==<span class="literal">NO</span>)&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Couldn't create directory!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//目录重命名，如果需要删除目录只要调用removeItemAtPath:&lt;#(NSString *)#&gt; error:&lt;#(NSError **)#&gt;</span></span><br><span class="line">    <span class="built_in">NSError</span> *error;</span><br><span class="line">    <span class="built_in">NSString</span> *newPath=<span class="string">@"/Users/kenshincui/Desktop/myNewDocument"</span>;</span><br><span class="line">    <span class="keyword">if</span>([manager moveItemAtPath:myPath toPath:newPath error:&amp;error]==<span class="literal">NO</span>)&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Rename directory failed!Error infomation is:%@"</span>,error);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//改变当前目录</span></span><br><span class="line">    <span class="keyword">if</span>([manager changeCurrentDirectoryPath:newPath]==<span class="literal">NO</span>)&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Change current directory failed!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"current path is :%@"</span>,[manager currentDirectoryPath]);</span><br><span class="line">    <span class="comment">//结果：current path is :/Users/kenshincui/Desktop/myNewDocument</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//遍历整个目录</span></span><br><span class="line">    <span class="built_in">NSString</span> *path;</span><br><span class="line">    <span class="built_in">NSDirectoryEnumerator</span> *directoryEnumerator= [manager enumeratorAtPath:newPath];</span><br><span class="line">    <span class="keyword">while</span> (path=[directoryEnumerator nextObject]) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,path);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     documents</span><br><span class="line">     est.txt</span><br><span class="line">    */</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//或者这样遍历</span></span><br><span class="line">    <span class="built_in">NSArray</span> *paths= [manager contentsOfDirectoryAtPath:newPath error:<span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSObject</span> *p;</span><br><span class="line">    <span class="keyword">for</span> (p <span class="keyword">in</span> paths) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     documents</span><br><span class="line">     est.txt</span><br><span class="line">     */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*文件操作*/</span></span><br><span class="line"><span class="keyword">void</span> test2()&#123;</span><br><span class="line">    <span class="built_in">NSFileManager</span> *manager=[<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line">    <span class="built_in">NSString</span> *filePath=<span class="string">@"/Users/kenshincui/Desktop/myNewDocument/test.txt"</span>;</span><br><span class="line">    <span class="built_in">NSString</span> *filePath2=<span class="string">@"/Users/kenshincui/Desktop/test.txt"</span>;</span><br><span class="line">    <span class="built_in">NSString</span> *newPath=<span class="string">@"/Users/kenshincui/Desktop/myNewDocument/test2.txt"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//判断文件是否存在，这个方法也可以判断目录是否存在，这要后面的参数设置位YES</span></span><br><span class="line">    <span class="keyword">if</span> ([manager fileExistsAtPath:filePath isDirectory:<span class="literal">NO</span>]) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"File exists！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//文件是否可读</span></span><br><span class="line">    <span class="keyword">if</span>([manager isReadableFileAtPath:filePath])&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"File is readable!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//判断两个文件内容是否相等</span></span><br><span class="line">    <span class="keyword">if</span> ([manager contentsEqualAtPath:filePath andPath:filePath2]) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"file1 equals file2"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//文件重命名，方法类似于目录重命名</span></span><br><span class="line">    <span class="keyword">if</span> (![manager moveItemAtPath:filePath toPath:newPath error:<span class="literal">nil</span>]) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Rename file1 failed!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//文件拷贝</span></span><br><span class="line">    <span class="built_in">NSString</span> *filePath3=<span class="string">@"/Users/kenshincui/Desktop/test3.txt"</span>;</span><br><span class="line">    <span class="keyword">if</span>(![manager copyItemAtPath:newPath toPath:filePath3 error:<span class="literal">nil</span>])&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Copy failed!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//读取文件属性</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *attributes;</span><br><span class="line">    <span class="keyword">if</span> ((attributes=[manager attributesOfItemAtPath:newPath error:<span class="literal">nil</span>])==<span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"Read attributes failed!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSObject</span> *key <span class="keyword">in</span> attributes) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@=%@"</span>,key,attributes[key]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">         NSFileOwnerAccountID=501</span><br><span class="line">         NSFileHFSTypeCode=0</span><br><span class="line">         NSFileSystemFileNumber=1781953</span><br><span class="line">         NSFileExtensionHidden=0</span><br><span class="line">         NSFileSystemNumber=16777218</span><br><span class="line">         NSFileSize=27</span><br><span class="line">         NSFileGroupOwnerAccountID=20</span><br><span class="line">         NSFileOwnerAccountName=kenshincui</span><br><span class="line">         NSFileCreationDate=2014-07-28 11:47:58 +0000</span><br><span class="line">         NSFilePosixPermissions=420</span><br><span class="line">         NSFileHFSCreatorCode=0</span><br><span class="line">         NSFileType=NSFileTypeRegular</span><br><span class="line">         NSFileExtendedAttributes=&#123;</span><br><span class="line">         "com.apple.TextEncoding" = &lt;7574662d 383b3133 34323137 393834&gt;;</span><br><span class="line">         &#125;</span><br><span class="line">         NSFileGroupOwnerAccountName=staff</span><br><span class="line">         NSFileReferenceCount=1</span><br><span class="line">         NSFileModificationDate=2014-07-28 11:47:58 +0000</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//删除文件</span></span><br><span class="line">    [manager removeItemAtPath:newPath error:<span class="literal">nil</span>];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//文件操作--文件内容操作（NSData，非结构化字节流对象，有缓冲区管理机制，可用于网络传输）</span></span><br><span class="line"><span class="keyword">void</span> test3()&#123;</span><br><span class="line">    <span class="built_in">NSFileManager</span> *manager=[<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line">    <span class="built_in">NSString</span> *filePath=<span class="string">@"/Users/kenshincui/Desktop/myNewDocument/test2.txt"</span>;</span><br><span class="line">    <span class="built_in">NSData</span> *data=[manager contentsAtPath:filePath];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,data);<span class="comment">//存储的是二进制字节流</span></span><br><span class="line">    <span class="comment">//结果:&lt;68656c6c 6f20776f 726c642c e4b896e7 958ce4bd a0e5a5bd efbc81&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//NSData转化成字符串</span></span><br><span class="line">    <span class="built_in">NSString</span> *str1=[[<span class="built_in">NSString</span> alloc]initWithData:data encoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,str1);</span><br><span class="line">    <span class="comment">//结果：hello world,世界你好！</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//字符串转化成NSData</span></span><br><span class="line">    <span class="built_in">NSString</span> *str2=<span class="string">@"Kenshin"</span>;</span><br><span class="line">    <span class="built_in">NSData</span> *data2=[str2 dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,data2);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//当然一般如果仅仅是简单读取文件内容，直接用户NSString方法即可</span></span><br><span class="line">    <span class="built_in">NSString</span> *content=[<span class="built_in">NSString</span> stringWithContentsOfFile:filePath encoding:<span class="built_in">NSUTF8StringEncoding</span> error:<span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,content);</span><br><span class="line">    <span class="comment">//结果：hello world,世界你好！</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//文件操作--细粒度控制文件,文件操作柄</span></span><br><span class="line"><span class="keyword">void</span> test4()&#123;</span><br><span class="line">    <span class="built_in">NSFileManager</span> *manager=[<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line">    <span class="built_in">NSString</span> *filePath=<span class="string">@"/Users/kenshincui/Desktop/myNewDocument/test2.txt"</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//以只读方式打开文件</span></span><br><span class="line">    <span class="built_in">NSFileHandle</span> *fileHandle=[<span class="built_in">NSFileHandle</span> fileHandleForReadingAtPath:filePath];<span class="comment">//注意这个方法返回类型为instancetype，也就是说对于上面的NSFileHandle它的返回类型也是NSFileHandle</span></span><br><span class="line">    <span class="built_in">NSData</span> *data= [fileHandle readDataToEndOfFile];<span class="comment">//完整读取文件</span></span><br><span class="line">    <span class="built_in">NSString</span> *newPath=<span class="string">@"/Users/kenshincui/Desktop/test4.txt"</span>;</span><br><span class="line">    [manager createFileAtPath:newPath contents:<span class="literal">nil</span> attributes:<span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSFileHandle</span> *fileHandle2=[<span class="built_in">NSFileHandle</span> fileHandleForWritingAtPath:newPath];<span class="comment">//以可写方式打开文件</span></span><br><span class="line">    [fileHandle2 writeData:data];<span class="comment">//写入文件内容</span></span><br><span class="line">    </span><br><span class="line">    [fileHandle2 closeFile];<span class="comment">//关闭文件</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//定位到指定位置,默认在文件开头</span></span><br><span class="line">    [fileHandle seekToFileOffset:<span class="number">12</span>];</span><br><span class="line">    <span class="built_in">NSData</span> *data2= [fileHandle readDataToEndOfFile];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"data2=%@"</span>,[[<span class="built_in">NSString</span> alloc]initWithData:data2 encoding:<span class="built_in">NSUTF8StringEncoding</span>]);</span><br><span class="line">    <span class="comment">//结果：data2=世界你好！</span></span><br><span class="line">    </span><br><span class="line">    [fileHandle seekToFileOffset:<span class="number">6</span>];</span><br><span class="line">    <span class="built_in">NSData</span> *data3=[fileHandle readDataOfLength:<span class="number">5</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"data3=%@"</span>,[[<span class="built_in">NSString</span> alloc]initWithData:data3 encoding:<span class="built_in">NSUTF8StringEncoding</span>]);</span><br><span class="line">    <span class="comment">//结果：data3=world</span></span><br><span class="line">    </span><br><span class="line">    [fileHandle closeFile];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//文件路径</span></span><br><span class="line"><span class="keyword">void</span> test5()&#123;</span><br><span class="line">    <span class="built_in">NSString</span> *filePath=<span class="string">@"/Users/kenshincui/Desktop/myDocument"</span>;</span><br><span class="line">    <span class="built_in">NSString</span> *filePath2=<span class="string">@"/Users/kenshincui/Desktop/test.txt"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//临时文件所在目录</span></span><br><span class="line">    <span class="built_in">NSString</span> *path=<span class="built_in">NSTemporaryDirectory</span>();</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"temporary directory is :%@"</span>,path);</span><br><span class="line">    <span class="comment">//结果：/var/folders/h6/lss6gncs509c2pgzgty3wd_40000gn/T/</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSString</span> *lastComponent= [filePath lastPathComponent];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,lastComponent); <span class="comment">//结果：myDocument</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[filePath stringByDeletingLastPathComponent]);</span><br><span class="line">    <span class="comment">//结果：/Users/kenshincui/Desktop</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[filePath stringByAppendingPathComponent:<span class="string">@"Pictrues"</span>]);</span><br><span class="line">    <span class="comment">//结果：/Users/kenshincui/Desktop/myDocument/Pictrues</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[filePath2 pathExtension]);</span><br><span class="line">    <span class="comment">//结果：txt</span></span><br><span class="line">    </span><br><span class="line">    [[filePath pathComponents] enumerateObjectsUsingBlock:^(<span class="keyword">id</span> obj, <span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%i=%@"</span>,idx,obj);</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     0=/</span><br><span class="line">     1=Users</span><br><span class="line">     2=kenshincui</span><br><span class="line">     3=Desktop</span><br><span class="line">     4=myDocument</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//文件操作--NSURL</span></span><br><span class="line"><span class="keyword">void</span> test6()&#123;</span><br><span class="line">    <span class="built_in">NSURL</span> *url=[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"http://developer.apple.com"</span>];</span><br><span class="line">    <span class="built_in">NSString</span> *str1=[<span class="built_in">NSString</span> stringWithContentsOfURL:url encoding:<span class="built_in">NSUTF8StringEncoding</span> error:<span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,str1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//文件操作--NSBundle，程序包，一般用于获取Resource中的资源（当然由于当前并非IOS应用没有程序包，只是表示当前程序运行路径）</span></span><br><span class="line"><span class="comment">//在ios中经常用于读取应用程序中的资源文件，如图片、声音、视频等</span></span><br><span class="line"><span class="keyword">void</span> test7()&#123;</span><br><span class="line">    <span class="comment">//在程序包所在目录创建一个文件</span></span><br><span class="line">    <span class="built_in">NSFileManager</span> *manager=[<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line">    <span class="built_in">NSString</span> *currentPath=[manager currentDirectoryPath];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"current path is :%@"</span>,currentPath);</span><br><span class="line">    <span class="comment">//结果：current path is :/Users/kenshincui/Library/Developer/Xcode/DerivedData/FoundationFramework-awxjohcpgsqcpsanqofqogwbqgbx/Build/Products/Debug</span></span><br><span class="line">    <span class="built_in">NSString</span> *filePath=[currentPath stringByAppendingPathComponent:<span class="string">@"test.txt"</span>];</span><br><span class="line">    [manager createFileAtPath:filePath contents:[<span class="string">@"Hello,world!"</span> dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>] attributes:<span class="literal">nil</span>];</span><br><span class="line">    <span class="comment">//利用NSBundle在程序包所在目录查找对应的文件</span></span><br><span class="line">    <span class="built_in">NSBundle</span> *bundle=[<span class="built_in">NSBundle</span> mainBundle];<span class="comment">//主要操作程序包所在目录</span></span><br><span class="line">    <span class="comment">//如果有test.txt则返回路径，否则返回nil</span></span><br><span class="line">    <span class="built_in">NSString</span> *path=[bundle pathForResource:<span class="string">@"test"</span> ofType:<span class="string">@"txt"</span>];<span class="comment">//也可以写成：[bundle pathForResource:@"instructions.txt" ofType:nil];</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,path);</span><br><span class="line">    <span class="comment">//结果：/Users/kenshincui/Library/Developer/Xcode/DerivedData/FoundationFramework-awxjohcpgsqcpsanqofqogwbqgbx/Build/Products/Debug/test.txt</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[<span class="built_in">NSString</span> stringWithContentsOfFile:path encoding:<span class="built_in">NSUTF8StringEncoding</span> error:<span class="literal">nil</span>]);</span><br><span class="line">    <span class="comment">//结果：Hello,world!</span></span><br><span class="line">    <span class="comment">//假设我们在程序运行创建一个Resources目录，并且其中新建pic.jpg，那么用下面的方法获得这个文件完整路径</span></span><br><span class="line">    <span class="built_in">NSString</span> *path1= [bundle pathForResource:<span class="string">@"pic"</span> ofType:<span class="string">@"jpg"</span> inDirectory:<span class="string">@"Resources"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,path1);</span><br><span class="line">    <span class="comment">//结果：/Users/kenshincui/Library/Developer/Xcode/DerivedData/FoundationFramework-awxjohcpgsqcpsanqofqogwbqgbx/Build/Products/Debug/Resources/pic.jpg</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><h5 id="NSArray"><a href="#NSArray" class="headerlink" title="NSArray"></a>NSArray</h5><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">//NSArray长度不可变所以初始化的时候就赋值，并且最后以nil结尾,此外需要注意NSArray不能存放C语言的基础类型</span></span><br><span class="line"><span class="built_in">NSObject</span> *obj=[[<span class="built_in">NSObject</span> alloc]init];</span><br><span class="line"><span class="built_in">NSArray</span> *array1=[[<span class="built_in">NSArray</span> alloc] initWithObjects:<span class="string">@"abc"</span>,obj,<span class="string">@"cde"</span>,<span class="string">@"opq"</span>, <span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//简便的声明方式</span></span><br><span class="line"><span class="built_in">NSArray</span> *array1=@[<span class="string">@"Mac Pro"</span>, <span class="string">@"Mac mini"</span>, <span class="string">@"iMac"</span>, <span class="string">@"MacBook"</span>, <span class="string">@"MacBook Pro"</span>, <span class="string">@"MacBook Air"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//属性方法</span></span><br><span class="line"><span class="built_in">NSArray</span> *array1=[<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"abc"</span>,obj,<span class="string">@"cde"</span>,<span class="string">@"opq"</span>,@<span class="number">25</span>, <span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%zi"</span>,array1.count);<span class="comment">//数组长度,结果：5</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%i"</span>,[array1 containsObject:<span class="string">@"cde"</span>]);<span class="comment">//是否包含某个对象，结果：1</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[array1 lastObject]);<span class="comment">//最后一个对象，结果：25</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%zi"</span>,[array1 indexOfObject:<span class="string">@"abc"</span>]);<span class="comment">//对象所在的位置：0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//NSArray的类定义方法</span></span><br><span class="line">Person *person1=[Person personWithName:<span class="string">@"Kenshin"</span>];</span><br><span class="line">Person *person2=[Person personWithName:<span class="string">@"Kaoru"</span>];</span><br><span class="line">Person *person3=[Person personWithName:<span class="string">@"Rosa"</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *array2=[[<span class="built_in">NSArray</span> alloc]initWithObjects:person1,person2,person3, <span class="literal">nil</span>];</span><br><span class="line">[array2 makeObjectsPerformSelector:<span class="keyword">@selector</span>(showMessage:) withObject:<span class="string">@"Hello,world!"</span>];<span class="comment">//让数组中的每个元素都调用showMessage </span></span><br><span class="line"><span class="comment">/*结果：</span><br><span class="line">My name is Kenshin,the infomation is "Hello,world!".</span><br><span class="line">My name is Kaoru,the infomation is "Hello,world!".</span><br><span class="line">My name is Rosa,the infomation is "Hello,world!".</span><br><span class="line">*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组的遍历</span></span><br><span class="line"><span class="keyword">void</span> test2()&#123;</span><br><span class="line">    <span class="built_in">NSObject</span> *obj=[[<span class="built_in">NSObject</span> alloc]init];</span><br><span class="line">    <span class="built_in">NSArray</span> *array=[[<span class="built_in">NSArray</span> alloc] initWithObjects:<span class="string">@"abc"</span>,obj,<span class="string">@"cde"</span>,<span class="string">@"opq"</span>,@<span class="number">25</span>, <span class="literal">nil</span>];</span><br><span class="line">    <span class="comment">//方法1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,len=array.count;i&lt;len;++i)&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"method1:index %i is %@"</span>,i,[array objectAtIndex:i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     method1:index 0 is abc</span><br><span class="line">     method1:index 1 is &lt;NSObject: 0x100106de0&gt;</span><br><span class="line">     method1:index 2 is cde</span><br><span class="line">     method1:index 3 is opq</span><br><span class="line">     method1:index 4 is 25</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">//数组的遍历方法2</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">id</span> obj <span class="keyword">in</span> array)&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"method2:index %zi is %@"</span>,[array indexOfObject:obj],obj);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     method2:index 0 is abc</span><br><span class="line">     method2:index 1 is &lt;NSObject: 0x100602f00&gt;</span><br><span class="line">     method2:index 2 is cde</span><br><span class="line">     method2:index 3 is opq</span><br><span class="line">     method2:index 4 is 25</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">//数组的遍历方法3,利用代码块方法</span></span><br><span class="line">[array enumerateObjectsUsingBlock:^(<span class="keyword">id</span> obj, <span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"method3:index %zi is %@"</span>,idx,obj);</span><br><span class="line">        <span class="keyword">if</span>(idx==<span class="number">2</span>)&#123;<span class="comment">//当idx=2时设置*stop为YES停止遍历</span></span><br><span class="line">            *stop=<span class="literal">YES</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     method3:index 0 is abc</span><br><span class="line">     method3:index 1 is &lt;NSObject: 0x100106de0&gt;</span><br><span class="line">     method3:index 2 is cde</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">//数组的遍历方法4，利用迭代器</span></span><br><span class="line"><span class="comment">//NSEnumerator *enumerator= [array objectEnumerator];//获得一个迭代器</span></span><br><span class="line"><span class="built_in">NSEnumerator</span> *enumerator=[array reverseObjectEnumerator];<span class="comment">//获取一个反向迭代器</span></span><br><span class="line"><span class="comment">//NSLog(@"all:%@",[enumerator allObjects]);//获取所有迭代对象，注意调用完此方法迭代器就遍历完了，下面的nextObject就没有值了</span></span><br><span class="line">    <span class="keyword">id</span> obj2=<span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">while</span> (obj2=[enumerator nextObject]) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"method4:%@"</span>,obj2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     method4:25</span><br><span class="line">     method4:opq</span><br><span class="line">     method4:cde</span><br><span class="line">     method4:&lt;NSObject: 0x100106de0&gt;</span><br><span class="line">     method4:abc</span><br><span class="line">     */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组派生出新的数组</span></span><br><span class="line"><span class="keyword">void</span> test3()&#123;</span><br><span class="line"><span class="built_in">NSArray</span> *array=[<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"1"</span>,<span class="string">@"2"</span>,<span class="string">@"3"</span>, <span class="literal">nil</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *array2=[array arrayByAddingObject:<span class="string">@"4"</span>];<span class="comment">//注意此时array并没有变</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array2);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3,</span><br><span class="line">         4</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[array2 arrayByAddingObjectsFromArray:[<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"5"</span>,<span class="string">@"6"</span>, <span class="literal">nil</span>]]);<span class="comment">//追加形成新的数组</span></span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3,</span><br><span class="line">         4,</span><br><span class="line">         5,</span><br><span class="line">         6</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[array2 subarrayWithRange:<span class="built_in">NSMakeRange</span>(<span class="number">1</span>, <span class="number">3</span>)]);<span class="comment">//根据一定范围取得生成一个新的数组</span></span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         2,</span><br><span class="line">         3,</span><br><span class="line">         4</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//数组连接，形成一个字符串    </span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[array componentsJoinedByString:<span class="string">@","</span>]);    <span class="comment">//结果：1,2,3</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//读写文件</span></span><br><span class="line"><span class="built_in">NSString</span> *path=<span class="string">@"/Users/KenshinCui/Desktop/array.xml"</span>;</span><br><span class="line">[array writeToFile:path atomically:<span class="literal">YES</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *array3=[<span class="built_in">NSArray</span> arrayWithContentsOfFile:path];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array3);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组排序</span></span><br><span class="line"><span class="keyword">void</span> test4()&#123;</span><br><span class="line">    <span class="comment">//方法1,使用自带的比较器</span></span><br><span class="line">    <span class="built_in">NSArray</span> *array=[<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"3"</span>,<span class="string">@"1"</span>,<span class="string">@"2"</span>, <span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSArray</span> *array2= [array sortedArrayUsingSelector:<span class="keyword">@selector</span>(compare:)];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array2);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">//数组排序方法2,自己定义比较器</span></span><br><span class="line">    Person *person1=[Person personWithName:<span class="string">@"Kenshin"</span>];</span><br><span class="line">    Person *person2=[Person personWithName:<span class="string">@"Kaoru"</span>];</span><br><span class="line">    Person *person3=[Person personWithName:<span class="string">@"Rosa"</span>];</span><br><span class="line">    <span class="built_in">NSArray</span> *array3=[<span class="built_in">NSArray</span> arrayWithObjects:person1,person2,person3, <span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSArray</span> *array4=[array3 sortedArrayUsingSelector:<span class="keyword">@selector</span>(comparePerson:)];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array4);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         "name=Kaoru",</span><br><span class="line">         "name=Kenshin",</span><br><span class="line">         "name=Rosa"</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">//数组排序方法3使用代码块</span></span><br><span class="line"><span class="built_in">NSArray</span> *array5=[array3 sortedArrayUsingComparator:^<span class="built_in">NSComparisonResult</span>(Person *obj1, Person *obj2) &#123;</span><br><span class="line">        <span class="keyword">return</span> [obj2.name compare:obj1.name];<span class="comment">//降序</span></span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array5);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         "name=Rosa",</span><br><span class="line">         "name=Kenshin",</span><br><span class="line">         "name=Kaoru"</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment">//数组排序方法4 通过描述器定义排序规则</span></span><br><span class="line">Person *person4=[Person personWithName:<span class="string">@"Jack"</span>];</span><br><span class="line">Person *person5=[Person personWithName:<span class="string">@"Jerry"</span>];</span><br><span class="line">Person *person6=[Person personWithName:<span class="string">@"Tom"</span>];</span><br><span class="line">Person *person7=[Person personWithName:<span class="string">@"Terry"</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *array6=[<span class="built_in">NSArray</span> arrayWithObjects:person4,person5,person6,person7, <span class="literal">nil</span>];</span><br><span class="line">    <span class="comment">//定义一个排序描述</span></span><br><span class="line">    <span class="built_in">NSSortDescriptor</span> *personName=[<span class="built_in">NSSortDescriptor</span> sortDescriptorWithKey:<span class="string">@"name"</span> ascending:<span class="literal">YES</span>];</span><br><span class="line">    <span class="built_in">NSSortDescriptor</span> *accountBalance=[<span class="built_in">NSSortDescriptor</span> sortDescriptorWithKey:<span class="string">@"account.balance"</span> ascending:<span class="literal">YES</span>];</span><br><span class="line">    <span class="built_in">NSArray</span> *des=[<span class="built_in">NSArray</span> arrayWithObjects:personName,accountBalance, <span class="literal">nil</span>];<span class="comment">//先按照person的name排序再按照account的balance排序</span></span><br><span class="line">    <span class="built_in">NSArray</span> *array7=[array6 sortedArrayUsingDescriptors:des];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array7);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         "name=Jack",</span><br><span class="line">         "name=Jerry",</span><br><span class="line">         "name=Terry",</span><br><span class="line">         "name=Tom"</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//与可变数组的转化     </span></span><br><span class="line"><span class="built_in">NSArray</span> --&gt; <span class="built_in">NSMutableArray</span>: </span><br><span class="line"><span class="built_in">NSMutableArray</span> *myMutableArray = [myArray mutableCopy];    </span><br><span class="line"><span class="built_in">NSMutableArray</span> --&gt; <span class="built_in">NSArray</span>:</span><br><span class="line"><span class="built_in">NSArray</span> *myArray = [myMutableArray <span class="keyword">copy</span>]; </span><br><span class="line"></span><br><span class="line"><span class="comment">//可变性</span></span><br><span class="line">虽然 <span class="built_in">NSArray</span> 类本身不可变，但它仍可包含可变对象。例如，如果将可变字符串添加到不可变的数组，</span><br><span class="line">如下所示：</span><br><span class="line"><span class="built_in">NSMutableString</span> *mutableString = [<span class="built_in">NSMutableString</span> stringWithString:<span class="string">@"Hello"</span>];</span><br><span class="line"><span class="built_in">NSArray</span> *immutableArray = @[mutableString];</span><br><span class="line">就可让您变异该字符串。</span><br><span class="line"><span class="keyword">if</span> ([immutableArray count] &gt; <span class="number">0</span>) &#123;</span><br><span class="line"><span class="keyword">id</span> string = immutableArray[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">if</span> ([string isKindOfClass:[<span class="built_in">NSMutableString</span> class]]) &#123;</span><br><span class="line">[string appendString:<span class="string">@" World!"</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//NSArray  去重</span></span><br><span class="line">面试题</span><br><span class="line">对数组中的元素去重复 </span><br><span class="line"><span class="built_in">NSArray</span> *array = @[<span class="string">@"12-11"</span>, <span class="string">@"12-11"</span>, <span class="string">@"12-11"</span>, <span class="string">@"12-12"</span>, <span class="string">@"12-13"</span>, <span class="string">@"12-14"</span>];<span class="comment">//推荐的写法</span></span><br><span class="line"></span><br><span class="line">有如下几种方案：</span><br><span class="line">• 第一种方法：开辟新的内存空间，然后判断是否存在，若不存在则添加到数组中，得到最终结果的顺序不发生变化。效率分析：时间复杂度为O ( n2 )：</span><br><span class="line"> </span><br><span class="line"><span class="built_in">NSMutableArray</span> *resultArray = [[<span class="built_in">NSMutableArray</span> alloc] initWithCapacity:array.count];</span><br><span class="line"><span class="comment">// 外层一个循环</span></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSString</span> *item <span class="keyword">in</span> array) &#123;</span><br><span class="line">   <span class="comment">// 调用-containsObject:本质也是要循环去判断，因此本质上是双层遍历</span></span><br><span class="line">   <span class="comment">// 时间复杂度为O ( n^2 )而不是O (n)</span></span><br><span class="line">    <span class="keyword">if</span> (![resultArray containsObject:item]) &#123;</span><br><span class="line">      [resultArray addObject:item];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"resultArray: %@"</span>, resultArray);</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">原来集合操作可以通过valueForKeyPath来实现的，去重可以一行代码实现： </span><br><span class="line">array = [array valueForKeyPath:<span class="string">@"@distinctUnionOfObjects.self"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, array);</span><br><span class="line"> </span><br><span class="line">但是返回的结果是无序的，与原来的顺序不同。</span><br><span class="line"></span><br><span class="line">• 第二种方法：利用<span class="built_in">NSDictionary</span>去重，字典在设置key-value时，若已存在则更新值，若不存在则插入值，然后获取allValues。若不要求有序，则可以采用此种方法。若要求有序，还得进行排序。效率分析：只需要一个循环就可以完成放入字典，若不要求有序，时间复杂度为O(n)。若要求排序，则效率与排序算法有关：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="built_in">NSMutableDictionary</span> *resultDict = [[<span class="built_in">NSMutableDictionary</span> alloc] initWithCapacity:array.count];</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSString</span> *item <span class="keyword">in</span> array) &#123;</span><br><span class="line">    [resultDict setObject:item forKey:item];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">NSArray</span> *resultArray = resultDict.allValues;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, resultArray);</span><br><span class="line"> </span><br><span class="line">如果需要按照原来的升序排序，可以这样：</span><br><span class="line">resultArray = [resultArray sortedArrayUsingComparator:^<span class="built_in">NSComparisonResult</span>(<span class="keyword">id</span>  _Nonnull obj1, <span class="keyword">id</span>  _Nonnull obj2) &#123;</span><br><span class="line">  <span class="built_in">NSString</span> *item1 = obj1;</span><br><span class="line">  <span class="built_in">NSString</span> *item2 = obj2;</span><br><span class="line">  <span class="keyword">return</span> [item1 compare:item2 options:<span class="built_in">NSLiteralSearch</span>];</span><br><span class="line">&#125;];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, resultArray);</span><br><span class="line"></span><br><span class="line">• 第三种方法：利用集合<span class="built_in">NSSet</span>的特性(确定性、无序性、互异性)，放入集合就自动去重了。但是它与字典拥有同样的无序性，所得结果顺序不再与原来一样。如果不要求有序，使用此方法与字典的效率应该是差不多的。效率分析：时间复杂度为O (n)：</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="built_in">NSSet</span> *set = [<span class="built_in">NSSet</span> setWithArray:array];</span><br><span class="line"><span class="built_in">NSArray</span> *resultArray = [set allObjects];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, resultArray);</span><br><span class="line"> </span><br><span class="line">如果要求有序，那就得排序，比如这里要升序排序：</span><br><span class="line"> </span><br><span class="line">resultArray = [resultArray sortedArrayUsingComparator:^<span class="built_in">NSComparisonResult</span>(<span class="keyword">id</span>  _Nonnull obj1, <span class="keyword">id</span>  _Nonnull obj2) &#123;</span><br><span class="line">  <span class="built_in">NSString</span> *item1 = obj1;</span><br><span class="line">  <span class="built_in">NSString</span> *item2 = obj2;</span><br><span class="line">  <span class="keyword">return</span> [item1 compare:item2 options:<span class="built_in">NSLiteralSearch</span>];</span><br><span class="line">&#125;];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, resultArray);</span><br><span class="line"> </span><br><span class="line">补充：</span><br><span class="line">一直没有使用过有序集合，网友们反馈到可以直接使用有序集合，感谢大家：</span><br><span class="line"><span class="built_in">NSOrderedSet</span> *set = [<span class="built_in">NSOrderedSet</span> orderedSetWithArray:array];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, set.array);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//NSArray to NSData</span></span><br><span class="line"><span class="built_in">NSData</span> *arry2data = [<span class="built_in">NSKeyedArchiver</span> archivedDataWithRootObject:array];<span class="comment">//NSData to NSArray</span><span class="built_in">NSArray</span> *data2arry = [<span class="built_in">NSKeyedUnarchiver</span> unarchiveObjectWithData:arry2data];<span class="built_in">NSLog</span>(<span class="string">@"%@  /n %@"</span>,arry2data,data2arry);</span><br><span class="line"><span class="comment">//NSArray to NSString</span></span><br><span class="line"><span class="built_in">NSString</span> *arry2String = [array componentsJoinedByString:<span class="string">@" "</span>];<span class="built_in">NSLog</span>(<span class="string">@"string = %@"</span>,arry2String);</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断数组是否为空</span></span><br><span class="line">有人说可以用（［array count］＝＝<span class="number">0</span> ）来判断是否为空，都是坑，如果array为空的话，执行count就会直接报错，程序崩溃退出。</span><br><span class="line">正确判断<span class="built_in">NSArray</span>是否为空的方法：用 （!array）</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (array != <span class="literal">nil</span> &amp;&amp; ![array isKindOfClass:[<span class="built_in">NSNull</span> class]] &amp;&amp; array.count != <span class="number">0</span>)&#123;</span><br><span class="line"><span class="comment">//执行array不为空时的操作</span></span><br><span class="line">&#125;</span><br><span class="line">这样才是iOS判断数组是否为空的准确方式。</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组过滤</span></span><br><span class="line">需求：在一个数组里面，将在这个数组中的并且在另一个数组里面的元素过滤掉。</span><br><span class="line">即：在一个数组dataArray里面，将在dataArray数组中的并且在filteredArray数组里面的元素过滤掉。</span><br><span class="line"><span class="comment">//iOS-筛选数组内的元素</span><span class="comment">//在dataArray中里面，将在dataArray中的并且在filteredArray数组里面的元素过滤掉</span><span class="comment">//需要去掉的元素数组</span><span class="built_in">NSMutableArray</span> *filteredArray = [[<span class="built_in">NSMutableArray</span> alloc]initWithObjects:<span class="string">@"1"</span>,<span class="string">@"3"</span>,<span class="string">@"9"</span>, <span class="literal">nil</span>];<span class="comment">//需要被筛选的数组</span><span class="built_in">NSMutableArray</span> *dataArray = [[<span class="built_in">NSMutableArray</span> alloc]initWithObjects:<span class="string">@"1"</span>,<span class="string">@"2"</span>,<span class="string">@"3"</span>,<span class="string">@"1"</span>,<span class="string">@"1"</span>,<span class="string">@"3"</span>,<span class="string">@"1"</span>,<span class="string">@"5"</span>,<span class="string">@"7"</span>, <span class="literal">nil</span>];<span class="comment">/*方法一：利用NSPredicate注：NSPredicate所属Cocoa框架，在密码、用户名等正则判断中经常用到。         类似于SQL语句         NOT 不是         SELF 代表字符串本身         IN 范围运算符         那么NOT (SELF IN %@) 意思就是：不是这里所指定的字符串的值         */</span><span class="built_in">NSPredicate</span> * filterPredicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"NOT (SELF IN %@)"</span>,filteredArray];<span class="comment">//过滤数组</span><span class="built_in">NSArray</span> * reslutFilteredArray = [dataArray filteredArrayUsingPredicate:filterPredicate];<span class="built_in">NSLog</span>(<span class="string">@"Reslut Filtered Array = %@"</span>,reslutFilteredArray);  <span class="comment">/*方法二：从后往前遍历数组，然后匹配删除*/</span><span class="keyword">int</span> i = (<span class="keyword">int</span>)[dataArray count]<span class="number">-1</span>;        <span class="keyword">for</span>(;i &gt;= <span class="number">0</span>;i --)&#123;            <span class="comment">//containsObject 判断元素是否存在于数组中(根据两者的内存地址判断，相同：YES  不同：NO）</span>            <span class="keyword">if</span>([filteredArray containsObject:[dataArray objectAtIndex:i]]) &#123;                [dataArray removeObjectAtIndex:i];&#125;&#125;<span class="built_in">NSLog</span>(<span class="string">@"Data Array = %@"</span>,dataArray);</span><br><span class="line"></span><br><span class="line"><span class="comment">//浮点数存入数组</span></span><br><span class="line"><span class="built_in">NSNumber</span> *number = [<span class="built_in">NSNumber</span> numberWithFloat:value];  </span><br><span class="line">[temparray addObject:number;  </span><br><span class="line"><span class="comment">//取出  </span></span><br><span class="line">[[temparray objectAtIndex:<span class="number">0</span>] floatValue]； </span><br><span class="line">需要注意几点：</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSArray</span>中只能存放对象，不能存放基本数据类型，通常我们可以通过在基本数据类型前加@进行转换；</span><br><span class="line"></span><br><span class="line">数组中的元素后面必须加<span class="literal">nil</span>以表示数据结束；</span><br><span class="line"></span><br><span class="line">makeObjectsPerformSelector执行数组中对象的方法，其参数最多只能有一个；</span><br><span class="line"></span><br><span class="line">上面数组操作中无论是数组的追加、删除、截取都没有改变原来的数组，只是产生了新的数组而已；</span><br><span class="line"></span><br><span class="line">对象的比较除了使用系统自带的方法，我们可以通过自定义比较器的方法来实现；</span><br></pre></td></tr></table></figure>
<h5 id="可变数组"><a href="#可变数组" class="headerlink" title="可变数组"></a>可变数组</h5><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> test1()&#123;</span><br><span class="line">    Person *person1=[Person personWithName:<span class="string">@"Kenshin"</span>];</span><br><span class="line">    Person *person2=[Person personWithName:<span class="string">@"Kaoru"</span>];</span><br><span class="line">    Person *person3=[Person personWithName:<span class="string">@"Rosa"</span>];</span><br><span class="line">    <span class="built_in">NSMutableArray</span> *array1=[<span class="built_in">NSMutableArray</span> arrayWithObjects:person1,person2,person3, <span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array1);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         "name=Kenshin",</span><br><span class="line">         "name=Kaoru",</span><br><span class="line">         "name=Rosa"</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    Person *person4=[Person personWithName:<span class="string">@"Jack"</span>];<span class="comment">//此时person4的retainCount为1</span></span><br><span class="line">    [array1 addObject:person4];<span class="comment">//添加一个元素,此时person4的retainCount为2</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array1);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         "name=Kenshin",</span><br><span class="line">         "name=Kaoru",</span><br><span class="line">         "name=Rosa",</span><br><span class="line">         "name=Jack"</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    [array1 removeObject:person3];<span class="comment">//删除一个元素</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array1);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         "name=Kenshin",</span><br><span class="line">         "name=Kaoru",</span><br><span class="line">         "name=Jack"</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    [array1 removeLastObject];<span class="comment">//删除最后一个元素,//此时person4的retainCount为1</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array1);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         "name=Kenshin",</span><br><span class="line">         "name=Kaoru"</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    [array1 removeAllObjects];<span class="comment">//删除所以元素</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//注意当往数组中添加一个元素时会retain因此计数器+1，当从数组中移除一个元素时会release因此计数器-1</span></span><br><span class="line">    <span class="comment">//当NSMutalbeArray对象release的时候会依次调用每一个对象的release</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> test2()&#123;</span><br><span class="line">    <span class="built_in">NSMutableArray</span> *array1=[<span class="built_in">NSMutableArray</span> arrayWithObjects:<span class="string">@"1"</span>,<span class="string">@"3"</span>,<span class="string">@"2"</span>, <span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array1);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         3,</span><br><span class="line">         2</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSArray</span> *array2= [array1 sortedArrayUsingSelector:<span class="keyword">@selector</span>(compare:)];<span class="comment">//注意这个方法没有修改array1</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array1);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         3,</span><br><span class="line">         2</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array2);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    [array1 sortUsingSelector:<span class="keyword">@selector</span>(compare:)];<span class="comment">//这个方法会修改array1</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,array1);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         2,</span><br><span class="line">         3</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//补充</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//NSMutableArray 转json</span></span><br><span class="line"><span class="built_in">NSMutableArray</span> *arr = [[<span class="built_in">NSMutableArray</span> alloc] init];  </span><br><span class="line"><span class="built_in">NSDictionary</span> *params = [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:  </span><br><span class="line">                        <span class="string">@"ni hao"</span>, <span class="string">@"key"</span>,  </span><br><span class="line">                        <span class="string">@"45"</span>, <span class="string">@"value"</span>,  </span><br><span class="line">                        <span class="string">@"USD"</span>, <span class="string">@"code"</span>,<span class="literal">nil</span>];  </span><br><span class="line"><span class="built_in">NSDictionary</span> *params2 = [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:  </span><br><span class="line">                        <span class="string">@"hao"</span>, <span class="string">@"key"</span>,  </span><br><span class="line">                        <span class="string">@"45"</span>, <span class="string">@"value"</span>,  </span><br><span class="line">                        <span class="string">@"USD"</span>, <span class="string">@"code"</span>,<span class="literal">nil</span>]; </span><br><span class="line">[arr addObject:params];  </span><br><span class="line">[arr addObject:params2];  </span><br><span class="line"><span class="built_in">NSDictionary</span> *params3 = [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:  </span><br><span class="line">                          arr, <span class="string">@"json"</span>,  </span><br><span class="line">                         <span class="literal">nil</span> <span class="literal">nil</span>];  </span><br><span class="line"><span class="comment">//convert object to data  </span></span><br><span class="line"><span class="built_in">NSData</span>* jsonData =[<span class="built_in">NSJSONSerialization</span> dataWithJSONObject:params3  </span><br><span class="line">                                                  options:<span class="built_in">NSJSONWritingPrettyPrinted</span> error:&amp;error];    </span><br><span class="line"><span class="comment">//print out the data contents    </span></span><br><span class="line"><span class="built_in">NSString</span>* text =[[<span class="built_in">NSString</span> alloc] initWithData:jsonData  </span><br><span class="line">                                        encoding:<span class="built_in">NSUTF8StringEncoding</span>];    </span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@"json字典里面的内容为--》%@"</span>, text );</span><br><span class="line"></span><br><span class="line">注意：</span><br><span class="line">可变数组中的元素后面必须加<span class="literal">nil</span>以表示数据结束；</span><br><span class="line"></span><br><span class="line">往一个可变数组中添加一个对象，此时这个对象的引用计数器会加<span class="number">1</span>，当这个对象从可变数组中移除其引用计数器减<span class="number">1</span>。同时当整个数组销毁之后会依次调</span><br><span class="line">用每个对象的releaes方法。</span><br><span class="line"></span><br><span class="line">在不可变数组中无论对数组怎么排序，原来的数组顺序都不会改变，但是在可变数组中如果使用sortUsingSelector:排序原来的数组顺序就发生了变化。</span><br></pre></td></tr></table></figure>
<h5 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h5><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> test1()&#123;</span><br><span class="line">    <span class="built_in">NSDictionary</span> *dic1=[<span class="built_in">NSDictionary</span> dictionaryWithObject:<span class="string">@"1"</span> forKey:<span class="string">@"a"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dic1);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     &#123;</span><br><span class="line">        a = 1;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//常用的方式</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *dic2=[<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:</span><br><span class="line">                        <span class="string">@"1"</span>,<span class="string">@"a"</span>,</span><br><span class="line">                        <span class="string">@"2"</span>,<span class="string">@"b"</span>,</span><br><span class="line">                        <span class="string">@"3"</span>,<span class="string">@"c"</span>,</span><br><span class="line">                        <span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dic2);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         a = 1;</span><br><span class="line">         b = 2;</span><br><span class="line">         c = 3;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSDictionary</span> *dic3=[<span class="built_in">NSDictionary</span> dictionaryWithObjects:[<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"1"</span>,<span class="string">@"2"</span>, <span class="literal">nil</span>] forKeys:[<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"a"</span>,<span class="string">@"b"</span>, <span class="literal">nil</span>]];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dic3);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         a = 1;</span><br><span class="line">         b = 2;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//更简单的方式</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *dic4=@&#123;<span class="string">@"1"</span>:<span class="string">@"a"</span>,<span class="string">@"2"</span>:<span class="string">@"b"</span>,<span class="string">@"3"</span>:<span class="string">@"c"</span>&#125;;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dic4);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         1 = a;</span><br><span class="line">         2 = b;</span><br><span class="line">         3 = c;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> test2()&#123;</span><br><span class="line">    <span class="built_in">NSDictionary</span> *dic1=[<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:</span><br><span class="line">                        <span class="string">@"1"</span>,<span class="string">@"a"</span>,</span><br><span class="line">                        <span class="string">@"2"</span>,<span class="string">@"b"</span>,</span><br><span class="line">                        <span class="string">@"3"</span>,<span class="string">@"c"</span>,</span><br><span class="line">                        <span class="string">@"2"</span>,<span class="string">@"d"</span>,</span><br><span class="line">                        <span class="literal">nil</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%zi"</span>,[dic1 count]); <span class="comment">//结果：4</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[dic1 valueForKey:<span class="string">@"b"</span>]);<span class="comment">//根据键取得值，结果：2</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dic1[<span class="string">@"b"</span>]);<span class="comment">//还可以这样读取，结果：2</span></span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@,%@"</span>,[dic1 allKeys],[dic1 allValues]);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         d,</span><br><span class="line">         b,</span><br><span class="line">         c,</span><br><span class="line">         a</span><br><span class="line">     ),(</span><br><span class="line">         2,</span><br><span class="line">         2,</span><br><span class="line">         3,</span><br><span class="line">         1</span><br><span class="line">     )</span><br><span class="line"></span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,[dic1 objectsForKeys:[<span class="built_in">NSArray</span> arrayWithObjects:<span class="string">@"a"</span>,<span class="string">@"e"</span> , <span class="literal">nil</span>]notFoundMarker:<span class="string">@"not fount"</span>]);<span class="comment">//后面一个参数notFoundMarker是如果找不到对应的key用什么值代替</span></span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     (</span><br><span class="line">         1,</span><br><span class="line">         "not fount"</span><br><span class="line">     )</span><br><span class="line">     */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> test3()&#123;</span><br><span class="line">    <span class="built_in">NSDictionary</span> *dic1=[<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:</span><br><span class="line">                        <span class="string">@"1"</span>,<span class="string">@"a"</span>,</span><br><span class="line">                        <span class="string">@"2"</span>,<span class="string">@"b"</span>,</span><br><span class="line">                        <span class="string">@"3"</span>,<span class="string">@"c"</span>,</span><br><span class="line">                        <span class="string">@"2"</span>,<span class="string">@"d"</span>,</span><br><span class="line">                        <span class="literal">nil</span>];</span><br><span class="line">    <span class="comment">//遍历1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">id</span> key <span class="keyword">in</span> dic1) &#123;<span class="comment">//注意对于字典for遍历循环的是key</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@=%@"</span>,key,[dic1 objectForKey:key]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     d=2</span><br><span class="line">     b=2</span><br><span class="line">     c=3</span><br><span class="line">     a=1</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//遍历2</span></span><br><span class="line">    <span class="built_in">NSEnumerator</span> *enumerator=[dic1 keyEnumerator];<span class="comment">//还有值的迭代器[dic1 objectEnumerator]</span></span><br><span class="line">    <span class="keyword">id</span> key=<span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">while</span> (key=[enumerator nextObject]) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@=%@"</span>,key,[dic1 objectForKey:key]);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     d=2</span><br><span class="line">     b=2</span><br><span class="line">     c=3</span><br><span class="line">     a=1</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//遍历3</span></span><br><span class="line">    [dic1 enumerateKeysAndObjectsUsingBlock:^(<span class="keyword">id</span> key, <span class="keyword">id</span> obj, <span class="built_in">BOOL</span> *stop) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@=%@"</span>,key,obj);</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     d=2</span><br><span class="line">     b=2</span><br><span class="line">     c=3</span><br><span class="line">     a=1</span><br><span class="line">     */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> test4()&#123;</span><br><span class="line">    <span class="built_in">NSMutableDictionary</span> *dic=[<span class="built_in">NSMutableDictionary</span> dictionaryWithObjectsAndKeys:<span class="string">@"1"</span>,<span class="string">@"a"</span>,</span><br><span class="line">                              <span class="string">@"2"</span>,<span class="string">@"b"</span>,</span><br><span class="line">                              <span class="string">@"3"</span>,<span class="string">@"c"</span>,</span><br><span class="line">                              <span class="string">@"2"</span>,<span class="string">@"d"</span>,</span><br><span class="line">                            <span class="literal">nil</span>];</span><br><span class="line">    [dic removeObjectForKey:<span class="string">@"b"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dic);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         a = 1;</span><br><span class="line">         c = 3;</span><br><span class="line">         d = 2;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    [dic addEntriesFromDictionary:@&#123;<span class="string">@"e"</span>:<span class="string">@"7"</span>,<span class="string">@"f"</span>:<span class="string">@"6"</span>&#125;];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dic);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         a = 1;</span><br><span class="line">         c = 3;</span><br><span class="line">         d = 2;</span><br><span class="line">         e = 7;</span><br><span class="line">         f = 6;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span></span><br><span class="line">    </span><br><span class="line">    [dic setValue:<span class="string">@"5"</span> forKey:<span class="string">@"a"</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dic);</span><br><span class="line">    <span class="comment">/*结果：</span><br><span class="line">     &#123;</span><br><span class="line">         a = 5;</span><br><span class="line">         c = 3;</span><br><span class="line">         d = 2;</span><br><span class="line">         e = 7;</span><br><span class="line">         f = 6;</span><br><span class="line">     &#125;</span><br><span class="line">     */</span></span><br><span class="line">     </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//注意，一个字典的key或value添加到字典中时计数器+1；字典释放时调用key或value的release一次，计数器-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一些补充</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//判断是否为空</span></span><br><span class="line">![listi isKindOfClass:[<span class="built_in">NSNull</span> class]]</span><br><span class="line"></span><br><span class="line"><span class="comment">//NSDictionary Json</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *dictionary  = [<span class="built_in">NSDictionary</span> dictionaryWithObjectsAndKeys:</span><br><span class="line">myDelegate.reason,<span class="string">@"reason"</span>,</span><br><span class="line">myDelegate.username,<span class="string">@"userName"</span>,<span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSError</span> *parseError = <span class="literal">nil</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSData</span>* jsonData = [<span class="built_in">NSJSONSerialization</span> dataWithJSONObject:dictionary options:<span class="built_in">NSJSONWritingPrettyPrinted</span> error:&amp;parseError];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span>* businessData = [[<span class="built_in">NSString</span> alloc] initWithData:jsonData encoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//NSDictionary to NSData</span></span><br><span class="line"><span class="built_in">NSMutableData</span> *dic2data = [[<span class="built_in">NSMutableData</span> alloc] init];    <span class="built_in">NSKeyedArchiver</span> *archiver = [[<span class="built_in">NSKeyedArchiver</span> alloc] initForWritingWithMutableData:dic2data];    [archiver encodeObject:dic forKey:<span class="string">@"Some Key Value"</span>];    [archiver finishEncoding];    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dic2data);</span><br><span class="line"><span class="comment">//NSData to NSDictionary</span><span class="built_in">NSKeyedUnarchiver</span> *unarchiver = [[<span class="built_in">NSKeyedUnarchiver</span> alloc] initForReadingWithData:dic2data];    <span class="built_in">NSDictionary</span> *data2dic = [unarchiver decodeObjectForKey:<span class="string">@"Some Key Value"</span>];    [unarchiver finishDecoding];    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,data2dic);</span><br><span class="line"></span><br><span class="line"><span class="comment">//NSDictionary to NSString</span><span class="built_in">NSString</span> *dic2string=[dic JSONRepresentation]; <span class="comment">//这个方法是SBJson类库里的，需要导入SBJson.h</span><span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,dic2string);</span><br></pre></td></tr></table></figure>
<h3 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="keyword">bool</span> 是<span class="keyword">int</span></span><br><span class="line"><span class="built_in">BOOL</span> 是<span class="keyword">char</span></span><br><span class="line"><span class="keyword">bool</span> b1 当b1&gt;<span class="number">0</span> 就＝<span class="literal">YES</span></span><br><span class="line"><span class="built_in">BOOL</span> b2 当b2=<span class="number">1</span> 才＝<span class="literal">YES</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//__NSCFBoolean 判断</span></span><br><span class="line"><span class="keyword">if</span> ([[messageDic objectForKey:<span class="string">@"myself"</span>]boolValue] == <span class="literal">NO</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出Bool值</span></span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"ifReadOnly value: %@"</span> ,ifReadOnly?<span class="string">@"YES"</span>:<span class="string">@"NO"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="NSNumber"><a href="#NSNumber" class="headerlink" title="NSNumber"></a>NSNumber</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSNumber</span> *myIntValue = @<span class="number">32</span>;</span><br><span class="line"><span class="built_in">NSNumber</span> *myDoubleValue = @<span class="number">3.22346432</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSNumber</span> *myBoolValue = @YES;</span><br><span class="line"><span class="built_in">NSNumber</span> *myCharValue = @<span class="string">'V'</span>;</span><br><span class="line"></span><br><span class="line">可以创建 <span class="built_in">NSNumber</span> 对象，表示无符号整型 (<span class="keyword">unsigned</span> integers)、长整型 (<span class="keyword">long</span> integers)、长长整型 (<span class="keyword">long</span></span><br><span class="line"><span class="keyword">long</span> integers) 和浮点值 (<span class="keyword">float</span> values)，方法是将字符“U”、“L”、“LL”和“F”分别追加到记号值末尾。例如，</span><br><span class="line">创建封装浮点值的 <span class="built_in">NSNumber</span> 对象，可以编写如下代码：</span><br><span class="line"><span class="built_in">NSNumber</span> *myFloatValue = @<span class="number">3.2</span>F</span><br></pre></td></tr></table></figure>
<h3 id="NSUserDefaults"><a href="#NSUserDefaults" class="headerlink" title="NSUserDefaults"></a>NSUserDefaults</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">//全局的NsUserDefaults	</span></span><br><span class="line"><span class="comment">//AppDelegate.h文件中添加</span> <span class="meta">#define appDelegate ((AppDelegate *)[[UIApplication sharedApplication] delegate])</span><span class="keyword">@property</span> (<span class="keyword">assign</span>, <span class="keyword">nonatomic</span>)<span class="built_in">NSUserDefaults</span> *appDefault;</span><br><span class="line">	</span><br><span class="line"><span class="comment">//AppDelegate.m文件中添加</span><span class="keyword">@synthesize</span> appDefault;appDelegate.appDefault = [<span class="built_in">NSUserDefaults</span> standardUserDefaults];</span><br><span class="line">	</span><br><span class="line"><span class="comment">//顺带初始化下</span></span><br><span class="line">[appDelegate.appDefault setObject:<span class="literal">NULL</span> forKey:<span class="string">@"one"</span>];</span><br><span class="line">	</span><br><span class="line"><span class="comment">//存数据</span>[appDelegate.appDefault setObject:<span class="string">@"122333"</span> forKey:<span class="string">@"one"</span>];<span class="comment">//读数据</span>[appDelegate.appDefault objectForKey:<span class="string">@"one"</span>]</span><br></pre></td></tr></table></figure>
<h3 id="NSobject"><a href="#NSobject" class="headerlink" title="NSobject"></a>NSobject</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSobject</span>常见的类方法有:alloc、new（基本等同于[[alloc]init],缺点是无法调用initWith等方法了）、description等。</span><br></pre></td></tr></table></figure>
<h3 id="NSLocale"><a href="#NSLocale" class="headerlink" title="NSLocale"></a>NSLocale</h3><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="built_in">NSLocale</span>可以获取用户的本地化信息设置，例如货币类型，国家，语言，数字，日期格式的格式化，提供正确的地理位置显示等等。下面的代码获取机器当前语言和国家代码。</span><br><span class="line"><span class="comment">//Getting the User’s Language  </span></span><br><span class="line"><span class="built_in">NSArray</span> *languageArray = [<span class="built_in">NSLocale</span> preferredLanguages];  </span><br><span class="line"><span class="built_in">NSString</span> *language = [languageArray objectAtIndex:<span class="number">0</span>];  </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"语言：%@"</span>, language);<span class="comment">//en  </span></span><br><span class="line"><span class="built_in">NSLocale</span> *locale = [<span class="built_in">NSLocale</span> currentLocale];  </span><br><span class="line"><span class="built_in">NSString</span> *country = [locale localeIdentifier];  </span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"国家：%@"</span>, country); <span class="comment">//en_US</span></span><br></pre></td></tr></table></figure>
	  

	  <div>
  		<center>
		  <div class="pagination">
<ul class="pagination">
	
	
	
	
	
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
			
		
	
		
	
		
	
		
	
		
	
	
	
		<li class="prev"><a href="/2016/06/15/iOS/Block/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>prev</a></li>
	
	<li><a href="/"><i class="fa fa-archive"></i>Home</a></li>
	
		<li class="next disabled"><a>next<i class="fa fa-arrow-circle-o-right"></i></a></li>
	
</ul>
</div>

		</center>
	  </div>
	  
	</div> <!-- col-md-9/col-md-12 -->
	
  </div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
	<footer> <p>
  &copy; 2016 John Doe
  
      with help from <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-wixo/">Wixo</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.tableofcontents.min.js"></script>
<script src="/js/tocgenerator.min.js"></script>
<script src="/js/main.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>
