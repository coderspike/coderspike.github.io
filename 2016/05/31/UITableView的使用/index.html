<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="精于心 简于形" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="UITableView是使用最多的UI控件之一，非常重要，以下内容来自网上一些优秀文章的摘录和自己日常使用中的心得。">
<meta property="og:type" content="article">
<meta property="og:title" content="UITableView的使用">
<meta property="og:url" content="http://yoursite.com/2016/05/31/UITableView的使用/index.html">
<meta property="og:site_name" content="精于心 简于形">
<meta property="og:description" content="UITableView是使用最多的UI控件之一，非常重要，以下内容来自网上一些优秀文章的摘录和自己日常使用中的心得。">
<meta property="og:updated_time" content="2016-07-12T04:21:12.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="UITableView的使用">
<meta name="twitter:description" content="UITableView是使用最多的UI控件之一，非常重要，以下内容来自网上一些优秀文章的摘录和自己日常使用中的心得。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2016/05/31/UITableView的使用/"/>

  <title> UITableView的使用 | 精于心 简于形 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?e46a6e51942322a686b07c098b48d4e4";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">精于心 简于形</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">iOS Road</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-code">
          <a href="/categories/编程" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            编程
          </a>
        </li>
      
        
        <li class="menu-item menu-item-life">
          <a href="/categories/生活" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            生活
          </a>
        </li>
      
        
        <li class="menu-item menu-item-book">
          <a href="/categories/读书" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            读书
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                UITableView的使用
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-05-31T10:19:25+08:00" content="2016-05-31">
              2016-05-31
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/编程/" itemprop="url" rel="index">
                    <span itemprop="name">编程</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/05/31/UITableView的使用/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/05/31/UITableView的使用/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>UITableView是使用最多的UI控件之一，非常重要，以下内容来自网上一些优秀文章的摘录和自己日常使用中的心得。</p>
</blockquote>
<a id="more"></a>
<hr>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><blockquote>
<p>UITableView继承自UIScrollView，基本配置主要是通过两个协议，UITableViewDataSource（提供显示用的数据）和UITableViewDelegate（用来控制tableview的选择section的头和尾的显示），有两种风格Plain和Grouped。UITableView中显示的每一个单元都是一个UITableViewCell对象在tableView快速滑动的滑动的过程中，频繁的alloc对象是比较费时的，于是引入了cell的重用机制。简单的理解就是：UITableView只会创建一屏幕（或一屏幕多一点）的UITableViewCell，其他都是从中取出来重用的。每当Cell滑出屏幕时，就会放入到一个集合（或数组）中（这里就相当于一个重用池），当要显示某一位置的Cell时，会先去集合（或数组）中取，如果有，就直接拿来显示；如果没有，才会创建。这样做的好处可想而知，极大的减少了内存的开销。另外还有几点：<br>1、UITableView需要一个数据源(dataSource)来显示数据<br>2、UITableView会向数据源查询一共有多少行数据以及每一行显示什么数据等<br>3、没有设置数据源的UITableView只是个空壳<br>4、凡是遵守UITableViewDataSource协议的OC对象，都可以是UITableView的数据源</p>
</blockquote>
<h2 id="UITableView的常见属性"><a href="#UITableView的常见属性" class="headerlink" title="UITableView的常见属性"></a>UITableView的常见属性</h2><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* tableView的样式 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">UITableViewStyle</span> style;</span><br><span class="line"><span class="comment">// tableView有两种样式</span></span><br><span class="line"><span class="comment">//     UITableViewStylePlain  普通的表格样式</span></span><br><span class="line"><span class="comment">//    UITableViewStyleGrouped  分组模式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* tableView的数据源 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>, nullable) <span class="keyword">id</span> &lt;<span class="built_in">UITableViewDataSource</span>&gt; dataSource;</span><br><span class="line"><span class="comment">/* tableView的代理 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">weak</span>, nullable) <span class="keyword">id</span> &lt;<span class="built_in">UITableViewDelegate</span>&gt; delegate;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 高度相关</span></span><br><span class="line"><span class="comment">/* tableView每一行的高度，默认为44 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> rowHeight;</span><br><span class="line"><span class="comment">/* tableView统一的每一组头部的高度 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> sectionHeaderHeight;</span><br><span class="line"><span class="comment">/* tableView统一的每一组头部的高度 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> sectionFooterHeight;</span><br><span class="line"><span class="comment">/* 估算的tableView的统一的每一行行高 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> estimatedRowHeight;</span><br><span class="line"><span class="comment">/* 估算的统一的每一组头部高度，设置估算高度可以优化性能 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> estimatedSectionHeaderHeight;</span><br><span class="line"><span class="comment">/* 估算的统一的每一组的尾部高度 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> estimatedSectionFooterHeight;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 总共有多少组 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">NSInteger</span> numberOfSections;</span><br><span class="line"><span class="comment">/* 选中行的indexPath */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, nullable) <span class="built_in">NSIndexPath</span> *indexPathForSelectedRow;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 索引条</span></span><br><span class="line"><span class="comment">/* 索引条文字的颜色 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, nullable) <span class="built_in">UIColor</span> *sectionIndexColor;</span><br><span class="line"><span class="comment">/* 索引条的背景色 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, nullable) <span class="built_in">UIColor</span> *sectionIndexBackgroundColor;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 分隔线</span></span><br><span class="line"><span class="comment">/* 分隔线的样式 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">UITableViewCellSeparatorStyle</span> separatorStyle;</span><br><span class="line"><span class="comment">// 分隔线的样式有：</span></span><br><span class="line"><span class="comment">// UITableViewCellSeparatorStyleNone,  没有分隔线</span></span><br><span class="line"><span class="comment">// UITableViewCellSeparatorStyleSingleLine, 正常分隔线</span></span><br><span class="line"><span class="comment">/*  分隔线的颜色 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, nullable) <span class="built_in">UIColor</span> *separatorColor; </span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 头尾部控件</span></span><br><span class="line"><span class="comment">/* tableView的头部控件，只能设置高度，宽度默认填充表格 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, nullable) <span class="built_in">UIView</span> *tableHeaderView;</span><br><span class="line"><span class="comment">/* tableView的尾部控件，只能设置高度，宽度默认填充表格*/</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, nullable) <span class="built_in">UIView</span> *tableFooterView;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - 编辑模式</span></span><br><span class="line"><span class="comment">/* 是否是编辑模式，默认是NO */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, getter=isEditing) <span class="built_in">BOOL</span> editing;</span><br><span class="line"><span class="comment">/* tableView处在编辑模式的时候是否允许选中行，默认是NO */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> allowsSelectionDuringEditing;</span><br><span class="line"><span class="comment">/* tableView处在编辑模式的时候是否允许选中多行数据，默认是NO */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> allowsMultipleSelectionDuringEditing;</span><br></pre></td></tr></table></figure>
<h2 id="UITableViewCell"><a href="#UITableViewCell" class="headerlink" title="UITableViewCell"></a>UITableViewCell</h2><h5 id="cell的重用原理"><a href="#cell的重用原理" class="headerlink" title="cell的重用原理"></a>cell的重用原理</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">iOS设备的内存有限，如果用UITableView显示成千上万条数据，就需要成千上万个UITableViewCell对象的话，那将会耗尽iOS设备的内存。要解决该问题，需要重用UITableViewCell对象。</span><br><span class="line"></span><br><span class="line">重用原理：当滚动列表时，部分UITableViewCell会移出窗口，UITableView会将窗口外的UITableViewCell放入一个缓存池中，等待重用。当UITableView要求dataSource返回UITableViewCell时，dataSource会先查看这个缓存池，如果池中有未使用的UITableViewCell，dataSource会用新的数据配置这个UITableViewCell，然后返回给UITableView，重新显示到窗口中，从而避免创建新对象。</span><br><span class="line"></span><br><span class="line">还有一个非常重要的问题：有时候需要自定义UITableViewCell(用一个子类继承UITableViewCell)，而且每一行用的不一定是同一种UITableViewCell，所以一个UITableView可能拥有不同类型的UITableViewCell，缓存池中也会有很多不同类型的UITableViewCell，那么UITableView在重用UITableViewCell时可能会得到错误类型的UITableViewCell。</span><br><span class="line"></span><br><span class="line">解决方案：UITableViewCell有个NSString *reuseIdentifier属性，可以在初始化UITableViewCell的时候传入一个特定的字符串标识来设置reuseIdentifier(一般用UITableViewCell的类名)。当UITableView要求dataSource返回UITableViewCell时，先通过一个字符串标识到缓存池中查找对应类型的UITableViewCell对象，如果有，就重用，如果没有，就传入这个字符串标识来初始化一个UITableViewCell对象。</span><br></pre></td></tr></table></figure>
<h5 id="常用属性"><a href="#常用属性" class="headerlink" title="常用属性"></a>常用属性</h5><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="meta">#pragma mark - Cell内部子控件</span></span><br><span class="line"><span class="comment">/*  默认为nil，imageView是懒加载，用到时才加载 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>, nullable) <span class="built_in">UIImageView</span> *imageView;</span><br><span class="line"><span class="comment">/* 默认为nil，是懒加载，用到时才加载 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>, nullable) <span class="built_in">UILabel</span> *textLabel;</span><br><span class="line"><span class="comment">/* 只有当Cell的样式为UITableViewCellStyleSubtitle时才会显示出来，默认为nil，是懒加载，用到时才加载 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>, nullable) <span class="built_in">UILabel</span> *detailTextLabel;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 当你想要自定义一个cell的时候，子控件最好添加到cell的contentView上，方便编辑表格 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) <span class="built_in">UIView</span> *contentView;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* cell的复用标识 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">copy</span>, nullable) <span class="built_in">NSString</span> *reuseIdentifier;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* cell的选中样式 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">UITableViewCellSelectionStyle</span>   selectionStyle;</span><br><span class="line"><span class="comment">/* cell是否是选中状态 */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, getter=isSelected) <span class="built_in">BOOL</span>  selected;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* cell的编辑样式，默认是UITableViewCellEditingStyleNone */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">UITableViewCellEditingStyle</span> editingStyle;</span><br><span class="line"><span class="comment">// cell的编辑样式有：</span></span><br><span class="line"><span class="comment">// UITableViewCellEditingStyleNone,</span></span><br><span class="line"><span class="comment">// UITableViewCellEditingStyleDelete, 删除模式</span></span><br><span class="line"><span class="comment">// UITableViewCellEditingStyleInsert   插入模式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 指示器的样式，默认是UITableViewCellAccessoryNone */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">UITableViewCellAccessoryType</span> accessoryType;</span><br><span class="line"><span class="comment">// 指示器的样式有：</span></span><br><span class="line"><span class="comment">// UITableViewCellAccessoryNone   不显示指示器</span></span><br><span class="line"><span class="comment">// UITableViewCellAccessoryDisclosureIndicator cell右侧显示一个箭头</span></span><br><span class="line"><span class="comment">// UITableViewCellAccessoryDetailDisclosureButton cell右侧显示一个箭头和一个详情图标</span></span><br><span class="line"><span class="comment">// UITableViewCellAccessoryCheckmark cell右侧显示一个对勾</span></span><br><span class="line"><span class="comment">// UITableViewCellAccessoryDetailButton cell右侧显示一个详情图标</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* cell右侧指示器view，设置了以后，cell的accessoryType就会失效  */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, nullable) <span class="built_in">UIView</span> *accessoryView;</span><br></pre></td></tr></table></figure>
<h2 id="UITableView的常用方法"><a href="#UITableView的常用方法" class="headerlink" title="UITableView的常用方法"></a>UITableView的常用方法</h2><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 全局刷新 */</span></span><br><span class="line">- (<span class="keyword">void</span>)reloadData;</span><br><span class="line"><span class="comment">/* 刷新索引条 */</span></span><br><span class="line">- (<span class="keyword">void</span>)reloadSectionIndexTitles;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 返回第section组有多少行 */</span></span><br><span class="line">- (<span class="built_in">NSInteger</span>)numberOfRowsInSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line"><span class="comment">/* 返回indexPath对应的那一行的cell */</span></span><br><span class="line">- (nullable __kindof <span class="built_in">UITableViewCell</span> *)cellForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 返回第section组的头部view */</span></span><br><span class="line">- (nullable <span class="built_in">UITableViewHeaderFooterView</span> *)headerViewForSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line"><span class="comment">/* 返回第section组的尾部view */</span></span><br><span class="line">- (nullable <span class="built_in">UITableViewHeaderFooterView</span> *)footerViewForSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  插入数据,刷新数据</span><br><span class="line"> *  @param indexPaths 插入在哪个位置</span><br><span class="line"> *  @param animation  动画效果，枚举UITableViewRowAnimation</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)insertRowsAtIndexPaths:(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSIndexPath</span> *&gt; *)indexPaths withRowAnimation:(<span class="built_in">UITableViewRowAnimation</span>)animation;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  删除数据</span><br><span class="line"> *  @param indexPaths 删除数据的位置</span><br><span class="line"> *  @param animation  动画效果，枚举UITableViewRowAnimation</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)deleteRowsAtIndexPaths:(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSIndexPath</span> *&gt; *)indexPaths withRowAnimation:(<span class="built_in">UITableViewRowAnimation</span>)animation;</span><br><span class="line"><span class="comment">// 枚举UITableViewRowAnimation包括：</span></span><br><span class="line"><span class="comment">// UITableViewRowAnimationFade,  淡入淡出</span></span><br><span class="line"><span class="comment">// UITableViewRowAnimationRight,  向右滑动</span></span><br><span class="line"><span class="comment">// UITableViewRowAnimationLeft,  向左滑动</span></span><br><span class="line"><span class="comment">// UITableViewRowAnimationTop,  向上滑动</span></span><br><span class="line"><span class="comment">// UITableViewRowAnimationBottom,  向下滑动</span></span><br><span class="line"><span class="comment">// UITableViewRowAnimationNone,  无动画效果,iOS 3.0以后可用</span></span><br><span class="line"><span class="comment">// UITableViewRowAnimationMiddle,  保持cell的中间，iOS 3.2以后可用</span></span><br><span class="line"><span class="comment">// UITableViewRowAnimationAutomatic  自动选择一个合适的动画效果</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  刷新某一行的数据</span><br><span class="line"> *  @param indexPaths 刷新数据的位置</span><br><span class="line"> *  @param animation  动画效果，枚举UITableViewRowAnimation</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)reloadRowsAtIndexPaths:(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSIndexPath</span> *&gt; *)indexPaths withRowAnimation:(<span class="built_in">UITableViewRowAnimation</span>)animation;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 动画开启/关闭编辑模式 */</span></span><br><span class="line">- (<span class="keyword">void</span>)setEditing:(<span class="built_in">BOOL</span>)editing animated:(<span class="built_in">BOOL</span>)animated;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 返回一个带有复用标识的cell */</span></span><br><span class="line">- (nullable __kindof <span class="built_in">UITableViewCell</span> *)dequeueReusableCellWithIdentifier:(<span class="built_in">NSString</span> *)identifier;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  使用xib时注册自定义的cell</span><br><span class="line"> *  @param nib        要注册的nib</span><br><span class="line"> *  @param identifier 复用标识</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)registerNib:(nullable <span class="built_in">UINib</span> *)nib forCellReuseIdentifier:(<span class="built_in">NSString</span> *)identifier;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *   代码自定义cell时注册自定义的cell</span><br><span class="line"> *  @param cellClass  注册的自定义cell的类型</span><br><span class="line"> *  @param identifier 复用标识</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)registerClass:(nullable Class)cellClass forCellReuseIdentifier:(<span class="built_in">NSString</span> *)identifier;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 初始化一个带有复用标识的cell */</span></span><br><span class="line">- (instancetype)initWithStyle:(<span class="built_in">UITableViewCellStyle</span>)style reuseIdentifier:(nullable <span class="built_in">NSString</span> *)reuseIdentifier</span><br></pre></td></tr></table></figure>
<h2 id="UITableViewDataSource中的常用方法"><a href="#UITableViewDataSource中的常用方法" class="headerlink" title="UITableViewDataSource中的常用方法"></a>UITableViewDataSource中的常用方法</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// 必须实现的方法：</span><br><span class="line">/* 设置第section组有多少行数据 */</span><br><span class="line">- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;</span><br><span class="line">/* 设置每一行cell的内容，每当有一个cell进入视野屏幕的时候就会调用这个方法，所以在这个方法内部进行优化（cell的复用） */</span><br><span class="line">- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;</span><br><span class="line"></span><br><span class="line">// 可实现可不实现的方法：</span><br><span class="line">/* 总共有多少组，如果不实现，默认是一组 */</span><br><span class="line">- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;</span><br><span class="line"></span><br><span class="line">/* 第section组的头部标题 */</span><br><span class="line">- (nullable NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section;</span><br><span class="line">/* 第section组的尾部标题 */</span><br><span class="line">- (nullable NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section;</span><br><span class="line"></span><br><span class="line">/** 设置索引条 */</span><br><span class="line">- (nullable NSArray&lt;NSString *&gt; *)sectionIndexTitlesForTableView:(UITableView *)tableView;</span><br></pre></td></tr></table></figure>
<h2 id="UITableViewDelegate中的常用方法"><a href="#UITableViewDelegate中的常用方法" class="headerlink" title="UITableViewDelegate中的常用方法"></a>UITableViewDelegate中的常用方法</h2><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** 设置每一行cell的高度 */</span></span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line"><span class="comment">/** 设置第section组的头部高度 */</span></span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForHeaderInSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line"><span class="comment">/** 设置第section组的尾部高度 */</span></span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForFooterInSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 每一行的估算高度 */</span></span><br><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView estimatedHeightForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 设置第section组的headerView */</span></span><br><span class="line">- (nullable <span class="built_in">UIView</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView viewForHeaderInSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line"><span class="comment">/** 设置第section组的footerView */</span></span><br><span class="line">- (nullable <span class="built_in">UIView</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView viewForFooterInSection:(<span class="built_in">NSInteger</span>)section;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 选中了某一行cell的时候就会调用这个方法 */</span></span><br><span class="line">- (<span class="keyword">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didSelectRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  设置左滑删除按钮的文字</span><br><span class="line"> *  @param tableView         被编辑的tableView</span><br><span class="line"> *  @param indexPath         indexPath</span><br><span class="line"> *  @return 返回删除按钮显示的文字</span><br><span class="line"> */</span></span><br><span class="line">- (nullable <span class="built_in">NSString</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView titleForDeleteConfirmationButtonForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  创建一个左滑出现按钮的操作（UITableViewRowAction）数组</span><br><span class="line"> *  @param tableView         添加操作的tableView</span><br><span class="line"> *  @param indexPath         indexPath，可以指定每一行有不同的效果</span><br><span class="line"> *  @return 返回一个操作（UITableViewRowAction）数组</span><br><span class="line"> */</span></span><br><span class="line">- (nullable <span class="built_in">NSArray</span>&lt;<span class="built_in">UITableViewRowAction</span> *&gt; *)tableView:(<span class="built_in">UITableView</span> *)tableView editActionsForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  移动cell</span><br><span class="line"> *  @param tableView            操作的tableView</span><br><span class="line"> *  @param sourceIndexPath      移动的行</span><br><span class="line"> *  @param destinationIndexPath 目标行</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView moveRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)sourceIndexPath toIndexPath:(<span class="built_in">NSIndexPath</span> *)destinationIndexPath;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 根据editingStyle处理是删除还是添加操作，完成删除、插入操作刷新表格 */</span></span><br><span class="line">- (<span class="keyword">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView commitEditingStyle:(<span class="built_in">UITableViewCellEditingStyle</span>)editingStyle forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  设置表格编辑模式，不实现默认都是删除</span><br><span class="line"> *  @param tableView 操作的tableView</span><br><span class="line"> *  @param indexPath cell的位置</span><br><span class="line"> *  @return 返回表格编辑样式</span><br><span class="line"> */</span></span><br><span class="line">- (<span class="built_in">UITableViewCellEditingStyle</span>)tableView:(<span class="built_in">UITableView</span> *)tableView editingStyleForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath;</span><br></pre></td></tr></table></figure>
<h2 id="tableView展示数据的过程"><a href="#tableView展示数据的过程" class="headerlink" title="tableView展示数据的过程"></a>tableView展示数据的过程</h2><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()&lt;<span class="title">UITableViewDataSource</span>,<span class="title">UITableViewDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">weak</span>, <span class="keyword">nonatomic</span>) <span class="keyword">IBOutlet</span> <span class="built_in">UITableView</span> *tableView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">self</span>.tableView.dataSource = <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - UITableViewDataSource</span></span><br><span class="line">- (<span class="built_in">NSInteger</span>)numberOfSectionsInTableView:(<span class="built_in">UITableView</span> *)tableView&#123;</span><br><span class="line">    <span class="comment">// 在这个方法中设置总共有多少组数据</span></span><br><span class="line">    <span class="comment">// 这个方法如果不实现，默认是一组</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSInteger</span>)tableView:(<span class="built_in">UITableView</span> *)tableView numberOfRowsInSection:(<span class="built_in">NSInteger</span>)section&#123;</span><br><span class="line">    <span class="comment">// 在这个方法中设置第section组有多行数据</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UITableViewCell</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView cellForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath&#123;</span><br><span class="line">    <span class="comment">// 1.定义一个cell的复用标识</span></span><br><span class="line">      <span class="keyword">static</span> <span class="built_in">NSString</span> *ID = <span class="string">@"cell"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.根据复用标识，从缓存池中取出带有同样的复用标识的cell</span></span><br><span class="line">      <span class="built_in">UITableViewCell</span> *cell = [tableView dequeueReusableCellWithIdentifier:ID];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.如果缓存池中没有带有这种复用标识的cell，就创建一个带有这种复用标识的cell</span></span><br><span class="line">      <span class="keyword">if</span> (cell == <span class="literal">nil</span>) &#123;</span><br><span class="line">        cell = [[<span class="built_in">UITableViewCell</span> alloc] initWithStyle:<span class="built_in">UITableViewCellStyleSubtitle</span> reuseIdentifier:ID];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.设置cell的一些属性</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cell;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView titleForFooterInSection:(<span class="built_in">NSInteger</span>)section&#123;</span><br><span class="line">    <span class="comment">// 在这个方法中设置第section组的尾部标题</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView titleForHeaderInSection:(<span class="built_in">NSInteger</span>)section&#123;</span><br><span class="line">    <span class="comment">// 在这个方法中设置第section组的头部标题</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma mark - UITableViewDelegate</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView didSelectRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath&#123;</span><br><span class="line">    <span class="comment">// 当选中了某一行的时候就会调用这个方法，可以在这里进行一些操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="一些补充"><a href="#一些补充" class="headerlink" title="一些补充"></a>一些补充</h2><figure class="highlight objectivec"><table><tr><td class="code"><pre><span class="line">更改Cell的背景</span><br><span class="line"><span class="built_in">UIView</span> *myview = [[<span class="built_in">UIView</span> alloc] init]; </span><br><span class="line">myview.frame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">320</span>, <span class="number">47</span>); </span><br><span class="line">myview.backgroundColor = [<span class="built_in">UIColorcolorWithPatternImage</span>:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"0006.png"</span>]]; </span><br><span class="line">cell.selectedBackgroundView = myview;</span><br><span class="line"></span><br><span class="line">更改Cell的标题</span><br><span class="line">cell.backgroundColor = [<span class="built_in">UIColorscrollViewTexturedBackgroundColor</span>]; </span><br><span class="line"><span class="comment">// 设置文字的字体  </span></span><br><span class="line">cell.textLabel.font = [<span class="built_in">UIFont</span> fontWithName:<span class="string">@"AmericanTypewriter"</span> size:<span class="number">100.0</span>f]; </span><br><span class="line"><span class="comment">// 设置文字的颜色  </span></span><br><span class="line">cell.textLabel.textColor = [<span class="built_in">UIColor</span> orangeColor]; </span><br><span class="line"><span class="comment">// 设置文字的背景颜色  </span></span><br><span class="line">cell.textLabel.shadowColor = [<span class="built_in">UIColor</span> whiteColor]; </span><br><span class="line"><span class="comment">// 设置文字的显示位置  </span></span><br><span class="line">cell.textLabel.textAlignment = <span class="built_in">UITextAlignmentCenter</span>; </span><br><span class="line"></span><br><span class="line">默认选中某一行</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSIndexPath</span> *ip=[<span class="built_in">NSIndexPath</span> indexPathForRow:<span class="number">0</span> inSection:<span class="number">2</span>];  </span><br><span class="line">[tableView selectRowAtIndexPath:ip animated:<span class="literal">YES</span> scrollPosition:<span class="built_in">UITableViewScrollPositionBottom</span>];  </span><br><span class="line"></span><br><span class="line"><span class="built_in">NSIndexPath</span> *path=[<span class="built_in">NSIndexPath</span> indexPathForItem:<span class="number">0</span> inSection:<span class="number">2</span>];  </span><br><span class="line">[<span class="keyword">self</span> tableView:tableView didSelectRowAtIndexPath:path];  </span><br><span class="line"></span><br><span class="line">手绘分割线：</span><br><span class="line"> <span class="keyword">if</span>(indexPath.row&gt;<span class="number">0</span> &amp;&amp; indexPath.row&lt;=[<span class="keyword">self</span>.basicData count])&#123;</span><br><span class="line">        <span class="keyword">self</span>.tableView.separatorStyle=<span class="built_in">UITableViewCellSeparatorStyleNone</span>;</span><br><span class="line">        <span class="built_in">UIView</span>* separatorLineView = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">320</span>, <span class="number">0.5</span>)];<span class="comment">/// change size as you need.</span></span><br><span class="line">        separatorLineView.backgroundColor = [<span class="built_in">UIColor</span> grayColor];<span class="comment">// you can also put image here</span></span><br><span class="line">        [cell.contentView addSubview:separatorLineView];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">删除之前选中的行：</span><br><span class="line">- (<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated</span><br><span class="line">&#123;</span><br><span class="line">	[<span class="keyword">super</span> viewWillAppear:animated];</span><br><span class="line">	<span class="comment">// this UIViewController is about to re-appear, make sure we remove the current selection in our table view</span></span><br><span class="line">	<span class="built_in">NSIndexPath</span> *tableSelection = [<span class="keyword">self</span>.tableView indexPathForSelectedRow];</span><br><span class="line">	[<span class="keyword">self</span>.tableView deselectRowAtIndexPath:tableSelection animated:<span class="literal">NO</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">多选：</span><br><span class="line">[uitableview本身就提供多选功能，选中的状态的管理不需要自己再维护。允许uitableivew多选设置一个属性就可以了,这时]:</span><br><span class="line"><span class="keyword">self</span>.tableView.allowsMultipleSelectionDuringEditing=<span class="literal">YES</span>;</span><br><span class="line">[<span class="keyword">self</span>.tableView setEditing:<span class="literal">YES</span>]; <span class="comment">//////设置uitableview为编译状态</span></span><br><span class="line"><span class="comment">//同时还有一个属性保存了你当前选择的indexPath集合</span></span><br><span class="line"><span class="built_in">NSArray</span> *indexPaths =[<span class="keyword">self</span>.tableView indexPathsForSelectedRows];</span><br><span class="line"></span><br><span class="line">重新设置uitableView的大小：</span><br><span class="line">- (<span class="keyword">void</span>)viewDidAppear:(<span class="built_in">BOOL</span>)animated&#123;    [<span class="keyword">self</span>.tableView setFrame:<span class="built_in">CGRectMake</span>(x, y, w, h)];&#125;</span><br><span class="line"></span><br><span class="line">隐藏多余的分割线:</span><br><span class="line"><span class="keyword">self</span>.tableView.tableFooterView=[[<span class="built_in">UIView</span> alloc] init]; <span class="comment">// hide line</span></span><br><span class="line"></span><br><span class="line">动态添加行：</span><br><span class="line"><span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;  </span><br><span class="line">        <span class="keyword">self</span>.dataSourceArray= a new Array.  </span><br><span class="line">        [<span class="keyword">self</span>.tableView reloadData];  </span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line">在一个<span class="built_in">UIview</span>中添加<span class="built_in">UItableview</span>：</span><br><span class="line">TODOTableViewController  *todo = [[TODOTableViewController alloc] init];</span><br><span class="line">    todo.view.autoresizingMask = <span class="built_in">UIViewAutoresizingNone</span>;</span><br><span class="line">    [<span class="keyword">self</span> addChildViewController:todo];</span><br><span class="line">    todo.view.frame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">200</span>, <span class="keyword">self</span>.view.bounds.size.width, <span class="keyword">self</span>.view.bounds.size.height);</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:todo.view];</span><br><span class="line">    [todo didMoveToParentViewController:<span class="keyword">self</span>];</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    </span><br><span class="line">点击行不变色：</span><br><span class="line">    cell.selectionStyle = <span class="built_in">UITableViewCellSelectionStyleNone</span>;</span><br><span class="line">    </span><br><span class="line">实现<span class="built_in">UItableview</span>的cell侧滑出现多个按钮：</span><br><span class="line">-(<span class="built_in">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView canEditRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="built_in">UITableViewCellEditingStyle</span>)tableView:(<span class="built_in">UITableView</span> *)tableView editingStyleForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span>  <span class="built_in">UITableViewCellEditingStyleDelete</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">-(<span class="keyword">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView commitEditingStyle:(<span class="built_in">UITableViewCellEditingStyle</span>)editingStyle forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath&#123;</span><br><span class="line">    <span class="keyword">if</span> (editingStyle == <span class="built_in">UITableViewCellEditingStyleDelete</span>) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.dataSource removeObjectAtIndex:indexPath.row];</span><br><span class="line">        [<span class="keyword">self</span>.tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:<span class="built_in">UITableViewRowAnimationAutomatic</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">- (<span class="built_in">NSArray</span> *)tableView:(<span class="built_in">UITableView</span> *)tableView editActionsForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath&#123;</span><br><span class="line">    <span class="comment">//设置删除按钮</span></span><br><span class="line">      <span class="built_in">UITableViewRowAction</span> *deleteRowAction = [<span class="built_in">UITableViewRowAction</span> rowActionWithStyle:<span class="built_in">UITableViewRowActionStyleDestructive</span> title:<span class="string">@"删除"</span>handler:^(<span class="built_in">UITableViewRowAction</span> *action,<span class="built_in">NSIndexPath</span> *indexPath) &#123;</span><br><span class="line">          [<span class="keyword">self</span>.dataSource removeObjectAtIndex:indexPath.row];</span><br><span class="line">          [<span class="keyword">self</span>.tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:<span class="built_in">UITableViewRowAnimationAutomatic</span>];</span><br><span class="line">      &#125;];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//设置收藏按钮</span></span><br><span class="line">    <span class="built_in">UITableViewRowAction</span> *collectRowAction = [<span class="built_in">UITableViewRowAction</span> rowActionWithStyle:<span class="built_in">UITableViewRowActionStyleDefault</span> title:<span class="string">@"收藏"</span>handler:^(<span class="built_in">UITableViewRowAction</span> *action,<span class="built_in">NSIndexPath</span> *indexPath) &#123;</span><br><span class="line">         collectRowAction.backgroundColor = [<span class="built_in">UIColor</span> greenColor];</span><br><span class="line">         <span class="built_in">UIAlertView</span> *alertView = [[<span class="built_in">UIAlertView</span> alloc]initWithTitle:<span class="string">@"收藏"</span> message:<span class="string">@"收藏成功"</span> delegate:<span class="keyword">self</span> cancelButtonTitle:<span class="string">@"确定"</span>otherButtonTitles:<span class="literal">nil</span>, <span class="literal">nil</span>];</span><br><span class="line">         [alertView show];</span><br><span class="line">         &#125;];</span><br><span class="line">    <span class="comment">//设置置顶按钮</span></span><br><span class="line">    <span class="built_in">UITableViewRowAction</span> *topRowAction = [<span class="built_in">UITableViewRowAction</span> rowActionWithStyle:<span class="built_in">UITableViewRowActionStyleDefault</span> title:<span class="string">@"置顶"</span>handler:^(<span class="built_in">UITableViewRowAction</span> *action, <span class="built_in">NSIndexPath</span> *indexPath) &#123;</span><br><span class="line">         [<span class="keyword">self</span>.dataSource exchangeObjectAtIndex:indexPath.row withObjectAtIndex:<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">NSIndexPath</span> *firstIndexPath = [<span class="built_in">NSIndexPath</span> indexPathForRow:<span class="number">0</span> inSection:indexPath.section];</span><br><span class="line">        [tableView moveRowAtIndexPath:indexPath toIndexPath:firstIndexPath];</span><br><span class="line">    &#125;];</span><br><span class="line">    collectRowAction.backgroundEffect = [<span class="built_in">UIBlurEffect</span> effectWithStyle:<span class="built_in">UIBlurEffectStyleLight</span>];</span><br><span class="line">    topRowAction.backgroundColor = [<span class="built_in">UIColor</span> blueColor];</span><br><span class="line">    collectRowAction.backgroundColor = [<span class="built_in">UIColor</span> grayColor]; </span><br><span class="line">    <span class="keyword">return</span>  @[deleteRowAction,collectRowAction,topRowAction];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">行高：</span><br><span class="line">一种是针对所有 Cell 具有固定高度的情况，通过：</span><br><span class="line"><span class="keyword">self</span>.tableView.rowHeight = <span class="number">88</span>;</span><br><span class="line">上面的代码指定了一个所有 cell 都是 <span class="number">88</span> 高度的 <span class="built_in">UITableView</span>，对于定高需求的表格，强烈建议使用这种</span><br><span class="line"></span><br><span class="line">自定义button右边箭头等标识：</span><br><span class="line"><span class="built_in">UIButton</span> *actonButton = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeRoundedRect</span>];</span><br><span class="line">    [inactonButton setTitle:<span class="string">@"活跃"</span>  forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    [inactonButton setTintColor:[<span class="built_in">UIColor</span> redColor]];</span><br><span class="line">    <span class="built_in">CGRect</span> aframe = <span class="built_in">CGRectMake</span>(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">    inactonButton.frame=aframe;</span><br><span class="line">    cell.accessoryView=button;</span><br><span class="line">    可以自定义右边的显示图片，文字或图片可以通过设置button来设定</span><br><span class="line">    </span><br><span class="line">设置<span class="built_in">UItableview</span>的imageview中image的大小:</span><br><span class="line"><span class="comment">//1、首先对image付值</span></span><br><span class="line">cell.imageView.image=[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"灰时间"</span>];</span><br><span class="line"><span class="comment">//2、调整大小</span></span><br><span class="line">      <span class="built_in">CGSize</span> itemSize = <span class="built_in">CGSizeMake</span>(<span class="number">40</span>, <span class="number">40</span>);      <span class="built_in">UIGraphicsBeginImageContextWithOptions</span>(itemSize, <span class="literal">NO</span>, <span class="built_in">UIScreen</span>.mainScreen.scale);      <span class="built_in">CGRect</span> imageRect = <span class="built_in">CGRectMake</span>(<span class="number">0.0</span>, <span class="number">0.0</span>, itemSize.width, itemSize.height);      [cell.imageView.image drawInRect:imageRect];      cell.imageView.image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();      <span class="built_in">UIGraphicsEndImageContext</span>();     <span class="keyword">return</span> cell;</span><br><span class="line">     </span><br><span class="line"><span class="built_in">UITableView</span>  reloaddata:</span><br><span class="line"></span><br><span class="line">RIGHT WAY: </span><br><span class="line">Principle:  Always change dataSource <span class="keyword">in</span> MAIN thread and call the reloadData immediately after it. </span><br><span class="line">Option <span class="number">1</span>: If the operation to change the dataSource should be executed <span class="keyword">in</span> background, the operation can create a temp dataSource array and pass it to main thread with notification, the main thread observes the notification,  <span class="keyword">assign</span> the tmpDataSource to dataSource and reload the tableView by reloadData.</span><br><span class="line"></span><br><span class="line">Option <span class="number">2</span>: In the background, call the GDC <span class="built_in">dispatch_async</span> to send the two methods to main thread together.</span><br><span class="line"><span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        <span class="keyword">self</span>.dataSourceArray= a new Array.<span class="comment">//   或删除当前列表的内容，从新加载[self.dataarray   removeAllObjects];</span></span><br><span class="line">             [<span class="keyword">self</span>.tableView reloadData];</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">设置搜索框:</span><br><span class="line">[_tableView setTableHeaderView:_searchBar];要记住在headerView中设置，否则会发生遮挡</span><br><span class="line"></span><br><span class="line"><span class="built_in">UItableview</span>异步加载数据：</span><br><span class="line"></span><br><span class="line">用AFNetworking为TableView异步加载数据</span><br><span class="line">为了让APP有更好的用户体验，所以是不能阻塞主线程的，而RSS的获取和解析都需要一定的时间，所以需要异步地来处理这些工作，配上MBProgressHUD效果更好。</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">auditTableViewController</span> ()&lt;<span class="title">MBProgressHUDDelegate</span>&gt;</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableArray</span> *bianHao;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableArray</span> *fakeData;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableArray</span> *userIdData;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableArray</span> *dataing;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableArray</span> *time;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableArray</span> *uid;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableArray</span> *searchResultsData;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">NSMutableDictionary</span> *uAuditId;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) MBProgressHUD  *progress;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">assign</span>) <span class="built_in">NSInteger</span> index;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">auditTableViewController</span></span></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>) getDataAsy:(<span class="built_in">NSString</span> *)page &#123;</span><br><span class="line">    <span class="keyword">self</span>.progress=[[MBProgressHUD alloc] initWithView:<span class="keyword">self</span>.view];</span><br><span class="line">    <span class="keyword">self</span>.progress.progress=<span class="number">0.4</span>;</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.progress];</span><br><span class="line">    <span class="keyword">self</span>.progress.dimBackground=<span class="literal">NO</span>;</span><br><span class="line">    <span class="keyword">self</span>.progress.labelText=<span class="string">@"加载中，请稍后"</span>;</span><br><span class="line">    [<span class="keyword">self</span>.progress show:<span class="literal">YES</span>];</span><br><span class="line">    AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];</span><br><span class="line">    manager.requestSerializer = [AFHTTPRequestSerializer serializer];</span><br><span class="line">    manager.responseSerializer = [AFHTTPResponseSerializer serializer];</span><br><span class="line">    <span class="built_in">NSString</span> *sid = [[APPDELEGATE.sessionInfo objectForKey:<span class="string">@"obj"</span>]objectForKey:<span class="string">@"sid"</span>];</span><br><span class="line">    <span class="built_in">NSDictionary</span> *parameters = @&#123;<span class="string">@"MOBILE_SID"</span>:sid,</span><br><span class="line">                                 <span class="string">@"page"</span>:page&#125;;</span><br><span class="line">    [manager POST:[SERVER_URL stringByAppendingString:<span class="string">@"mJobSubmissionAction!renWuJBXXSHDatagrid.action?"</span>] parameters:parameters success:^(AFHTTPRequestOperation *operation, <span class="keyword">id</span> responseObject) &#123;</span><br><span class="line">        <span class="built_in">NSString</span> *result =  [[<span class="built_in">NSString</span> alloc]initWithData:responseObject encoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">        [<span class="keyword">self</span> removeUnescapedCharacter:result];</span><br><span class="line">        <span class="built_in">NSDictionary</span> *rececive = [<span class="built_in">NSJSONSerialization</span> JSONObjectWithData:[[<span class="keyword">self</span> removeUnescapedCharacter:result] dataUsingEncoding:<span class="built_in">NSUTF8StringEncoding</span>] options:<span class="built_in">NSJSONReadingMutableContainers</span> error:<span class="literal">nil</span>];</span><br><span class="line">        <span class="keyword">if</span>([[rececive objectForKey:<span class="string">@"success"</span>] boolValue] == <span class="literal">YES</span>)&#123;</span><br><span class="line">            <span class="built_in">NSArray</span> *list = [rececive objectForKey:<span class="string">@"obj"</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;[list count];i++) &#123;</span><br><span class="line">                <span class="built_in">NSDictionary</span> *listdic = [list objectAtIndex:i];</span><br><span class="line">                [<span class="keyword">self</span>.uid addObject:listdic];</span><br><span class="line">                <span class="built_in">NSString</span> *bianHao  = (<span class="built_in">NSString</span> *)[listdic objectForKey:<span class="string">@"bianHao"</span>];</span><br><span class="line">                <span class="built_in">NSString</span> *teamname = (<span class="built_in">NSString</span> *)[listdic objectForKey:<span class="string">@"qiYeMC"</span>];</span><br><span class="line">                <span class="built_in">NSString</span> *userId   = (<span class="built_in">NSString</span> *)[listdic objectForKey:<span class="string">@"yeWuZLMC_cn"</span>];</span><br><span class="line">                <span class="built_in">NSString</span> *time     = (<span class="built_in">NSString</span> *)[listdic objectForKey:<span class="string">@"renWuTJSJStr"</span>];</span><br><span class="line">                [<span class="keyword">self</span>.fakeData  addObject:teamname];</span><br><span class="line">                [<span class="keyword">self</span>.time      addObject:time];</span><br><span class="line">                [<span class="keyword">self</span>.dataing   addObject:userId];</span><br><span class="line">                [<span class="keyword">self</span>.bianHao   addObject:bianHao];</span><br><span class="line">            &#125;</span><br><span class="line">            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(<span class="number">0.0</span> * <span class="built_in">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                [<span class="keyword">self</span>.tableView reloadData];</span><br><span class="line">                [<span class="keyword">self</span>.progress hide:<span class="literal">YES</span>];</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">             [<span class="keyword">self</span>.progress hide:<span class="literal">YES</span>];</span><br><span class="line">            <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc]initWithTitle:<span class="string">@"网络连接超时"</span> message:<span class="string">@"请检查网络，重新加载!"</span> delegate:<span class="keyword">self</span> cancelButtonTitle:<span class="string">@"OK"</span> otherButtonTitles: <span class="literal">nil</span>,<span class="literal">nil</span>];</span><br><span class="line">            [alert show];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; failure:^(AFHTTPRequestOperation *operation, <span class="built_in">NSError</span> *error) &#123;</span><br><span class="line">        </span><br><span class="line">         [<span class="keyword">self</span>.progress hide:<span class="literal">YES</span>];</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,error);</span><br><span class="line">        <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc]initWithTitle:<span class="string">@"请求错误"</span> message:<span class="string">@"请检查网络，重新加载!"</span> delegate:<span class="keyword">self</span> cancelButtonTitle:<span class="string">@"OK"</span> otherButtonTitles: <span class="literal">nil</span>,<span class="literal">nil</span>];</span><br><span class="line">        [alert show];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSMutableArray</span> *)fakeData</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!_fakeData) &#123;</span><br><span class="line">        <span class="keyword">self</span>.bianHao=[[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">        <span class="keyword">self</span>.fakeData=[[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">        <span class="keyword">self</span>.dataing=[[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">        <span class="keyword">self</span>.time=[[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">        <span class="keyword">self</span>.uid=[[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">        [<span class="keyword">self</span> getDataAsy:<span class="string">@"1"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _fakeData;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated&#123;</span><br><span class="line">    <span class="keyword">if</span>([APPDELEGATE.paramForaudit isEqualToString:<span class="string">@"fromAuditDetail"</span>])&#123;</span><br><span class="line">        APPDELEGATE.paramForaudit=<span class="string">@""</span>;<span class="comment">//控制刷新，通过字段限定不是每个页面跳转回来都刷新页面</span></span><br><span class="line">        [<span class="keyword">self</span>.fakeData removeAllObjects];</span><br><span class="line">        [<span class="keyword">self</span>.bianHao  removeAllObjects];</span><br><span class="line">        [<span class="keyword">self</span>.dataing  removeAllObjects];</span><br><span class="line">        [<span class="keyword">self</span>.time     removeAllObjects];</span><br><span class="line">        [<span class="keyword">self</span>.uid      removeAllObjects];</span><br><span class="line">        <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(),^&#123;</span><br><span class="line">            [<span class="keyword">self</span> getDataAsy:<span class="string">@"1"</span>];</span><br><span class="line">            [<span class="keyword">self</span>.tableView reloadData];</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">同上：</span><br><span class="line">- (<span class="keyword">void</span>)loadFeed &#123;  AFHTTPRequestOperationManager *manager =      [AFHTTPRequestOperationManager manager];</span><br><span class="line">AFHTTPResponseSerializer *responseSerializer =      [AFHTTPResponseSerializer serializer];</span><br><span class="line">responseSerializer.acceptableContentTypes =      [<span class="built_in">NSSet</span> setWithObjects:<span class="string">@"application/atom+xml"</span>, <span class="literal">nil</span>];  manager.responseSerializer = responseSerializer;</span><br><span class="line">[manager GET:URL parameters:<span class="literal">nil</span>         success:^(AFHTTPRequestOperation *operation, <span class="keyword">id</span> responseObject)&#123;      <span class="built_in">NSData</span> *response = (<span class="built_in">NSData</span> *)responseObject;      Feed *feed = [FeedParser parse:response];      <span class="keyword">self</span>.feed = feed;</span><br><span class="line">     [<span class="keyword">self</span>.tableView reloadData];    &#125;failure:  ^(AFHTTPRequestOperation * operation, <span class="built_in">NSError</span> * error) &#123;    <span class="built_in">NSLog</span>(<span class="string">@"error: , %@"</span>, error);  &#125;];&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;  [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line"><span class="comment">// Uncomment the following line to preserve selection between presentations.</span>  <span class="comment">// self.clearsSelectionOnViewWillAppear = NO;</span></span><br><span class="line"><span class="comment">// Uncomment the following line to display an Edit button in the navigation</span>  <span class="comment">// bar for this view controller.</span>  <span class="comment">// self.navigationItem.rightBarButtonItem = self.editButtonItem;</span></span><br><span class="line">[<span class="keyword">self</span> loadFeed];&#125;</span><br><span class="line"></span><br><span class="line">另外一种不阻塞主线程的方式:</span><br><span class="line">-(<span class="keyword">void</span>)getDataForActivity&#123;</span><br><span class="line">    AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager];</span><br><span class="line">    <span class="built_in">NSString</span> *sid = [[APPDELEGATE.sessionInfo objectForKey:<span class="string">@"obj"</span>]objectForKey:<span class="string">@"sid"</span>];</span><br><span class="line">    <span class="built_in">NSDictionary</span> *parameters = @&#123;<span class="string">@"MOBILE_SID"</span>:sid,</span><br><span class="line">                                 <span class="string">@"order"</span>:<span class="string">@"desc"</span>,</span><br><span class="line">                                 <span class="string">@"sort"</span> :<span class="string">@"time"</span>&#125;;</span><br><span class="line">    [manager POST:[SERVER_URL stringByAppendingString:<span class="string">@"mcustomerCallRecordsAction!mDatagrid1.action?"</span>] parameters:parameters success:^(AFHTTPRequestOperation *operation, <span class="keyword">id</span> responseObject) &#123;</span><br><span class="line">        <span class="keyword">if</span>([[responseObject objectForKey:<span class="string">@"success"</span>] boolValue] == <span class="literal">YES</span>)&#123;</span><br><span class="line">            <span class="built_in">NSArray</span> *list = [responseObject objectForKey:<span class="string">@"obj"</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;[list count];i++) &#123;</span><br><span class="line">                <span class="built_in">NSDictionary</span> *listDic =[list objectAtIndex:i];</span><br><span class="line">                <span class="built_in">NSString</span> *time = (<span class="built_in">NSString</span> *)[listDic objectForKey:<span class="string">@"timeStr"</span>];</span><br><span class="line">                <span class="keyword">if</span>([time isEqualToString:<span class="keyword">self</span>.date1])&#123;</span><br><span class="line">                    <span class="keyword">self</span>.acitvityIndex1++;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>([time isEqualToString:<span class="keyword">self</span>.date2])&#123;</span><br><span class="line">                    <span class="keyword">self</span>.acitvityIndex2++;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>([time isEqualToString:<span class="keyword">self</span>.date3])&#123;</span><br><span class="line">                    <span class="keyword">self</span>.acitvityIndex3++;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>([time isEqualToString:<span class="keyword">self</span>.date4])&#123;</span><br><span class="line">                    <span class="keyword">self</span>.acitvityIndex4++;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>([time isEqualToString:<span class="keyword">self</span>.date5])&#123;</span><br><span class="line">                    <span class="keyword">self</span>.acitvityIndex5++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">NSString</span> *data= [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%d"</span>,<span class="keyword">self</span>.acitvityIndex1];</span><br><span class="line">            [<span class="keyword">self</span> performSelectorOnMainThread:<span class="keyword">@selector</span>(setUpActivityUI) withObject:data waitUntilDone:<span class="literal">YES</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            [<span class="keyword">self</span> setUpActivityUI];</span><br><span class="line">            <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc]initWithTitle:<span class="string">@"网络连接超时"</span> message:<span class="string">@"请检查网络，重新加载!"</span> delegate:<span class="keyword">self</span> cancelButtonTitle:<span class="string">@"OK"</span> otherButtonTitles: <span class="literal">nil</span>,<span class="literal">nil</span>];</span><br><span class="line">            [alert show];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; failure:^(AFHTTPRequestOperation *operation, <span class="built_in">NSError</span> *error) &#123;</span><br><span class="line">        <span class="built_in">UIAlertView</span> *alert = [[<span class="built_in">UIAlertView</span> alloc]initWithTitle:<span class="string">@"请求错误"</span> message:<span class="string">@"请检查网络，重新加载!"</span> delegate:<span class="keyword">self</span> cancelButtonTitle:<span class="string">@"OK"</span> otherButtonTitles: <span class="literal">nil</span>,<span class="literal">nil</span>];</span><br><span class="line">        [alert show];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">上面是PNChart的调用画线，不阻塞主线程，当页面数据请求完毕时绘制，但是每次进入页面都会绘制，所以才去如下方法清空并重新绘制：</span><br><span class="line">-(<span class="keyword">void</span>) viewWillAppear:(<span class="built_in">BOOL</span>)animated&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">UIView</span> *view <span class="keyword">in</span> <span class="keyword">self</span>.scrollView.subviews)&#123;</span><br><span class="line">        [view removeFromSuperview];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">self</span>.acitvityIndex1=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">self</span>.acitvityIndex2=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">self</span>.acitvityIndex3=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">self</span>.acitvityIndex4=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">self</span>.acitvityIndex5=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">self</span>.telIndex1=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">self</span>.telIndex2=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">self</span>.telIndex3=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">self</span>.telIndex4=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">self</span>.telIndex5=<span class="number">0</span>;</span><br><span class="line">    [<span class="keyword">self</span>  setUpUI];</span><br><span class="line">    [<span class="keyword">self</span>  DateForIn];</span><br><span class="line">    [<span class="keyword">self</span>  getDataForActivity];</span><br><span class="line">    [<span class="keyword">self</span>  getDataForTel];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">刷新当前行：</span><br><span class="line">[_tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:<span class="built_in">UITableViewRowAnimationAutomatic</span>];</span><br><span class="line"></span><br><span class="line">给<span class="built_in">UItableview</span>添加动画：</span><br><span class="line">	</span><br><span class="line">	-(<span class="keyword">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView willDisplayCell:(<span class="built_in">UITableViewCell</span> *)cell forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath&#123;</span><br><span class="line">	<span class="comment">// 1. 配置CATransform3D的内容</span></span><br><span class="line">	<span class="built_in">CATransform3D</span> transform;</span><br><span class="line">	transform = <span class="built_in">CATransform3DMakeRotation</span>( (<span class="number">90.0</span>*M_PI)/<span class="number">180</span>, <span class="number">0.0</span>, <span class="number">0.7</span>, <span class="number">0.4</span>);</span><br><span class="line">	transform.m34 = <span class="number">1.0</span>/ <span class="number">-600</span>;</span><br><span class="line">	<span class="comment">// 2. 定义cell的初始状态</span></span><br><span class="line">	cell.layer.shadowColor = [[<span class="built_in">UIColor</span> blackColor]<span class="built_in">CGColor</span>];</span><br><span class="line">	cell.layer.shadowOffset = <span class="built_in">CGSizeMake</span>(<span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">	cell.alpha = <span class="number">0</span>;</span><br><span class="line">	cell.layer.transform = transform;</span><br><span class="line">	cell.layer.anchorPoint = <span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">	<span class="comment">// 3. 定义cell的最终状态，并提交动画</span></span><br><span class="line">	[<span class="built_in">UIView</span> beginAnimations:<span class="string">@"transform"</span> context:<span class="literal">NULL</span>];</span><br><span class="line">	[<span class="built_in">UIView</span> setAnimationDuration:<span class="number">0.5</span>];</span><br><span class="line">	cell.layer.transform = <span class="built_in">CATransform3DIdentity</span>;</span><br><span class="line">	cell.alpha = <span class="number">1</span>;</span><br><span class="line">	cell.layer.shadowOffset = <span class="built_in">CGSizeMake</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">	cell.frame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.height);</span><br><span class="line">	[<span class="built_in">UIView</span> commitAnimations];</span><br><span class="line">	&#125;</span><br><span class="line">第一步：使用<span class="built_in">CATransform3D</span>在Y和Z轴上做旋转设置。</span><br><span class="line">第二步：定义cell的初始状态，添加了一些阴影，并将第一步中的transform设置给cell中layer的transform matrix。然后将anchor设置为<span class="number">0.0</span>, <span class="number">0.5</span>，也就是说让cell围绕着左边进行旋转。</span><br><span class="line">第三步：通过动画，将cell设置为原始状态。此处利用了<span class="built_in">UIView</span>的beginAnimations:context方法来更新cell中layer的值。当然还有别的方法来执行动画，不过这种方法比较简单，我们可以设置持续时间。代码里面将transform设置为<span class="built_in">CATransform3DIdentity</span>。</span><br><span class="line">这样通过第二步和第三步的状态就能够引导动画，以此完成最终效果。</span><br></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/05/27/Foundation学习笔记/" rel="next" title="Foundation学习笔记">
                <i class="fa fa-chevron-left"></i> Foundation学习笔记
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/06/06/iOS开发中的几种设计模式/" rel="prev" title="iOS开发中的几种设计模式">
                iOS开发中的几种设计模式 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/05/31/UITableView的使用/"
           data-title="UITableView的使用" data-url="http://yoursite.com/2016/05/31/UITableView的使用/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="spike" />
          <p class="site-author-name" itemprop="name">spike</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/">
              <span class="site-state-item-count">28</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/coderspike" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#概述"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#UITableView的常见属性"><span class="nav-number">1.1.</span> <span class="nav-text">UITableView的常见属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UITableViewCell"><span class="nav-number">1.2.</span> <span class="nav-text">UITableViewCell</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#cell的重用原理"><span class="nav-number">1.2.0.0.1.</span> <span class="nav-text">cell的重用原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常用属性"><span class="nav-number">1.2.0.0.2.</span> <span class="nav-text">常用属性</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UITableView的常用方法"><span class="nav-number">1.3.</span> <span class="nav-text">UITableView的常用方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UITableViewDataSource中的常用方法"><span class="nav-number">1.4.</span> <span class="nav-text">UITableViewDataSource中的常用方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UITableViewDelegate中的常用方法"><span class="nav-number">1.5.</span> <span class="nav-text">UITableViewDelegate中的常用方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tableView展示数据的过程"><span class="nav-number">1.6.</span> <span class="nav-text">tableView展示数据的过程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一些补充"><span class="nav-number">1.7.</span> <span class="nav-text">一些补充</span></a></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">spike</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"coderspike"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  






  
  
  

  

  

</body>
</html>
