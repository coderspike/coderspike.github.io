<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> UIButton · coder-gwb</title><meta name="description" content="UIButton - null"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/categories/编程" target="_self" class="nav-list-link">编程</a></li><li class="nav-list-item"><a href="/categories/读书" target="_self" class="nav-list-link">读书</a></li><li class="nav-list-item"><a href="/categories/生活" target="_self" class="nav-list-link">生活</a></li><li class="nav-list-item"><a href="https://github.com/coderspike" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">UIButton</h1><div class="post-info">2016年6月16日</div><div class="post-content"><blockquote>
<p>UIButton的类是一个UIControl子类，使用目标动作设计模式，target-action模式，3种回调的模式之一,继承关系： NSObject UIResponder    UIView    UIContro UIButton。</p>
</blockquote>
<h3 id="创建按钮"><a href="#创建按钮" class="headerlink" title="创建按钮"></a>创建按钮</h3><p>//构造器方法，调用该方法创建某个样式的按钮对象</p>
<ul>
<li>(id)buttonWithType:(UIButtonType)buttonType<br>参数：<br>buttonType:按钮样式<br>枚举值：<br>UIButtonTypeCustom = 0, 自定义风格<br>示例：<br>UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];</li>
</ul>
<h3 id="按钮的设置"><a href="#按钮的设置" class="headerlink" title="按钮的设置"></a>按钮的设置</h3><p>设置按钮类型，此处为圆角按钮<br>    UIButton *writeButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];  </p>
<pre><code>设置和大小  
CGRect frame = CGRectMake(100.0f, 100.0f, 140.0f, 50.0f);  

将frame的位置大小复制给Button  
writeButton.frame = frame;        

给Button添加标题    
[writeButton setTitle:@&quot;代码按钮&quot; forState:UIControlStateNormal];  

设置按钮背景颜色   
writeButton.backgroundColor = [UIColor clearColor];  
</code></pre><p>   设置按钮标题文字对齐方式，此处为左对齐<br>    writeButton.contentHorizontalAlignment =UIControlContentHorizontalAlignmentLeft;  </p>
<pre><code>使文字距离做边框保持10个像素的距离。  
writeButton.contentEdgeInsets = UIEdgeInsetsMake(0,30, 0, 0);  

此处类容目的掩饰代码代码操作按钮一些属性，如果设置按钮背景为图片可以将此处注释取消，注释掉上没横线范围类代码，进行测试 
设置按钮背景图片 
UIImage *image= [UIImage imageNamed:@&quot;background.png&quot;]; 
[writeButton setBackgroundImage:image forState:UIControlStateNormal];

按钮的相应事件    
[writeButton addTarget:self action:@selector(buttonClicked:)forControlEvents:UIControlEventTouchUpInside];  
[self.view addSubview:writeButton]; 

 [设置按钮的边框]：
[testButton.layer setMasksToBounds:YES];//设置按钮的圆角半径不会被遮挡
[testButton.layer setCornerRadius:10];
[testButton.layer setBorderWidth:2];//设置边界的宽度

设置按钮的边界颜色
CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
CGColorRef color = CGColorCreate(colorSpaceRef, (CGFloat[]){1,0,0,1});
[testButton.layer setBorderColor:color];
</code></pre><p>快速设置按钮格式：<br>   UIButton *button = [UIButton alloc] initWithFrame:CGRect(100, 100, 100 , 100)];<br>    //设置边框颜色<br>    button.layer.borderColor = [[UIColor redColor] CGColor];<br>   //设置边框宽度<br>    button.layer.borderWidth = 1.0f;<br>    //给按钮设置角的弧度<br>    button.layer.cornerRadius = 4.0f;<br>   //设置背景颜色<br>    button.backgroundColor = [UIColor redColor];<br>    button.layer.masksToBounds = YES;</p>
<h3 id="UIButton的封装"><a href="#UIButton的封装" class="headerlink" title="UIButton的封装"></a>UIButton的封装</h3><p>-(void) setUpButton{<br>    [self.view setBackgroundColor:[UIColor whiteColor]];<br>    GwbButton <em>btn=[GwbButton buttonWithRoundType:UIButtonTypeCustom frame:CGRectMake(100, 100, 100, 100) title:@”test” image:[UIImage imageNamed: @””] handler:^(UIButton </em>sender){<br>        [self setUpTable];}];<br>     btn.backgroundColor=[UIColor yellowColor];<br>     [self.view addSubview:btn];<br>}</p>
<p>.h</p>
<p>#import <uikit uikit.h=""><br>typedef void (^tapHandler)(UIButton *sender);<br>@interface GwbButton : UIButton<br>@property (nonatomic,strong)tapHandler handler;</uikit></p>
<p>+(id)buttonWithRoundType:(UIButtonType)buttonType frame:(CGRect)frame title:(NSString <em>)title image:(UIImage </em>)image handler:(tapHandler) handler;<br>@end</p>
<p>.m<br>//<br>//  GwbButton.m<br>//  DaGongiOSMobileFrameWork<br>//<br>//  Created by mac on 16/5/25.<br>//  Copyright © 2016年 DaGong. All rights reserved.<br>//</p>
<p>#import “GwbButton.h”</p>
<p>#import “CommonConfig.h”</p>
<p>@implementation GwbButton</p>
<p>+(id)buttonWithRoundType:(UIButtonType)buttonType frame:(CGRect)frame title:(NSString <em>)title image:(UIImage </em>)image handler:(tapHandler)handler{<br>    GwbButton *button =[super buttonWithType:buttonType];<br>    button.frame=frame;<br>    button.titleLabel.textAlignment=NSTextAlignmentCenter;<br>    button.titleLabel.font=[UIFont systemFontOfSize:15];<br>    [button setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];<br>    button.imageView.contentMode=UIViewContentModeCenter;<br>    [button setTitle:title forState:UIControlStateNormal];<br>    [button setImage:image forState:UIControlStateNormal];<br>    button.layer.cornerRadius=5;<br>    button.handler=handler;<br>    [button addTarget:button action:@selector(btnTapped:) forControlEvents:UIControlEventTouchUpInside];<br>    button.backgroundColor=NAVBLUECOLOR;<br>    return button;<br>}</p>
<p>#pragma –btnTapped</p>
<p>-(void)btnTapped:(UIButton *)sender{<br>    if(self.handler){<br>        self.handler(sender);<br>    }<br>}<br>@end</p>
<h3 id="设置按钮的形状"><a href="#设置按钮的形状" class="headerlink" title="设置按钮的形状"></a>设置按钮的形状</h3><p><img src="http://ww4.sinaimg.cn/mw1024/bc254b75jw1f4wtxg2wmhj2062081mxf.jpg" alt=""></p>
<p>按钮一：<br>对于圆形的头像，要制作正圆，我们需要首先设置UIImageView的高宽的一致的，然后我们设置其圆角角度为高度除以2即可，相当于90度，代码如下：<br>    // 圆形头像<br>    UIImageView <em>avatarImgView = [[UIImageView alloc] initWithFrame:CGRectMake((SCREENWIDTH - 75) / 2, 150, 75, 75)];<br>    avatarImgView.image = [UIImage imageNamed:@”icon”];<br>    // 图片做圆形，圆角角度为高度的一半，而高宽一致，因此可以形成正圆<br>    avatarImgView.layer.masksToBounds = YES;<br>    avatarImgView.layer.cornerRadius = avatarImgView.frame.size.height / 2 ;<br>    [self.view addSubview:avatarImgView];<br>按钮二：<br>对于第二个完全的半圆圆角，我们同样设置角度为高度的一般，这样可以在两边形声半圆，而由于宽度与高度不同，所以不是正圆：<br>    // 完全半圆圆角的按钮<br>    UIButton </em>btnOne = [[UIButton alloc] initWithFrame:CGRectMake((SCREENWIDTH - 200) / 2, 250, 200, 40)];<br>    [btnOne setTitle:@”完全圆角” forState:UIControlStateNormal];<br>    [btnOne setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];<br>    [btnOne setBackgroundColor:[UIColor colorWithRed:228.0/255.0 green:117.0/255.0 blue:97.0/255.0 alpha:1.0]];<br>    // 按钮圆弧，以高度的一半为圆角，两边会形成完整的半圆<br>    btnOne.layer.masksToBounds = YES;<br>    btnOne.layer.cornerRadius = btnOne.frame.size.height / 2;<br>    [self.view addSubview:btnOne];<br>按钮三：<br>对于第三个小圆角的按钮，我们直接设置圆角的圆度为一个数即可，数的大小决定了按钮圆角的样式，这里我们设为4：<br>    // 小圆角的按钮<br>    UIButton <em>btnTwo = [[UIButton alloc] initWithFrame:CGRectMake((SCREENWIDTH - 200) / 2, 315, 200, 40)];<br>    [btnTwo setTitle:@”小圆角” forState:UIControlStateNormal];<br>    [btnTwo setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];<br>    [btnTwo setBackgroundColor:[UIColor colorWithRed:228.0/255.0 green:117.0/255.0 blue:97.0/255.0 alpha:1.0]];<br>    // 按钮圆弧，以高度的一半为圆角，两边会形成完整的半圆<br>    btnTwo.layer.masksToBounds = YES;<br>    btnTwo.layer.cornerRadius = 4.0;<br>    [self.view addSubview:btnTwo];<br>按钮四：<br>第四个label，我们先要添加边框，我们设置边框宽度为1，就可以显示边框了，然后同样设置圆角为4：<br>    // 带边框的圆角Label<br>    UILabel </em>label = [[UILabel alloc] initWithFrame:CGRectMake((SCREENWIDTH - 200) / 2, 390, 200, 40)];<br>    label.text = @”带边框圆角label”;<br>    label.textAlignment = NSTextAlignmentCenter;<br>    label.textColor = [UIColor colorWithRed:228.0/255.0 green:117.0/255.0 blue:97.0/255.0 alpha:1.0];<br>    // 设置边框宽度<br>    label.layer.borderWidth = 1.0;<br>    // 设置边框颜色<br>    label.layer.borderColor = [[UIColor colorWithRed:228.0/255.0 green:117.0/255.0 blue:97.0/255.0 alpha:1.0] CGColor];<br>    // 设置圆角<br>    [label.layer setCornerRadius:4.0];<br>    [self.view addSubview:label];</p>
<h3 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h3><p>===设置返回按钮只显示箭头<br>方法1：<br>[[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -60)<br> forBarMetrics:UIBarMetricsDefault];<br>方法2：<br> UIBarButtonItem *backItem = [[UIBarButtonItem alloc] init];<br>        backItem.title = @””;<br>        self.navigationItem.backBarButtonItem = backItem;     然后push</p>
<p>===UIButton(左边图片右边文字)<br>UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];<br>button.frame = CGRectMake(100, 100, 100, 50);<br>button.backgroundColor = [UIColor clearColor];<br>//设置button正常状态下的图片<br>[button setImage:[UIImage imageNamed:@”_star_normal.png”] forState:UIControlStateNormal];<br>//设置button高亮状态下的图片<br>[button setImage:[UIImage imageNamed:@”_star_highlighted.png”] forState:UIControlStateHighlighted];<br>//设置button正常状态下的背景图<br>[button setBackgroundImage:[UIImage imageNamed:@”_normal.png”] forState:UIControlStateNormal];<br>//设置button高亮状态下的背景图<br>[button setBackgroundImage:[UIImage imageNamed:@”_highlighted.png”] forState:UIControlStateHighlighted];<br>//button图片的偏移量，距上左下右分别(10, 10, 10, 60)像素点<br>button.imageEdgeInsets = UIEdgeInsetsMake(10, 10, 10, 60);<br>[button setTitle:@”南瓜瓜” forState:UIControlStateNormal];<br>//button标题的偏移量，这个偏移量是相对于图片的<br>button.titleEdgeInsets = UIEdgeInsetsMake(0, -20, 0, 0);<br>//设置button正常状态下的标题颜色<br>[button setTitleColor:[UIColor redColor] forState:UIControlStateNormal];<br>//设置button高亮状态下的标题颜色<br>[button setTitleColor:[UIColor greenColor] forState:UIControlStateHighlighted];<br>button.titleLabel.font = [UIFont systemFontOfSize:14];<br>[self.view addSubview:button];</p>
<p>===如何通过代码设置Button  title的字体大小</p>
<p>设置Button.titleLabel.font = [UIFont systemFontOfSize:&lt;#(CGFloat)#&gt;] ；</p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/06/15/一些概念和知识点/" class="next">NEXT</a></div><div data-thread-key="2016/06/16/UIButton/" data-title="UIButton" data-url="http://yoursite.com/2016/06/16/UIButton/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"true"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2015 - 2016 <a href="http://yoursite.com"></a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>