<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> UIView简介和常用方法 · coder-gwb</title><meta name="description" content="UIView简介和常用方法 - null"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/categories/编程" target="_self" class="nav-list-link">编程</a></li><li class="nav-list-item"><a href="/categories/读书" target="_self" class="nav-list-link">读书</a></li><li class="nav-list-item"><a href="/categories/生活" target="_self" class="nav-list-link">生活</a></li><li class="nav-list-item"><a href="https://github.com/coderspike" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">UIView简介和常用方法</h1><div class="post-info">2016年6月12日</div><div class="post-content"><blockquote>
<p>UIView表示屏幕上的一块矩形区域，负责渲染区域的内容，并且响应该区域内发生的触摸事件。</p>
<p>继承关系：NSObject—UIResponder—UIView</p>
<p>屏幕上能够看见的都是UIView<br>每一个UIView都是容器</p>
<p>bounds的x,y永远为0(以自身左上角为原点)，frame的x,y以父视图的左上角为原点</p>
</blockquote>
<h3 id="常见属性"><a href="#常见属性" class="headerlink" title="常见属性"></a>常见属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> @property frame</span><br><span class="line"> @property bounds</span><br><span class="line"> @property center</span><br><span class="line"> @property transform</span><br><span class="line"> @property alpha</span><br><span class="line"> @property backgroundColor</span><br><span class="line"> @property contentStretch</span><br><span class="line">``` </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">### UIView层的操作常用方法</span><br></pre></td></tr></table></figure>
<p>(void)removeFromSuperview; // 从父视图中移除<br>(void)addSubview:(UIView <em>)view; // 添加一个子视图<br>(void)insertSubview:(UIView </em>)view belowSubview:(UIView <em>)slibingSubview; // 插入一个view到某个view的下层<br>(void)insertSubview:(UIView </em>)view aboveSubview:(UIView <em>)slibingSubview; // 插入一个view到某个view的上层<br>(void)insertSubview:(UIView </em>)view atIndex:(NSInteger)index; // 插入一个view到特定层<br>(void)bringSubviewToFront:(UIView <em>)view; // 将某个view放在最上层<br>(void)sendSubviewToBack:(UIView </em>)view; // 将某个view放在最下层<br>(BOOL)isDescendantOfView(UIView <em>)view; // 是否是某个视图的子孙视图<br>(void)exchangeSubviewAtIndex:(NSInteger)index1 withSubviewAtIndex:(NSInteger)index2; // 交换两个层的view<br>(UIView </em>)viewWithTag:(NSInteger)view; // 取到指定tag值的view<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">### UIView的加载过程</span><br><span class="line">![view](http://ww2.sinaimg.cn/mw1024/bc254b75jw1f4usac93ohj20mi0vsac7.jpg)</span><br></pre></td></tr></table></figure></p>
<p>我们可以知道如果是从 Storyboard 或 Nib 文件中加载 View Controller，我们都不要去重载 loadView，它会自动加载 view 属性以及它的各个 Subviews。只有当我们自己代码创建 View Controller 的时候，我们可能需要去重载 loadView。当然，如果我们不重载，那么默认情况下 loadView 会创建一个光秃秃的 UIView 对象赋给 view 属性。</p>
<p>loadView:先寻找有关可用的nib文件的信息，根据这个信息来加载nib文件，如果没有有关nib文件的信息，默认实现会创建一个空白的UIView对象，然后让这个对象成为controller的主view</p>
<p>首先访问view属性<br>如果存在view，加载。若不存在，则UIViewController调用loadView方法<br>loadView方法执行如下操作<br>如果覆盖了该方法，必须创建view给UIViewController的view属性<br>如果没有复写该方法，UIViewController会默认调用initWithNibName:bundle:方法初始化并加载view<br>通过viewDidLoad方法来执行一些其他任务<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### UIViewController生命周期</span><br></pre></td></tr></table></figure></p>
<p>(void)viewDidLoad; //视图加载完成<br>(void)viewWillAppear:(BOOL)animated; // 将要显示<br>(void)viewDidAppear:(BOOL)animated; // 显示完成<br>(void)viewWillDisappear:(BOOL)animated; // 将要移除<br>(void)viewDidDisappear:(BOOL)animated; // 已经移除</p>
<p>详细版本：</p>
<pre><code>1. -[ViewController initWithCoder:]或-[ViewController initWithNibName:Bundle]:首先从归档文件中加载UIViewController对象。即使是纯代码，也会把nil作为参数传给后者。
2. -[UIView awakeFromNib]:作为第一个方法的助手，方便处理一些额外的设置。
3. -[ViewController loadView]:创建或加载一个view并把它赋值给UIViewController的view属性
4. -[ViewController viewDidLoad]:此时整个视图层次(view hierarchy)已经被放到内存中，可以移除一些视图，修改约束，加载数据等
5. -[ViewController viewWillAppear:]:视图加载完成，并即将显示在屏幕上,还没有设置动画，可以改变当前屏幕方向或状态栏的风格等。
6. -[ViewController viewWillLayoutSubviews]：即将开始子视图位置布局
7. -[ViewController viewDidLayoutSubviews]：用于通知视图的位置布局已经完成
8. -[ViewController viewDidAppear:]：视图已经展示在屏幕上，可以对视图做一些关于展示效果方面的修改。
9. -[ViewController viewWillDisappear:]：视图即将消失
10. -[ViewController viewDidDisappear:]：视图已经消失
</code></pre><p>如果考虑UIViewController可能在某个时刻释放整个view。那么再次加载视图时显然会从步骤3开始。因为此时的UIViewController对象依然存在。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### UIView、UIWindow、UIScreen、UIViewController 之间的层级关系</span><br><span class="line">![](http://ww1.sinaimg.cn/mw1024/bc254b75jw1f4usaaorkrj20y00i8gni.jpg) </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">### UIView的bounds,frame和center属性</span><br><span class="line"> </span><br><span class="line"> ![bound](http://ww3.sinaimg.cn/mw1024/bc254b75jw1f4usab9jhfj20dk0abwf7.jpg) </span><br><span class="line">看着上图，对照一下就很清楚了</span><br><span class="line">View B’s bounds= ((0,0),(200,250))</span><br><span class="line">View B’s frame= ((140,65),(320,320))</span><br><span class="line">View B’s center= (300,225)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">### 常用方法收录</span><br></pre></td></tr></table></figure>
<p> ===获取指定的subView<br>for(UIView *view in subviews)<br>{<br>if(view.tag == 998)<br>{<br>//根据tag判断<br>}<br>if([view isKindOfClass:[UIImageView class]])<br>{<br>//根据类型判断<br>}<br>}</p>
<p>===做一个与屏幕同等大小的UIView<br>方法一：</p>
<p>#pragma mark - Setup</p>
<ul>
<li>(void)setupUI {<br>// Use full screen layout.<br>self.edgesForExtendedLayout = UIRectEdgeAll;<br>self.automaticallyAdjustsScrollViewInsets = YES;<br>self.extendedLayoutIncludesOpaqueBars = YES;<br>self.view.backgroundColor = [UIColor whiteColor];<br>// Title.<br>self.title = @”Detail”;<br>}<br>方法二：<br>CGRect rect = [[UIScreen mainScreen] bounds];<br>CGSize size = rect.size;<br>CGFloat width = size.width;<br>CGFloat height = size.height;<br>CGRectMake(origin.x，origin.y，size.width. Size.height)在代码中定义矩形<br>Frame:     该view在父view坐标系统中的位置和大小。（参照点是，父亲的坐标系统）<br>bounds：该view在本地坐标系统中的位置和大小。   （参照点是，本地坐标系统，就相当于ViewB自己的坐标系统，以0,0点为起点）<br>center： 该view的中心点在父view坐标系统中的位置和大小。（参照点是，父亲的坐标系统）</li>
</ul>
<p>===UIView添加UITableView      TestTableViewController *viewController = [[TestTableViewController alloc] init];<br>      [self addChildViewController:viewController];<br>      [self.view addSubview:viewController.view];<br>      [viewController didMoveToParentViewController:self];<br>      [如果不添加controller 则viewController 则不具备跳转等controller功能]</p>
<p>===设置uiView的位置</p>
<p>aView.frame = CGRectMake( 100, 200, aView.frame.size.width, aView.frame.size.height ); // set new position exactly</p>
<p>===remove view from superView</p>
<p>for (UIView<em> subView in [self.view.subviews])<br>{<br>    if ([subView isKindOfClass:[ZeldaView class]])<br>        [subView removeFromSuperview];<br>}<br>===添加一条分割线<br>UIView </em>navDividingLine = [[UIView alloc] initWithFrame:CGRectMake(0,159,self.view.bounds.size.width,1)];<br>        navDividingLine.backgroundColor = [UIColor groupTableViewBackgroundColor];  //这个颜色就是默认表格线的颜色<br>        [navDividingLine sizeToFit];<br>        [self.view addSubview:navDividingLine];</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">### UIView设置圆角</span><br></pre></td></tr></table></figure>
<p>UIView设置圆角<br>1、比较简单的情况，UIView四个角都是圆角：</p>
<pre><code>UIView *aView = [[UIView alloc] init];

aView.frame = CGRectMake(0, 0, 300, 200);
aView.backgroundColor = [UIColor redColor];

//设置圆角边框

aView.layer.cornerRadius = 8;

aView.layer.masksToBounds = YES;

//设置边框及边框颜色

aView.layer.borderWidth = 8;

aView.layer.borderColor =[ [UIColor grayColor] CGColor];

[self.view addSubview:aView];
</code></pre><p>2、设置四个角中的某个或者某几个为圆角</p>
<pre><code>UIView *aView = [[UIView alloc] init];

aView.frame = CGRectMake(0, 0, 300, 200);
aView.backgroundColor = [UIColor redColor];

[self.view addSubview:aView];

//设置所需的圆角位置以及大小
UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:aView.bounds byRoundingCorners:UIRectCornerBottomLeft | UIRectCornerBottomRight cornerRadii:CGSizeMake(10, 10)];
CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
maskLayer.frame = aView.bounds;
maskLayer.path = maskPath.CGPath;
aView.layer.mask = maskLayer;
</code></pre><p>其中，UIRectCornerBottomLeft，UIRectCornerBottomRight是可以选择的角。</p>
<p>typedef NS_OPTIONS(NSUInteger, UIRectCorner) {<br>    UIRectCornerTopLeft     = 1 &lt;&lt; 0,<br>    UIRectCornerTopRight    = 1 &lt;&lt; 1,<br>    UIRectCornerBottomLeft  = 1 &lt;&lt; 2,<br>    UIRectCornerBottomRight = 1 &lt;&lt; 3,<br>    UIRectCornerAllCorners  = ~0UL<br>};</p>
<p>上面的枚举是可以供选择的角，分别是：“左上角”、“右上角”、“左下角”、“右下角”。</p>
<p>``` </p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/06/07/CocoaLumberjack/" class="next">NEXT</a></div><div data-thread-key="2016/06/12/UIView简介和常用方法/" data-title="UIView简介和常用方法" data-url="http://yoursite.com/2016/06/12/UIView简介和常用方法/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"true"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2015 - 2016 <a href="http://yoursite.com"></a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>