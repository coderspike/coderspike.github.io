<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> iOS中的MVC概念 · coder-gwb</title><meta name="description" content="iOS中的MVC概念 - null"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/categories/编程" target="_self" class="nav-list-link">编程</a></li><li class="nav-list-item"><a href="/categories/读书" target="_self" class="nav-list-link">读书</a></li><li class="nav-list-item"><a href="/categories/生活" target="_self" class="nav-list-link">生活</a></li><li class="nav-list-item"><a href="https://github.com/coderspike" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">iOS中的MVC概念</h1><div class="post-info">2016年6月15日</div><div class="post-content"><blockquote>
<p>在转一篇对MVC的总结文章</p>
</blockquote>
<p><a href="http://www.samirchen.com/mvc-in-ios/" target="_blank" rel="external">原版</a></p>
<ul>
<li>Model</li>
</ul>
<p>Model 是 What your application is(but not how it is desplayed)，各种数据以及它们之间的逻辑等都是Model，Model是独立于UI的。</p>
<ul>
<li>Controller</li>
</ul>
<p>Controller 是 How your Model is presented to the user (UI logic)，即UI逻辑，Controller来把Mode的数据和逻辑表达出来，绘制、展示到屏幕上。</p>
<ul>
<li>View</li>
</ul>
<p>View 是 Your Controller’s minions，是Controller要用到的各种基础性的UI元素（Genetic UI Element），是Controller表达Model数据和逻辑用到的工具。</p>
<p>总的来说，就是 Controller 用 View 来把 Model 表达到屏幕上。</p>
<ul>
<li>M、V、C之间如何对话</li>
</ul>
<p>Controller —&gt; Model (OK)</p>
<p>Controller 对相应的 Model 说话是很正常的。</p>
<p>Controller —&gt; Vew (OK)</p>
<p>Controller 对相应的 View 说话也是很正常的。</p>
<p>Model &lt;—&gt; View (Never)</p>
<p>Model 和 View 之间则永远不要对话！</p>
<p>View —&gt; Controller (Limited)</p>
<p>View 一般不要对 Controller 直接说话。但有时候，确实有这个需要，所以有以下几种方式让View对Controller说话：</p>
<p>action - target</p>
<p>Controller 在自己上面放了 target 明确告诉 View 的 action 去和这个 target 对话。比如一个 button 的 touch 动作触发时去告诉 Controller 的 target 这个 action，让 Controller 在这个 action 中做点什么。其实 View 这时候是不知道关于这个 target 背后的这个 Controller 的任何信息的。所以</p>
<p>It is a blind, simple, structured way for the view to communicate with the controller.</p>
<p>delegate</p>
<p>View 和 Controller 对话还有更复杂的方式，比如当一个 ScrollView 被滑动了，滑动停止时，View 需要告诉 Controller 滑动停止了，像我们常见的 will，should，did 类的方法，它们就是在 Controller 里设置了代理 Delegate 去响应这些消息，对 View 来说，它也不知道 Controller 的具体信息，它只是知道 Controller 能响应它的那些 will，should，did 类的消息。要使用 Delegate 模式，就涉及到 protocal。</p>
<p>A protocal is a blind way to talk to another object.</p>
<p>datasource</p>
<p>View 不持有它所显示的数据，这些数据应该是属于 Model 的。View 常常通过 datasource 来询问数据，它通常会向 datasource 询问 count，data at * index 之类的消息，其实 datasource 就是另一种 delegate，很明显 Controller 应该作为 View 的 datasource delegate，而不是 Model。当 View 询问数据相关的消息时，Controller 则先去询问 Model 然后再作为 datasource delegate 来响应 View。</p>
<p>Data source is just a kind of delegate, it’s a specific kind of delegate for getting data.</p>
<p>Model —&gt; Controller (Limited)</p>
<p>Model 一般也不要对 Controller 直接对话。但有时候也有需求，所以提供了一些机制来满足这些需求：</p>
<p>Notification &amp; KVO(Key Value Observing)</p>
<p>有时候 Model 中的某些东西改变了，比如数据改变了、网络连通了等，它需要告诉 Controller。这时候我们用 “radio station”，类似广播机制去通知任何对这信息感兴趣的对象，这就是常用的 Notification(通知中心) &amp; KVO(Key Value Observing，键值观察)。这就相当于 Model 在广播里吼 “我Model这某时某刻某些东东发生变动了，大家快来看啊！”，这时 Controller 就调到那个广播频道听到了，知道 Model 那某些东东发生变化了，然后它对此感兴趣就通过 Control—&gt;Model 这个途径去 Model 那取那些发生变化的数据。</p>
<p>MVC对话示意图<br><img src="http://www.samirchen.com/images/mvc-in-ios/mvc-communication.png" alt=""></p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/06/15/轻量级的UITableViewController/" class="next">NEXT</a></div><div data-thread-key="2016/06/15/iOS中的MVC概念/" data-title="iOS中的MVC概念" data-url="http://yoursite.com/2016/06/15/iOS中的MVC概念/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"true"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>© 2015 - 2016 <a href="http://yoursite.com"></a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>