<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iOS中的MVC概念 | spike</title>
  <meta name="author" content="John Doe">
  
  <meta name="description" content="原版
* ModelModel 是 What your application is(but not how it is desplayed)，各种数据以及它们之间的逻辑等都是Model，Model是独立于UI的。* ControllerController 是 How your Model is ">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="iOS中的MVC概念"/>
  <meta property="og:site_name" content="spike"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="spike" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">  
  <link rel="stylesheet" href="/css/sidenav.css" media="screen" type="text/css">  
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  

</head>

<body id="body" data-spy="scroll" data-target=".toc">
  <div class="container" id="container">
	<div class="content">
	  <div class="page-header">		
  <h1><a class="brand" href="/">spike</a><span class="split"></span><span class="title">iOS中的MVC概念</span><span class="date" id="title-date"><i class="fa fa-clock-o"></i> 2016-06-15</span></h1>
</div>		

<div class="row page">
  <!-- cols -->	
  
  

  
	<div class="col-md-12">
	  

	  <!-- content -->
	  <p><a href="http://www.samirchen.com/mvc-in-ios/" target="_blank" rel="external">原版</a></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">* Model</span><br><span class="line"></span><br><span class="line">Model 是 What your application is(but not how it is desplayed)，各种数据以及它们之间的逻辑等都是Model，Model是独立于UI的。</span><br><span class="line"></span><br><span class="line">* Controller</span><br><span class="line"></span><br><span class="line">Controller 是 How your Model is presented to the user (UI logic)，即UI逻辑，Controller来把Mode的数据和逻辑表达出来，绘制、展示到屏幕上。</span><br><span class="line"></span><br><span class="line">* View</span><br><span class="line"></span><br><span class="line">View 是 Your Controller&apos;s minions，是Controller要用到的各种基础性的UI元素（Genetic UI Element），是Controller表达Model数据和逻辑用到的工具。</span><br><span class="line"></span><br><span class="line">总的来说，就是 Controller 用 View 来把 Model 表达到屏幕上。</span><br><span class="line"></span><br><span class="line">* M、V、C之间如何对话</span><br><span class="line"></span><br><span class="line">Controller —&gt; Model (OK)</span><br><span class="line"></span><br><span class="line">Controller 对相应的 Model 说话是很正常的。</span><br><span class="line"></span><br><span class="line">Controller —&gt; Vew (OK)</span><br><span class="line"></span><br><span class="line">Controller 对相应的 View 说话也是很正常的。</span><br><span class="line"></span><br><span class="line">Model &lt;—&gt; View (Never)</span><br><span class="line"></span><br><span class="line">Model 和 View 之间则永远不要对话！</span><br><span class="line"></span><br><span class="line">View —&gt; Controller (Limited)</span><br><span class="line"></span><br><span class="line">View 一般不要对 Controller 直接说话。但有时候，确实有这个需要，所以有以下几种方式让View对Controller说话：</span><br><span class="line"></span><br><span class="line">action - target</span><br><span class="line"></span><br><span class="line">Controller 在自己上面放了 target 明确告诉 View 的 action 去和这个 target 对话。比如一个 button 的 touch 动作触发时去告诉 Controller 的 target 这个 action，让 Controller 在这个 action 中做点什么。其实 View 这时候是不知道关于这个 target 背后的这个 Controller 的任何信息的。所以</span><br><span class="line"></span><br><span class="line">It is a blind, simple, structured way for the view to communicate with the controller.</span><br><span class="line"></span><br><span class="line">delegate</span><br><span class="line"></span><br><span class="line">View 和 Controller 对话还有更复杂的方式，比如当一个 ScrollView 被滑动了，滑动停止时，View 需要告诉 Controller 滑动停止了，像我们常见的 will，should，did 类的方法，它们就是在 Controller 里设置了代理 Delegate 去响应这些消息，对 View 来说，它也不知道 Controller 的具体信息，它只是知道 Controller 能响应它的那些 will，should，did 类的消息。要使用 Delegate 模式，就涉及到 protocal。</span><br><span class="line"></span><br><span class="line">A protocal is a blind way to talk to another object.</span><br><span class="line"></span><br><span class="line">datasource</span><br><span class="line"></span><br><span class="line">View 不持有它所显示的数据，这些数据应该是属于 Model 的。View 常常通过 datasource 来询问数据，它通常会向 datasource 询问 count，data at * index 之类的消息，其实 datasource 就是另一种 delegate，很明显 Controller 应该作为 View 的 datasource delegate，而不是 Model。当 View 询问数据相关的消息时，Controller 则先去询问 Model 然后再作为 datasource delegate 来响应 View。</span><br><span class="line"></span><br><span class="line">Data source is just a kind of delegate, it’s a specific kind of delegate for getting data.</span><br><span class="line"></span><br><span class="line">Model —&gt; Controller (Limited)</span><br><span class="line"></span><br><span class="line">Model 一般也不要对 Controller 直接对话。但有时候也有需求，所以提供了一些机制来满足这些需求：</span><br><span class="line"></span><br><span class="line">Notification &amp; KVO(Key Value Observing)</span><br><span class="line"></span><br><span class="line">有时候 Model 中的某些东西改变了，比如数据改变了、网络连通了等，它需要告诉 Controller。这时候我们用 “radio station”，类似广播机制去通知任何对这信息感兴趣的对象，这就是常用的 Notification(通知中心) &amp; KVO(Key Value Observing，键值观察)。这就相当于 Model 在广播里吼 “我Model这某时某刻某些东东发生变动了，大家快来看啊！”，这时 Controller 就调到那个广播频道听到了，知道 Model 那某些东东发生变化了，然后它对此感兴趣就通过 Control—&gt;Model 这个途径去 Model 那取那些发生变化的数据。</span><br></pre></td></tr></table></figure>
<p>MVC对话示意图<br><img src="http://www.samirchen.com/images/mvc-in-ios/mvc-communication.png" alt=""></p>
	  

	  <div>
  		<center>
		  <div class="pagination">
<ul class="pagination">
	
	
	
	
	
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			
			
		
	
		
			
			
			
		
	
		
	
		
			
		
	
		
			
		
	
		
	
		
	
		
	
		
	
		
	
		
	
	
	
		<li class="prev"><a href="/2016/06/30/iOS/iOS开发中的数据持久化/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>prev</a></li>
	
	<li><a href="/"><i class="fa fa-archive"></i>Home</a></li>
	
		<li class="next"><a href="/2016/06/15/iOS/iOS应用程序的生命周期/" class="alignright next">next<i class="fa fa-arrow-circle-o-right"></i></a></li>
	
</ul>
</div>

		</center>
	  </div>
	  
	</div> <!-- col-md-9/col-md-12 -->
	
  </div><!-- row -->

	</div>
  </div>
  <div class="container-narrow">
	<footer> <p>
  &copy; 2016 John Doe
  
      with help from <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-wixo/">Wixo</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.tableofcontents.min.js"></script>
<script src="/js/tocgenerator.min.js"></script>
<script src="/js/main.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>
